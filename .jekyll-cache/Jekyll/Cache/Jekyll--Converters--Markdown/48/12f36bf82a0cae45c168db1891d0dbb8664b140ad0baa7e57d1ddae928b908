I"7è<p><br /></p>

<h1 id="11-dynamic-programming">11. Dynamic Programming</h1>

<p>greedy algorithmê³¼ dynamic programmingì€ êµ‰ì¥íˆ ë§ì´ ì“°ì´ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.</p>

<hr />

<p>11-2</p>

<h2 id="fibonacci-series">Fibonacci series</h2>

<p>Letâ€™s consider and example to understand how dynamic programming works. We use the Fibonacci series to illustrate</p>

<p>The sequence of numbers
<img src="https://user-images.githubusercontent.com/79521972/168503404-9961b12a-10f9-48ce-a26d-331fbdfb3d14.png" alt="image" /></p>

<p>that are defined by the formula</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168503427-c3af3aa6-15bf-4c8d-9ba3-88f5c36158f2.png" alt="image" /></p>

<p>are known as the fibonacci numbers</p>

<ul>
  <li>0 ë²ˆì§¸ì™€ 1 ë²ˆì§¸ ê°’ì€ 0ê³¼ 1ë¡œ í•­ìƒ ì •í•´ì ¸ ìˆëŠ” ê°’ì´ë‹¤.</li>
</ul>

<hr />

<p>11-3</p>

<h2 id="recursive-implementation">Recursive implementation</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span> <span class="c1"># 1
</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="c1"># 5 
</span>    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    
    
<span class="k">print</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">36</span><span class="p">))</span> <span class="c1"># 12
</span><span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14930352
8.691221952438354
</code></pre></div></div>

<hr />

<p>11-4</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168503542-8cb82ca0-76b5-4267-a9a9-8973195a8b30.png" alt="image" /></p>

<p>ë˜‘ê°™ì€ ê³„ì‚° ê³¼ì •ì´ ë°˜ë³µì´ ë¼ì„œ(ì¤‘ë³µì ìœ¼ë¡œ) ì¼ì–´ë‚˜ê²Œ ëœë‹¤.</p>

<p>ìœ„ ê·¸ë¦¼ì€ 7ì— ëŒ€í•œ fibonacci ê²°ê³¼ë¥¼ treeë¡œ ë‚˜íƒ€ë‚¸ ê²ƒì¸ë° 36ì— ëŒ€í•œ fibonacci ê²°ê³¼ë¥¼ treeë¡œ ê·¸ë¦°ë‹¤ë©´ êµ‰ì¥íˆ í¬ê³  ì¤‘ë³µì´ ìˆ˜ë„ ì—†ì´ ë§ì€ êµ¬ì¡°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ê³  ì´ëŠ” í™•ì‹¤íˆ ì¢‹ì§€ ì•Šì€ ì„±ëŠ¥ì„ ì•¼ê¸°í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>

<hr />

<p>11-5</p>

<h2 id="dynamic-programming">Dynamic Programming</h2>

<p>Dynamic programming, like the divide-and-conquer method, <mark>solves problems by combining the solutions to subproblems.</mark> (â€œProgrammingâ€ in this context refers to a tabular method, not to writing compter code.)</p>

<ul>
  <li>tabular method: í…Œì´ë¸”ì— ê¸°ë¡í•˜ëŠ” ë°©ì‹</li>
</ul>

<p><strong>Divide-and-conquer algorithms</strong> <code class="language-plaintext highlighter-rouge">partition</code> the problem into disjoint subproblems, <code class="language-plaintext highlighter-rouge">solve</code> the subproblems recursively, and then <code class="language-plaintext highlighter-rouge">combine</code> their solutions to solve the original problem.
In contrast, <strong>dynamic programming</strong> applies <span style="color:red">when the subproblems overlap</span></p>

<ul>
  <li>that is, when subproblems share subsubproblems.</li>
</ul>

<p>In this context, a divide-and-conquer algorithm does more work than necessary, repeatedly solving the common subsubproblems. <mark>A dynamic-programming algorithm solves each subsubproblem just once and then saves its answer in a table</mark>, thereby avoiding the work of recomputing the answer every time it solves each subsubproblem.</p>

<ul>
  <li>ì‘ì€ sizeì˜ ë¬¸ì œë¥¼ ë”± í•œ ë²ˆë§Œ í’€ê³  ê·¸ í‘¼ ê²°ê³¼ë¥¼ tableì— ì €ì¥í•´ ë‘ëŠ” ê²ƒì´ë‹¤.
    <ul>
      <li>ë‚˜ì¤‘ì— ê·¸ ë¬¸ì œê°€ ë˜ ì¤‘ë³µë˜ì–´ ë‚˜ì™”ì„ ë•Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>í•˜ë…¸ì´ ë¬¸ì œì˜ ê²½ìš° divide-and-conquer ë¡œ í’€ì—ˆì—ˆëŠ”ë° ê·¸ ë¬¸ì œì—ì„œ ë‚˜ëˆ ì¡Œë˜ subproblem ë“¤ì— ëŒ€í•´ì„œ ì¤‘ë³µëœ ë¬¸ì œê°€ í•˜ë‚˜ë„ ì—†ì—ˆë‹¤.</p>

<p>ì¦‰, ì£¼ì–´ì§„ ë¬¸ì œë¥¼ subproblemìœ¼ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œ ì¤‘ë³µì´ ì—†ë‹¤ë©´ divide-and-conquerë¼ë©´
ì¤‘ë³µì´ êµ‰ì¥íˆ ë§ì´ ë‚˜ì˜¨ë‹¤ë©´ dynamic programming ì´ë‹¤.</p>

<hr />

<p>11-6</p>

<p>Dynamic programming thus <strong>uses additional memory to save computation time</strong>;</p>

<ul>
  <li>it serves an example of a <strong>time-memory trade-off</strong>.</li>
</ul>

<p>The savings may be dramatic: an exponential-time solution may be transformed into a polynomial-time solution.</p>

<p>There are usually two equivalent ways to implement a dynamic-programming approach.</p>

<p><mark>The first approach is top-down with memoization.</mark> In this approach, we write the procedure recursively in a natural manner, but modified to save the result to each subproblem (usually in an array or hash table). The procedure now first checks to see whether it has previously solved this subproblem.</p>

<p>If so, it returns the saved value, saving further computation at this level; if not, the procedure computes the value in the usual manner. We say that the recursive procedure has been memoized;</p>

<ul>
  <li>it â€œremembersâ€ what results it has computed previously.</li>
</ul>

<p><br />
í•œ sizeì˜ ë¬¸ì œë¥¼ ì¡°ê¸ˆì”© ì¤„ì—¬ë‚˜ê°„ë‹¤.</p>

<ul>
  <li>f(n) - &gt; f(n-1) -&gt; f(n-2) -&gt; â€¦
    <ul>
      <li>recursion</li>
    </ul>
  </li>
</ul>

<hr />

<p>11-7</p>

<h2 id="top-down-with-memoization">top-down with memoization</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">fibonacci_td</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="c1"># 5
</span>    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    
    <span class="k">if</span> <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="c1"># 9 ; ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ memo!
</span>        <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">fibonacci_td</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci_td</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>


<span class="n">_memo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">50</span> <span class="c1"># 15
</span><span class="k">print</span><span class="p">(</span><span class="n">fibonacci_td</span><span class="p">(</span><span class="mi">36</span><span class="p">))</span>
</code></pre></div></div>

<p>The numbers grow exponentially, so the array is small - for example, F<sub>46</sub> = 1836311903 is the largest Fibonacci number that can be represented as a 32-bit integer</p>

<ul>
  <li>32-bit integerë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ fibonacci ìˆ˜ëŠ” 46ì´ë‹¤.</li>
  <li>ê·¸ ì´ìƒì€ long long ë°ì´í„° íƒ€ì…ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.(íŒŒì´ì¬ì€ ìƒê´€ ì—†ìŒ)</li>
</ul>

<p>listì— ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ì—¬</p>

<ul>
  <li>ë§Œì•½ ì €ì¥ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´: ë” ì‘ì€ sizeì˜ ë¬¸ì œë¥¼ subproblemì„ ë‚˜ëˆ ì„œ memoì— ì €ì¥í•˜ê³ </li>
  <li>ë§Œì•½ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ memo ë˜ì–´ìˆëŠ” ê°’ì„ ë°˜í™˜
    <ul>
      <li>ì´ëŸ¬ë©´ ì¬ê·€ë¥¼ íƒ€ì§€ ì•Šì•„ë„ ê·¸ëƒ¥ ë°”ë¡œ ë¦¬í„´ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
  <li>ì‹¤í–‰ ê²°ê³¼</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14930352
0.0
</code></pre></div></div>

<hr />

<p>11-8</p>

<p><mark>The second approach is the bottom-up method.</mark> This approach typically depends on some natural notion of the â€œsizeâ€ of a subproblem, such that solving any paricular subproblem depends only on solving â€œsmallerâ€ subproblems. We sort the subproblems by size and solve them in size order, smallest first.</p>

<p>When solving a particular subproblem, we have already solved all of the smaller subproblems its solution depends upon, and we have saved their solutions.</p>

<ul>
  <li>ì œì¼ ì‘ì€ sizeì¸ f(1)ë¶€í„° ì‹œì‘í•˜ì—¬ f(2), f(3), â€¦ ì´ëŸ° ì‹ìœ¼ë¡œ ì°¨ê·¼ì°¨ê·¼ ì˜¬ë¼ê°€ë©´ì„œ í‘¸ëŠ” ë°©ë²•ì´ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">fibonacci_bu</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="c1"># 5
</span>    <span class="n">memo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># base case
</span>    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">memo</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">])</span>
        
    <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># 11
</span>

<span class="k">print</span><span class="p">(</span><span class="n">fibonacci_bu</span><span class="p">(</span><span class="mi">36</span><span class="p">))</span> <span class="c1"># 14
</span></code></pre></div></div>

<p>ë¦¬ìŠ¤íŠ¸ì˜ ë§ˆì§€ë§‰ì— ë‹´ê¸´ ê°’ì´ ìµœì¢… ê²°ê³¼ì„</p>

<hr />

<p>11-9</p>

<h2 id="top-down-vs-bottom-up">top-down vs. bottom-up</h2>

<p>ë­ê°€ ë” ì¢‹ì€ ë°©ë²•ì¼ê¹Œ? -&gt; ê²°ë¡ ë¶€í„° ì–˜ê¸° í•˜ìë©´ ë¬¸ì œì— ë”°ë¼ ë‹¤ë¥´ë‹¤.(case by case)</p>

<p>ê·¸ëŸ¬ë‚˜ ì¼ë°˜ì ìœ¼ë¡œ íŠ¹ì§•ì„ ë¹„êµí•´ ë³´ìë©´ ì•„ë˜ ê¸€ê³¼ ê°™ë‹¤.</p>

<p>Indeed, we can use the <strong>bottom-up</strong> approach <strong>any time that we use the top-down approach</strong>, although we need to take care to ensure that we compute the function values in an appropriate order, so that each value that we need has been computed when we need it.</p>

<p>In top-down dynamic programming, we save known values; in bottom-up dynamic programming, we precompute them. <strong>We generally prefer top-down to bottom-up dynamic programming, because</strong></p>

<p>bottom up ë³´ë‹¤ top downì„ ì„ í˜¸í•œë‹¤.</p>

<ul>
  <li>It is a mechanical transformation of a natural problem solution.
    <ul>
      <li>ì¢€ ë” ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì œ í•´ê²° ê°€ëŠ¥</li>
    </ul>
  </li>
  <li>The order of computing the subproblems takes care of itself.
    <ul>
      <li>ê³„ì‚° ìˆœì„œë¥¼ ìŠ¤ìŠ¤ë¡œ ì•Œì•„ì„œ í•´ê²°</li>
    </ul>
  </li>
  <li>We may not need to compute answer to all the subproblems.
    <ul>
      <li>ëª¨ë“  subproblemì— ëŒ€í•œ ë‹µì„ ê³„ì‚°í•  í•„ìš”ê°€ ì—†ë‹¤.</li>
    </ul>
  </li>
</ul>

<p>ì£¼ì–´ì§„ sizeì˜ ë¬¸ì œë¥¼ ë” ì‘ì€ sizeì˜ ë¬¸ì œë¡œ ë‚˜ëˆ„ëŠ” ê²ƒ -&gt; recurrence equation</p>

<hr />

<p>11-10</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168504697-5cddf421-4bf6-432f-ba2c-79e343ff0c27.png" alt="image" /></p>

<p><a href="https://www.acmicpc.net/problem/2748">https://www.acmicpc.net/problem/2748</a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fibonacci_td</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">if</span> <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">fibonacci_td</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci_td</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_memo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>


<span class="n">_n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="n">_memo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">91</span>
<span class="k">print</span><span class="p">(</span><span class="n">fibonacci_td</span><span class="p">(</span><span class="n">_n</span><span class="p">))</span>

</code></pre></div></div>

<hr />

<p>11-11</p>

<h2 id="151-rod-cutting">15.1 Rod cutting</h2>

<p>Serling Enterprises(ì² ê°• íšŒì‚¬) buys long steel rods and cuts them into shorter rods, which it then sells. Each cut is free. The management of Serling Enterprises want to know the best way to cut up the rods.</p>

<p>The rod-cutting problem is the following. Given a rod of length n inches 
and a table of prices pi for i = 1, 2, â€¦., n, determine the <mark>maximum revenue r<sub>n</sub></mark> obtainable by cutting up the rod and selling hte pieces.</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168504861-a767d9d3-a0f1-4695-9403-6afa5829d3a4.png" alt="image" /></p>

<p>ì² ë´‰ì˜ ê¸¸ì´ì— ë”°ë¼ ì‹œì¥ ê°€ê²©ì´ ì •í•´ì ¸ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì² ê°•íšŒì‚¬ì—ì„œ ì² ë´‰ì„ ì–´ë–»ê²Œ ì˜ë¼ì•¼ ëˆì„ ë§ì´ ë²Œê¹Œ?</p>

<hr />

<p>11-12</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168504887-6619a606-b0f4-4659-b32d-fa1e51b0b112.png" alt="image" /></p>

<p>ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ì–´ë–»ê²Œ ë‚˜ëˆ ì„œ íŒŒëŠëƒì— ë”°ë¼ ë°›ì„ ìˆ˜ ìˆëŠ” ê°€ê²©ì´ ë‹¤ ë‹¤ë¥´ë‹¤.</p>

<p>ê·¸ë ‡ë‹¤ë©´ nì¸ì¹˜ì˜ ì² ë´‰ì´ ì£¼ì–´ì¡Œì„ ë•Œ ì–´ë–»ê²Œ ë‚˜ëˆ ì„œ íŒ”ì•„ì•¼ í• ì§€ë¥¼ ì•Œì•„ë³´ì.</p>

<p>ì´ëŸ¬í•œ ë¬¸ì œ êµ¬ì¡°ë¥¼ Optimization Problemì´ë¼ê³  í•œë‹¤.</p>

<ul>
  <li>ê·¸ë¦¬ê³  optimization ë¬¸ì œëŠ” ëŒ€ë¶€ë¶„ DPë¡œ í•´ê²°í•œë‹¤.</li>
</ul>

<hr />

<p>11-13</p>

<p>More generally, we can frame the values rn for n &gt;= 1 in terms of optimal revenues from shorter rods:</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168504950-864d8a40-dbe7-4f7f-8184-b61bb55994e8.png" alt="image" /></p>

<ul>
  <li>r<sub>n</sub>: nì¸ì¹˜ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìˆ˜ìµ</li>
  <li>p<sub>n</sub>: ì‹œì¥ ê°€ê²©</li>
  <li>ì´ nê°€ì§€ ê²½ìš°ì— ëŒ€í•´ ì¡°ì‚¬ë¥¼ í•´ì„œ ìµœëŒ€ê°’ì„ êµ¬í•œë‹¤.</li>
  <li>r<sub>1</sub>+r<sub>n-1</sub> ì€ ì‚¬ì‹¤ìƒ p<sub>1</sub>+r<sub>n-1</sub> ê³¼ ê°™ë‹¤.
    <ul>
      <li>ê·¸ë˜ì„œ ì•ì— ë”í•´ì§€ëŠ” rnì„ ëª¨ë‘ pnìœ¼ë¡œ ëŒ€ì¹˜í•˜ì—¬ í•˜ëŠ” ê²ƒì´ ë” í¸í•˜ë‹¤.</li>
    </ul>
  </li>
</ul>

<p>In a related, but slightly simpler, way to arrange a recursive structure for the rod-cutting problem, we view a decomposition as consisting of a first piece of length i cut off the left-hand end, and then a right-hand remainder of length n - i. Only the remainder, and not the first piece, may be further divided. We thus obtain the following simpler version of equation (15.1):</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168505091-16374575-d984-43aa-ba39-7ec3cfedd609.png" alt="image" /></p>

<p>p[i] + cut_rod(length - i)</p>

<p>ì˜ˆë¥¼ ë“¤ì–´, 4ì¸ì¹˜ ë‚˜ë¬´ì¸ ê²½ìš°</p>

<p>r4 -&gt;</p>

<ul>
  <li>p1 + r3</li>
  <li>p2 + r2</li>
  <li>p3 + r1</li>
  <li>p4</li>
</ul>

<p>ì¤‘ì—ì„œ ê°€ì¥ í° ê°’ì„ êµ¬í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<hr />

<p>11-14</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">math</span> <span class="c1"># 1
</span>

<span class="k">def</span> <span class="nf">cut_rod</span><span class="p">(</span><span class="n">length</span><span class="p">):</span> <span class="c1"># 4 
</span>    <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># r_0
</span>        <span class="k">return</span> <span class="mi">0</span>
    
    <span class="n">max_revenue</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">inf</span> <span class="c1"># -infinity
</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># 9
</span>        <span class="n">revenue</span> <span class="o">=</span> <span class="n">_price</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">cut_rod</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">revenue</span> <span class="o">&gt;</span> <span class="n">max_revenue</span><span class="p">:</span>
            <span class="n">max_revenue</span> <span class="o">=</span> <span class="n">revenue</span> <span class="c1"># ê°€ì¥ í° ê°’ì„ ì €ì¥í•˜ëŠ” logic
</span>            
    <span class="k">return</span> <span class="n">max_revenue</span>


<span class="n">_price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="c1"># 17
</span><span class="n">_length</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">print</span><span class="p">(</span><span class="n">cut_rod</span><span class="p">(</span><span class="n">_length</span><span class="p">))</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>22
</code></pre></div></div>

<hr />

<p>11-15</p>

<p><strong>Why is CUT-ROD so inefficient?</strong> The problem is that CUT-ROD calls itself recursively over and over again with the same parameter values;</p>

<ul>
  <li>it solves the same subproblems repeatedly. -&gt; êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì¸ ê³„ì‚°ì´ ëœë‹¤.</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/168517940-278d7008-2267-4aa8-afe2-4a4da2e58256.png" alt="image" /></p>

<p>ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ë¥¼ top-down ë°©ì‹ì˜ DPì™€ bottom-up ë°©ì‹ì˜ DPë¡œ ë°”ê¾¸ì–´ë³´ì.</p>

<hr />

<p>11-16</p>

<h2 id="top-down-with-memoization-1">top-down with memoization</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cut_rod_td</span><span class="p">(</span><span class="n">length</span><span class="p">):</span> <span class="c1"># 4
</span>    <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    
    <span class="k">if</span> <span class="n">_memo</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="c1"># 8
</span>        <span class="n">max_revenue</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">inf</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">revenue</span> <span class="o">=</span> <span class="n">_price</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">cut_rod_td</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="c1"># 11
</span>            <span class="k">if</span> <span class="n">revenue</span> <span class="o">&gt;</span> <span class="n">max_revenue</span><span class="p">:</span>
                <span class="n">max_revenue</span> <span class="o">-</span> <span class="n">revenue</span>
        <span class="c1"># save r_i
</span>        <span class="n">_memo</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_revenue</span>
        
    <span class="k">return</span> <span class="n">_memo</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="c1"># 17
</span>

<span class="n">_price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="c1"># 20
</span><span class="n">_memo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span>
<span class="n">_length</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">print</span><span class="p">(</span><span class="n">cut_rod_td</span><span class="p">(</span><span class="n">_length</span><span class="p">))</span>
</code></pre></div></div>

<hr />

<p>11-17</p>

<h2 id="bottom-up-method">bottom-up method</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cut_rod_bu</span><span class="p">(</span><span class="n">length</span><span class="p">):</span><span class="c1"># 4 
</span>    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">max_revenue</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">inf</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">revenue</span> <span class="o">=</span> <span class="n">_price</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">_memo</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">]</span> <span class="c1"># 9; memoë¥¼ í™œìš©í•¨
</span>            <span class="k">if</span> <span class="n">max_revenue</span> <span class="o">&lt;</span> <span class="n">revenue</span><span class="p">:</span>
                <span class="n">max_revenue</span> <span class="o">=</span> <span class="n">revenue</span>
        <span class="c1"># save r_i
</span>        <span class="n">_memo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_revenue</span> <span class="c1"># 13 
</span>        
    <span class="k">return</span> <span class="n">_memo</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="c1"># _memo[-1]
</span>

<span class="n">_price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="c1"># 18
</span><span class="n">_memo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span>
<span class="n">_length</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">print</span><span class="p">(</span><span class="n">cut_rod_bu</span><span class="p">(</span><span class="n">_length</span><span class="p">))</span>
</code></pre></div></div>

<p>i=1: p1</p>

<p>i=2: p1+ r1</p>

<p>â€‹		p2+r0</p>

<hr />

<p>11-18</p>

<h2 id="153-elements-of-dynamic-programming">15.3 Elements of dynamic programming</h2>

<ul>
  <li>We typically <strong>apply</strong> dynamic programming to <strong>optimization problems</strong>
    <ul>
      <li>n size ë¬¸ì œë¥¼ ë” ì‘ì€ sizeì˜ ë¬¸ì œë¡œ ë‚˜ëˆˆë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/168519662-d5fd7824-3d7e-4639-8367-7948afbede0c.png" alt="image" /></p>

<ul>
  <li>nì¸ì¹˜ ì§œë¦¬ ì² ë´‰ì´ ì£¼ì–´ì¡Œì„ ë•Œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ê²© -&gt; rn</li>
  <li>pi: iì¸ì¹˜ë¡œ ë‚˜ëˆ„ì–´ì„œ íŒ”ì•˜ì„ ë•Œì˜ ê°€ê²©</li>
  <li>
    <p>rn-i: (ë‚¨ì€ ë¶€ë¶„)n-iì¸ì¹˜ì—ì„œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ê²©(recursion)</p>
  </li>
  <li><strong>Two key ingredients</strong> that an optimization problem must have to apply dynamic programming:</li>
</ul>

<ol>
  <li><strong>Optimal substructure</strong>
    <ul>
      <li>divide-and-conquerì—ì„œì™€ì˜ ë˜‘ê°™ì€ íŠ¹ì„±</li>
      <li>An optimal solution contains optimal solutions to <strong>subproblems</strong></li>
    </ul>
  </li>
  <li><strong>Overlapping subproblems</strong>
    <ul>
      <li>divide-and-conquerì™€ êµ¬ë¶„ì„ ì§“ëŠ” ì°¨ì´ì </li>
      <li>Finding the solution involves solving the same subproblem multiple times</li>
      <li>A divide-and-conquer approach always generating new subproblems</li>
    </ul>
  </li>
</ol>

<hr />

<p>11-19</p>

<p>We typically apply dynamic programming to <strong>optimization problems</strong>. <mark>Such problems can have many possible solutions.</mark> Each solution has a value, and we wish to find a solution with the optimal (minumum or maximum) value. We call such a solution an optimal solution to the problem, as opposed to the <strong>optimal solution</strong>, since there may be several solutions that achieve <strong>the optimal value</strong>.</p>

<ul>
  <li>optimal valueë¡œ ë¶€í„° optimal solutionì„ ë§Œë“¤ì–´ë‚˜ê°„ë‹¤.</li>
</ul>

<p>When developing a dynamic-programming algorithm, we flow a sequence of <strong>four steps</strong>:</p>

<ol>
  <li>Characterize the structure of an optimal solution.</li>
  <li>Recursively define the value of an optimal solution.</li>
  <li>Compute the value of and optimal solution</li>
  <li>Construct an optimal solution from computed information.</li>
</ol>

<p>Steps 1-3 form the basis of a dynamic-programming solution to a problem. If we need only the value of an optimal solution, and not the solution itself, then we can omit step 4.</p>

<hr />

<p>11-20</p>

<h2 id="reconstructing-a-solution">Reconstructing a solution</h2>

<p>11-17pageë¥¼ ìˆ˜ì •í•œ ì½”ë“œ</p>

<p>Here is an <strong>extended version</strong> of BOTTOM-UP-CUT-ROD that computes, for each rod size j, not only the maximum revenue r<sub>j</sub>, but also s<sub>j</sub>, the optimal size of the first piece to cut off:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>			<span class="k">if</span> <span class="n">max_revenue</span> <span class="o">&lt;</span> <span class="n">revenue</span><span class="p">:</span> <span class="c1"># 10
</span>        		<span class="n">max_revenue</span> <span class="o">=</span> <span class="n">revenue</span>
            	<span class="n">_first</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="c1"># ì•ì—ê±°(j)ë¥¼ ì–¼ë§ˆë§Œí¼ ì˜ë¼ì•¼ì§€ revenueë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì €ì¥
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_memo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span> <span class="c1"># 20
</span><span class="n">_first</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span>
<span class="n">_length</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">print</span><span class="p">(</span><span class="n">cut_rod_bu</span><span class="p">(</span><span class="n">_length</span><span class="p">))</span> <span class="c1"># 23
</span><span class="k">while</span> <span class="n">_length</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">_first</span><span class="p">[</span><span class="n">_length</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s">' '</span><span class="p">)</span>
    <span class="n">_length</span> <span class="o">-=</span> <span class="n">_first</span><span class="p">[</span><span class="n">_length</span><span class="p">]</span>
</code></pre></div></div>

<ul>
  <li>
    <p>12, 21ë²ˆ lineì´ ìƒˆë¡œ ì¶”ê°€ë¨</p>
  </li>
  <li>
    <p>_first: 10ì¸ì¹˜ ì§œë¦¬ optimal valueë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ì„œ ì•ì—ê±°(j)ë¥¼ ì–¼ë§ˆë§Œí¼(ëª‡ ì¸ì¹˜ë¡œ) ì˜ë¼ì•¼ì§€ revenueë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ì•ì— ê°’ì„ ê¸°ë¡í•˜ëŠ” ìš©ë„ (r4ì˜ ê²½ìš° p2ë‹ˆê¹Œ 2ë¥¼ ê¸°ë¡)</p>
  </li>
  <li>
    <p>ì½”ë“œ ëŒë ¤ë³¼ ê²ƒ!!!!!!!!!</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># length 8
22 
2 6 

#length 4
10
2 2 

#length 6
17
6 

#length 10
30
10 
</code></pre></div></div>

<p>length 6ì€ 6 í˜¼ì íŒŒëŠ” ê²Œ ì œì¼ ë¹„ì‹¸ë‹ˆê¹Œ legnth 8ì—ì„œ 6ì´ ì“°ì˜€êµ¬ë‚˜!</p>

<hr />

<p>11-21</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168520429-c4b15bc3-4476-4503-b976-eccf6a971072.png" alt="image" /></p>

<p><a href="https://www.acmicpc.net/problem/1932">https://www.acmicpc.net/problem/1932</a></p>

<hr />

<p>11-22</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168520466-1525764a-6524-4ef3-ba3e-33aa3ee4af3b.png" alt="image" /></p>

<p><img src="https://user-images.githubusercontent.com/79521972/168976111-49a8837a-9c3c-4740-8659-4b8d367e05e1.png" alt="image" /></p>

<p>optimal structure</p>

<p>maxV(0, 0)ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ê°’</p>

<p><img src="https://user-images.githubusercontent.com/79521972/172112001-304fa604-0393-4d37-846f-db8331e3986c.png" alt="image" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="p">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'bj1932_in.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="n">triangle</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">triangle</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">().</span><span class="n">split</span><span class="p">())))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">max</span><span class="p">(</span><span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">triangle</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">triangle</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">triangle</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[7], [3, 8], [8, 1, 0], [2, 7, 4, 4], [4, 5, 2, 6, 5]] # origina triangle
[[7], [10, 15], [8, 1, 0], [2, 7, 4, 4], [4, 5, 2, 6, 5]]
[[7], [10, 15], [18, 16, 15], [2, 7, 4, 4], [4, 5, 2, 6, 5]]
[[7], [10, 15], [18, 16, 15], [20, 25, 20, 19], [4, 5, 2, 6, 5]]
[[7], [10, 15], [18, 16, 15], [20, 25, 20, 19], [24, 30, 27, 26, 24]]
30
</code></pre></div></div>

<p>j = 0ì¸ ê²½ìš°ëŠ” ì‚¼ê°í˜•ì˜ í•œ ì¤„ì—ì„œ ê°€ì¥ ì™¼ìª½ì— ìˆëŠ” ê°’ì´ê¸° ë•Œë¬¸ì— ë°”ë¡œ ìœ„ì˜ ì¤„ì˜ j = 0 ê°’ê³¼ ë”í•œ ê°’ìœ¼ë¡œ ì¹˜í™˜í•œë‹¤.</p>

<p>j == iì¸ ê²½ìš° ì¦‰, ì‚¼ê°í˜•ì˜ í•œ ì¤„ì—ì„œ ê°€ì¥ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ê°’ì´ê¸° ë•Œë¬¸ì— ë°”ë¡œ ìœ„ì˜ ì¤„ì˜ j = i ê°’ê³¼ ë”í•œ ê°’ìœ¼ë¡œ ì¹˜í™˜í•œë‹¤.</p>

<p>ìœ„ ë‘ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ì™¼ìª½ branchì™€ ì˜¤ë¥¸ìª½ branchê°€ ê²¹ì¹˜ëŠ” ê²½ìš°ì¸ë° ì´ ë•ŒëŠ” ë‘ ê°’ì— maxë¥¼ ì·¨í•´ ì£¼ë©´ ëœë‹¤.</p>

<hr />

<p>11-23</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">max_path</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span> <span class="c1"># 5
</span>    <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="n">_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># ì œì¼ ë°‘ì— ì¤„ì¸ ê²½ìš°ëŠ” ê·¸ëƒ¥ ê·¸ ìë¦¬ì˜ ê°’ì´ ê²°ê³¼ê°’ì„
</span>        <span class="k">return</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>
    
    <span class="n">path_left</span> <span class="o">=</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">+</span> <span class="n">max_path</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span> <span class="c1"># 9
</span>    <span class="n">path_right</span> <span class="o">=</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">+</span> <span class="n">max_path</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">path_left</span><span class="p">,</span> <span class="n">path_right</span><span class="p">)</span>


<span class="n">_triangle</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 15
</span><span class="n">_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">_size</span><span class="p">):</span>
    <span class="n">_triangle</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">().</span><span class="n">split</span><span class="p">())))</span> <span class="c1"># 18
</span>    
<span class="k">print</span><span class="p">(</span><span class="n">max_path</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/79521972/168520638-9dc137d7-4607-4c73-b3ce-9abd6fe35493.png" alt="image" /></p>

<ul>
  <li>í•œ ì¤„ ë‚´ë ¤ê°ˆ ë•Œë§ˆë‹¤ ì¤‘ë³µ ë§ì•„ì„œ ë°±ì¤€ì— ì œì¶œí•˜ë©´ ì‹œê°„ì´ˆê³¼ ë°œìƒ
    <ul>
      <li>so, DPë¡œ ë³€ê²½í•´ì•¼ í•¨.</li>
    </ul>
  </li>
  <li>Top downì˜ ê²½ìš° triangleê³¼ í¬ê¸°ê°€ ì™„ì „íˆ ë˜‘ê°™ì€ memo list í•˜ë‚˜ë¥¼ ë§Œë“¤ê³  max_path í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ memoì— ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ë¥¼ í™•ì¸ í›„ ì €ì¥ì´ ì•ˆë˜ì–´ ìˆë‹¤ë©´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ê³  ì €ì¥ì´ ë˜ì–´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ê·¸ ê°’ì„ ë¦¬í„´í•˜ë„ë¡ í•œë‹¤.</li>
  <li>Bottom upì˜ ê²½ìš° loopë¥¼ ì‚¬ìš©í•˜ì—¬ ë°‘ì—ì„œë¶€í„° ìœ„ë¡œ ê³„ì‚°í•˜ë©´ì„œ ì˜¬ë¼ê°€ë©´ ëœë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="p">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'bj1932_in.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">max_path</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="n">_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">_memo</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">path_left</span> <span class="o">=</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">+</span> <span class="n">max_path</span><span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
        <span class="n">path_right</span> <span class="o">=</span> <span class="n">_triangle</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">+</span> <span class="n">max_path</span><span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">_memo</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">path_left</span><span class="p">,</span> <span class="n">path_right</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_memo</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>


<span class="n">_triangle</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_memo</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">_size</span><span class="p">):</span>
    <span class="n">_triangle</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">().</span><span class="n">split</span><span class="p">())))</span>

<span class="n">_memo</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">None</span><span class="p">]</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_size</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>


<span class="k">print</span><span class="p">(</span><span class="n">max_path</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">_memo</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>30
[[30], [23, 21], [20, 13, 10], [7, 12, 10, 10], [None, None, None, None, None]]
</code></pre></div></div>

<hr />

<p>11-24</p>

<h2 id="0-1-knapsack-problem">0-1 Knapsack problem</h2>

<p>The <strong>0-1 knapsack problem</strong> is the following. A thief robbing a store finds n items. The <em>i</em>-th item is worth v<sub>i</sub> dollars and weighs w<sub>i</sub> pounds, where v<sub>i</sub> and w<sub>i</sub> are integers. The thief wants to take as valuable a load as possible, but he can carry at most W pounds in his knapsack, for some integer W. Which items should he take?</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168520845-99c2122c-af74-467f-8aee-f6524079ac88.png" alt="image" /></p>

<ul>
  <li>objective function: ë¬´ì–¸ê°€ë¥¼ ìµœëŒ€í™”(maximize) í•´ì•¼í•˜ëŠ” í•¨ìˆ˜</li>
  <li>constraint: ìµœëŒ€í™” í•  ë•Œì˜ ì¡°ê±´
    <ul>
      <li>ë¬¼ê±´ì„ ë‹´ìœ¼ë©´ 1 / ì•ˆ ë‹´ìœ¼ë©´ 0</li>
    </ul>
  </li>
</ul>

<hr />

<p>11-25</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168520896-ba378f1f-0178-438b-8e5d-1aa97f5e4d9c.png" alt="image" /></p>

<hr />

<p>11-26</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168520917-cfa3fa1d-b85d-47b7-b79f-83bbc32da83a.png" alt="image" /></p>

<p><a href="https://www.acmicpc.net/problem/12865">https://www.acmicpc.net/problem/12865</a></p>

<hr />

<p>11-27</p>

<p><img src="https://user-images.githubusercontent.com/79521972/168521024-e60e76d4-63a6-4a73-a16d-b8e67444b91a.png" alt="image" /></p>

<ul>
  <li>maxV(7,0) - ì—¬ìœ ê³µê°„ 7, ê³ ë ¤í•˜ëŠ” ë¬¼ê±´ 0 ë²ˆì§¸ = V0 + maxV(1, 1)</li>
  <li>max(7,1)</li>
  <li>ìœ„ ë‘˜ ì¤‘ì— maxê°€ ì •ë‹µ</li>
</ul>

<hr />

<p>11-28</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span> <span class="c1"># 5
</span>    <span class="c1"># capacity: current capacity of the knapsack, [0.._capacity]
</span>    <span class="c1"># item: index of the item to be considered, [0..number-1]
</span>    <span class="c1"># _number: number of items -&gt; W
</span>    <span class="c1"># _capacity: capacity of the knapsack -&gt; W
</span>    <span class="c1"># _weight: weight list of the items -&gt; Wi
</span>    <span class="c1"># _value: value list of the items -&gt; Vi
</span>    
    <span class="k">if</span> <span class="n">capacity</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">item</span> <span class="o">&gt;=</span> <span class="n">_number</span><span class="p">:</span> <span class="c1"># 13
</span>        <span class="k">return</span> <span class="mi">0</span>
    
    <span class="k">if</span> <span class="n">_weight</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">capacity</span><span class="p">:</span> <span class="c1"># 16
</span>        <span class="k">return</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">with_the_item</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span> <span class="o">-</span> <span class="n">_weight</span><span class="p">[</span><span class="n">item</span><span class="p">],</span> <span class="n">item</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 19
</span>    <span class="n">without_the_item</span> <span class="o">=</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">with_the_item</span><span class="p">,</span> <span class="n">without_the_item</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>knapsack(-capacity, 0)</li>
  <li><img src="https://user-images.githubusercontent.com/79521972/169052588-9662382e-3fa3-435f-8aee-1af68fc02c58.png" alt="image" /></li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/168521280-1c569835-402d-4e3b-a4ff-7111ba655705.png" alt="image" /></p>

<ul>
  <li>Top downìœ¼ë¡œ ë°”ê¾¼ë‹¤. -&gt; memoë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë§Œë“¤ì–´ì„œ í•œ ë…¸ë“œ(íŠœí”Œ)ì„ keyë¡œ í•´ì„œ ê°’ì„ ê³„ì† ì €ì¥í•´ì„œ ì¬ê·€ í˜¸ì¶œì„ í•˜ëŠ”ë° memoì•ˆì— ì¡´ì¬í•˜ëŠ” ì§€ë¥¼ ë¨¼ì € íŒŒì•…í•´ì„œ ê·¸ê±¸ í† ëŒ€ë¡œ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•˜ë©´ì„œ ì§„í–‰í•œë‹¤.
    <ul>
      <li>ì €ì¥í•´ì•¼ í•˜ëŠ” key ìˆ˜ê°€ ê·¸ë ‡ê²Œ ë§ì§€ ì•ŠìŒ</li>
    </ul>
  </li>
  <li>bottom upìœ¼ë¡œ í•˜ë©´ ì–´ë””ì„œ ë¶€í„° ì˜¬ë¼ê°€ì•¼ ë  ì§€ë¥¼ ì•Œ ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ì´ì°¨ì› ë¦¬ìŠ¤íŠ¸ì˜ ì‚¬ì´ì¦ˆê°€ WxN ë§Œí¼ìœ¼ë¡œ ë‹¤ ì±„ì›Œì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ê³„ì‚°ì„ ë§ì´í•˜ì—¬ ì‹¤í–‰ ì†ë„ê°€ êµ‰ì¥íˆ ì˜¤ë˜ ê±¸ë¦°ë‹¤.</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/172128274-35d340e4-d961-4d67-900f-e3b2cf93422f.png" alt="image" /></p>

<p>ë”°ë¼ì„œ ì™¼ìª½ìœ¼ë¡œ ê°€ì„œ ë¬¼ê±´ì„ ì§‘ì–´ ë„£ìœ¼ë©´ capcityì—ì„œ ë¬¼ê±´ì˜ weight ë§Œí¼ ëº€ í›„ ë‹¤ìŒ ì•„ì´í…œì— ëŒ€í•´ knapsack í•¨ìˆ˜ë¥¼ ì¬ê·€ í˜¸ì¶œì„ ì§„í–‰í•œë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>  <span class="c1"># 5
</span>    <span class="c1"># capacity: current capacity of the knapsack, [0.._capacity]
</span>    <span class="c1"># item: index of the item to be considered, [0..number-1]
</span>    <span class="c1"># _number: number of items -&gt; N
</span>    <span class="c1"># _capacity: capacity of the knapsack -&gt; W
</span>    <span class="c1"># _weight: weight list of the items -&gt; wi
</span>    <span class="c1"># _value: value list of the items -&gt; vi
</span>
    <span class="k">if</span> <span class="n">capacity</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">item</span> <span class="o">&gt;=</span> <span class="n">_number</span><span class="p">:</span>  <span class="c1"># 13
</span>        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">_memo</span><span class="p">.</span><span class="n">get</span><span class="p">((</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">_weight</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">capacity</span><span class="p">:</span>  <span class="c1"># 16 ; ë„£ê³  ì‹¶ì–´ë„ ëª»ë„£ëŠ” ê²½ìš°
</span>            <span class="k">return</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># ë§Œì•½ í˜„ì¬ itemì´ ìš©ëŸ‰ì„ ë„˜ì–´ì„œë©´ ë‹¤ìŒ item ë³´ê¸°
</span>
        <span class="n">with_the_item</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span> <span class="o">-</span> <span class="n">_weight</span><span class="p">[</span><span class="n">item</span><span class="p">],</span> <span class="n">item</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 19
</span>        <span class="n">without_the_item</span> <span class="o">=</span> <span class="n">knapsack</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_memo</span><span class="p">[(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">with_the_item</span><span class="p">,</span> <span class="n">without_the_item</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_memo</span><span class="p">[(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">item</span><span class="p">)]</span>


<span class="n">sys</span><span class="p">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'bj12865_in.txt'</span><span class="p">)</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">.</span><span class="n">readline</span>

<span class="n">_number</span><span class="p">,</span> <span class="n">_capacity</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">().</span><span class="n">split</span><span class="p">())</span> <span class="c1"># n: ê°¯ìˆ˜, k: ë²„í‹¸ ìˆ˜ ìˆëŠ” ë¬´ê²Œ
</span>
<span class="n">_memo</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">_weight</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_value</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">_number</span><span class="p">):</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">().</span><span class="n">split</span><span class="p">())</span>
    <span class="n">_weight</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
    <span class="n">_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">knapsack</span><span class="p">(</span><span class="n">_capacity</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">_memo</span><span class="p">)</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14
{(3, 2): 6, (7, 3): 12, (7, 2): 12, (7, 1): 14, (7, 0): 14}
</code></pre></div></div>

:ET