I"Ÿ¿<p><br /></p>

<h1 id="121-íŒŒì´í”„">12.1 íŒŒì´í”„</h1>

<h2 id="íŒŒì´í”„-ì›ë¦¬">íŒŒì´í”„ ì›ë¦¬</h2>

<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td>$ who</td>
          <td>sort</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169849580-00d96551-e817-464c-8564-216a23f2ef7c.png" alt="image" /></p>

<ul>
  <li>íŒŒì´í”„
    <ul>
      <li>ë¬¼ì„ ë³´ë‚´ëŠ” ìˆ˜ë„ íŒŒì´í”„ì™€ ë¹„ìŠ·</li>
      <li>í•œ í”„ë¡œì„¸ìŠ¤ëŠ” ì“°ê¸°ìš© íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ì´ìš©í•˜ì—¬ íŒŒì´í”„ì— ë°ì´í„°ë¥¼ ë³´ë‚´ê³ (ì“°ê³ )</li>
      <li>ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì½ê¸°ìš© íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ì´ìš©í•˜ì—¬ ê·¸ íŒŒì´í”„ì—ì„œ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤(ì½ëŠ”ë‹¤).</li>
      <li><strong>í•œ ë°©í–¥(one way) í†µì‹ </strong></li>
    </ul>
  </li>
  <li>í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œë¥¼ í†µí•´ì„œ ì „ë‹¬í•  ë°©ë²•ì´ ì—†ë‹¤.</li>
  <li>pipe sizeê°€ ê½‰ì°¬ ê²½ìš° ì•Œì•„ì„œ ì†ë„ë¥¼ ì¡°ì ˆí•´ì¤€ë‹¤. -&gt; synchronization</li>
</ul>

<p><br /></p>

<h2 id="íŒŒì´í”„-ìƒì„±">íŒŒì´í”„ ìƒì„±</h2>

<ul>
  <li>íŒŒì´í”„ëŠ” ë‘ ê°œì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ê°–ëŠ”ë‹¤.</li>
  <li>í•˜ë‚˜ëŠ” ì“°ê¸°ìš©ì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì½ê¸°ìš©ì´ë‹¤.</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="n">pipe</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
 <span class="c1">//íŒŒì´í”„ë¥¼ ìƒì„±í•œë‹¤. ì„±ê³µí•˜ë©´ 0ì„ ì‹¤íŒ¨í•˜ë©´ -1ì„ ë°˜í™˜í•œë‹¤</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/79521972/169849812-8a317e43-2397-4b23-88f2-c23e3a3a474a.png" alt="image" /></p>

<p><br /></p>

<h2 id="ipc-using-pipes">IPC using Pipes</h2>

<p>Inter-Process Communication - process ê°„ í†µì‹ </p>

<ul>
  <li>IPC using <strong>regular files</strong>
    <ul>
      <li>unrelated processes can share</li>
      <li>fixed size</li>
      <li>life-time</li>
      <li><strong>lack of synchronization</strong> (ë§¤ìš° ë¶ˆí¸)</li>
    </ul>
  </li>
  <li>IPC using <strong>pipes</strong>
    <ul>
      <li>for transmitting data between related processes</li>
      <li>can transmit an unlimited amount of data</li>
      <li>automatic synchronization on open()</li>
      <li>pipe sizeê°€ ê½‰ì°¬ ê²½ìš° ì•Œì•„ì„œ ì†ë„ë¥¼ ì¡°ì ˆí•´ì¤€ë‹¤. -&gt; synchronization</li>
    </ul>
  </li>
  <li>Limitations of Pipes
    <ul>
      <li>Half duplex (data flows in one direction)</li>
      <li>Can only be used between processes that have a common ancestor (<strong>Usually used between the parent and child processes</strong>)</li>
      <li>A child process inherits pipes of its parent process</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="íŒŒì´í”„-ì‚¬ìš©ë²•">íŒŒì´í”„ ì‚¬ìš©ë²•</h2>

<ol>
  <li>í•œ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì´í”„ë¥¼ ìƒì„±í•œë‹¤.</li>
  <li>ê·¸ í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</li>
  <li>ì“°ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ì½ê¸°ìš© íŒŒì´í”„ ë””ìŠ¤í¬ë¦½í„°(fd[0])ë¥¼ ë‹«ëŠ”ë‹¤. 
ì½ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ì“°ê¸°ìš© íŒŒì´í”„ ë””ìŠ¤í¬ë¦½í„°(fd[1])ë¥¼ ë‹«ëŠ”ë‹¤.</li>
  <li>write()ì™€ read() ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì‚¬ìš©í•˜ì—¬ íŒŒì´í”„ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•œë‹¤.</li>
  <li>ê° í”„ë¡œì„¸ìŠ¤ê°€ ì‚´ì•„ ìˆëŠ” íŒŒì´í”„ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ë‹«ëŠ”ë‹¤.</li>
</ol>

<ul>
  <li>ìì‹ ìƒì„± í›„</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169850263-e4b5f69f-cc6b-443d-ac6c-8345ed501fad.png" alt="image" /></p>

<ul>
  <li>ìì‹ì—ì„œ ë¶€ëª¨ë¡œ ë³´ë‚´ê¸°</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169850302-d7c6d860-c32f-48ca-b58f-004f6d22d003.png" alt="image" /></p>

<p><br /></p>

<h2 id="pipec">pipe.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define MAXLINE 100
</span><span class="cm">/* íŒŒì´í”„ë¥¼ í†µí•´ ìì‹ì—ì„œ ë¶€ëª¨ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” í”„ë¡œê·¸ë¨ (ìì‹ to ë¶€ëª¨)*/</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">pid</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">message</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">],</span> <span class="n">line</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>

    <span class="n">pipe</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span> <span class="cm">/* íŒŒì´í”„ ìƒì„± */</span>
    
    <span class="k">if</span> <span class="p">((</span><span class="n">pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ìì‹ í”„ë¡œì„¸ìŠ¤ */</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">//ì½ê¸°ëŠ” í•„ìš” ì—†ìœ¼ë‹ˆê¹Œ close</span>
        <span class="n">sprintf</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s">"Hello from PID %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">getpid</span><span class="p">());</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">message</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="cm">/* ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ */</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[%d] %s"</span><span class="p">,</span> <span class="n">getpid</span><span class="p">(),</span> <span class="n">line</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pipe
<span class="o">[</span>3068] Hello from PID 3069
</code></pre></div></div>

<p><br /></p>

<h1 id="122-ì‰˜-íŒŒì´í”„-êµ¬í˜„">12.2 ì‰˜ íŒŒì´í”„ êµ¬í˜„</h1>

<h2 id="í‘œì¤€-ì¶œë ¥ì„-íŒŒì´í”„ë¡œ-ë³´ë‚´ê¸°">í‘œì¤€ ì¶œë ¥ì„ íŒŒì´í”„ë¡œ ë³´ë‚´ê¸°</h2>

<ul>
  <li>ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ í‘œì¤€ì¶œë ¥ì„ íŒŒì´í”„ë¥¼ í†µí•´ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë³´ë‚´ë ¤ë©´ ì–´ë–»ê²Œ í•˜ì—¬ì•¼ í• ê¹Œ?
    <ul>
      <li>ì“°ê¸°ìš© íŒŒì´í”„ ë””ìŠ¤í¬ë¦½í„° fd[1]ì„ í‘œì¤€ì¶œë ¥ì„ ë‚˜íƒ€ë‚´ëŠ” 1ë²ˆ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ì— ë³µì œ</li>
      <li>dup2(fd[1],1)</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169851121-e4d259b5-7873-467e-9c07-bb982fa088ee.png" alt="image" /></p>

<p><br /></p>

<h2 id="stdpipec">stdpipe.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define MAXLINE 100
</span>
<span class="cm">/* íŒŒì´í”„ë¥¼ í†µí•´ ìì‹ì—ì„œ ì‹¤í–‰ë˜ëŠ”ëª…ë ¹ì–´ ì¶œë ¥ì„ ë°›ì•„ í”„ë¦°íŠ¸ */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">line</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>

    <span class="n">pipe</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span> <span class="cm">/* íŒŒì´í”„ ìƒì„± */</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//ìì‹ í”„ë¡œì„¸ìŠ¤</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">dup2</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Hello! pipe</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Bye! pipe</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">((</span><span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">))</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">write</span><span class="p">(</span><span class="n">STDOUT_FILENO</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>stdpipe
ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼
Hello! pipe
Bye! pipe
</code></pre></div></div>

<p>ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ê²°ê³¼ fd[1]ì´ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ fd[0]ë¡œ ê°„ë‹¤.</p>

<p><br /></p>

<h2 id="ëª…ë ¹ì–´-í‘œì¤€ì¶œë ¥ì„-íŒŒì´í”„ë¡œ-ë³´ë‚´ê¸°">ëª…ë ¹ì–´ í‘œì¤€ì¶œë ¥ì„ íŒŒì´í”„ë¡œ ë³´ë‚´ê¸°</h2>

<ul>
  <li>í”„ë¡œê·¸ë¨ pexec1.cëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ í”„ë¡œì„¸ìŠ¤ì—ê²Œ</li>
  <li>ëª…ë ¹ì¤„ ì¸ìˆ˜ë¡œ ë°›ì€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê²Œ í•˜ê³ </li>
  <li>ê·¸ í‘œì¤€ì¶œë ¥ì„ íŒŒì´í”„ë¥¼ í†µí•´ ë°›ì•„ ì¶œë ¥í•œë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="pexec1c">pexec1.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define MAXLINE 100
</span>
<span class="cm">/* íŒŒì´í”„ë¥¼ í†µí•´ ìì‹ì—ì„œ ì‹¤í–‰ë˜ëŠ”ëª…ë ¹ì–´ ì¶œë ¥ì„ ë°›ì•„ í”„ë¦°íŠ¸ */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">line</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>

    <span class="n">pipe</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span> <span class="cm">/* íŒŒì´í”„ ìƒì„± */</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//ìì‹ í”„ë¡œì„¸ìŠ¤</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">dup2</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">execvp</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">((</span><span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">))</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">write</span><span class="p">(</span><span class="n">STDOUT_FILENO</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pexec1 <span class="nb">date
</span>ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼
2012ë…„ 3ì›” 1ì¼ ëª©ìš”ì¼ ì˜¤ì „ 11ì‹œ59ë¶„44ì´ˆ
</code></pre></div></div>

<p>date ëª…ë ¹ì–´(argv[1])ë¥¼ íŒŒì´í”„ì— ì“°ê³  ì´ë¥¼ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ fd[0]ì— ì „ë‹¬ì´ ë˜ë©´ ì´ë¥¼ ì½ì–´ì„œ í™”ë©´ì— ì¶œë ¥í•œë‹¤.</p>

<p>ì´ ë•Œ fd[0]ë¥¼ í†µí•´ ì½ëŠ” ê²ƒì€ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ í‘œì¤€ ì…ë ¥ìœ¼ë¡œ ì…ë ¥ ë°›ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ fd[0]ìœ¼ë¡œ ë°›ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<ul>
  <li>ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” fd[1]ë¡œ ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í‘œì¤€ ì¶œë ¥ìœ¼ë¡œ ì¼ìŒ</li>
</ul>

<p><br /></p>

<h2 id="ì‰˜-íŒŒì´í”„ì•ì—ì™€-ì°¨ì´ì ì„-ì˜-ë³´ì">ì‰˜ íŒŒì´í”„(ì•ì—ì™€ ì°¨ì´ì ì„ ì˜ ë³´ì)</h2>

<ul>
  <li>
    <p>ì‰˜ íŒŒì´í”„ ê¸°ëŠ¥</p>

    <table>
      <tbody>
        <tr>
          <td>[shell] command1</td>
          <td>command2</td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰í•˜ëŠ” command1ì˜ <strong>í‘œì¤€ì¶œë ¥</strong>ì„ íŒŒì´í”„ë¥¼ í†µí•´ì„œ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰í•˜ëŠ” command2ì˜ <strong>í‘œì¤€ì…ë ¥</strong>ìœ¼ë¡œ ì „ë‹¬</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169851629-d4a88e66-8157-4322-bd1f-8b87f538af61.png" alt="image" /></p>

<p><br /></p>

<h2 id="shellpipec">shellpipe.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define READ 0
#define WRITE 1
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">command1</span><span class="p">,</span> <span class="o">*</span><span class="n">command2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    
    <span class="n">printf</span><span class="p">(</span><span class="s">"[shell]"</span><span class="p">);</span>
    <span class="n">fgets</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">str</span><span class="p">),</span><span class="n">stdin</span><span class="p">);</span>
    <span class="n">str</span><span class="p">[</span><span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="sc">'\0'</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">strchr</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="sc">'|'</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// íŒŒì´í”„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°</span>
        <span class="n">command1</span> <span class="o">=</span> <span class="n">strtok</span> <span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="s">"| "</span><span class="p">);</span>
        <span class="n">command2</span> <span class="o">=</span> <span class="n">strtok</span> <span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">"| "</span><span class="p">);</span>
    <span class="p">}</span> 
    <span class="n">pipe</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">fork</span><span class="p">()</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">READ</span><span class="p">]);</span>
        <span class="n">dup2</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">WRITE</span><span class="p">],</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// ì“°ê¸°ìš© íŒŒì´í”„ë¥¼ í‘œì¤€ì¶œë ¥ì— ë³µì œ</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">WRITE</span><span class="p">]);</span>
        <span class="n">execlp</span><span class="p">(</span><span class="n">command1</span><span class="p">,</span> <span class="n">command1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"pipe"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">WRITE</span><span class="p">]);</span>
        <span class="n">dup2</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">READ</span><span class="p">],</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// ì½ê¸°ìš© íŒŒì´í”„ë¥¼ í‘œì¤€ì…ë ¥ì— ë³µì œ</span>
        <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="n">READ</span><span class="p">]);</span>
        <span class="n">execlp</span><span class="p">(</span><span class="n">command2</span><span class="p">,</span> <span class="n">command2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"pipe"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>shellpipe
<span class="o">[</span>shell] <span class="nb">ls</span> | <span class="nb">wc</span>
</code></pre></div></div>

<p>lsê°€ ìì‹ í”„ë¡œì„¸ìŠ¤ì—ì„œ command1ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  wcëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì—ì„œ command2ë¡œ ì‹¤í–‰ëœë‹¤.</p>

<p>wcë¥¼ í‘œì¤€ ì…ë ¥ì„ í†µí•´ ì‹¤í–‰ -&gt; lsë¥¼ í‘œì¤€ ì¶œë ¥ì„ í†µí•´ ì‹¤í–‰</p>

<p><br /></p>

<h1 id="123-íŒŒì´í”„-í•¨ìˆ˜">12.3 íŒŒì´í”„ í•¨ìˆ˜</h1>

<h2 id="popen">popen()</h2>

<ul>
  <li>ìì‹ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ê·¸ ì¶œë ¥(ì…ë ¥)ì„ íŒŒì´í”„ë¥¼ í†µí•´ ë°›ëŠ” ê³¼ì •ì„ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ì •ì˜</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="c1"> //ì—¬ê¸°ì— ì €ì¥ë˜ì–´ ìˆëŠ” í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬</span><span class="cp">
</span><span class="kt">FILE</span> <span class="o">*</span><span class="nf">popen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">command</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>
<span class="c1">//ì„±ê³µí•˜ë©´ íŒŒì´í”„ë¥¼ ìœ„í•œ íŒŒì¼ í¬ì¸í„°ë¥¼ ì‹¤íŒ¨í•˜ë©´ NULLì„ ë¦¬í„´í•œë‹¤.</span>
<span class="kt">int</span> <span class="nf">pclose</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
<span class="c1">//ì„±ê³µí•˜ë©´ command ëª…ë ¹ì–´ì˜ ì¢…ë£Œ ìƒíƒœë¥¼, ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´í•œë‹¤. </span>
</code></pre></div></div>

<ul>
  <li>fp = popen(command, â€œrâ€)
    <ul>
      <li>ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë³´ë‚´ëŠ” ë‚´ìš©ì„ ì½ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ íŒŒì´í”„ ìƒì„±</li>
      <li><img src="https://user-images.githubusercontent.com/79521972/169852162-5165fd95-7826-44de-9579-579a629ed114.png" alt="image" /></li>
    </ul>
  </li>
  <li>fp = popen(command, â€œwâ€);
    <ul>
      <li>ìì‹ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ëª©ì ìœ¼ë¡œ íŒŒì´í”„ë¥¼ ìƒì„±</li>
      <li><img src="https://user-images.githubusercontent.com/79521972/169852224-43bd8a41-653c-44cc-b2f5-fd56d51d4e23.png" alt="image" /></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="pexec2c">pexec2.c</h2>

<p>pexec1.c ì½”ë“œë¡œë¶€í„° ë§ì´ ì¤„ì–´ë“  ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#define MAXLINE 100
</span><span class="cm">/* popen() í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ìì‹ì—ì„œ ì‹¤í–‰ë˜ëŠ” ëª…ë ¹ì–´ ì¶œë ¥ì„ ë°›ì•„ í”„ë¦°íŠ¸ */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">line</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="n">fpin</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">fpin</span> <span class="o">=</span> <span class="n">popen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">"r"</span><span class="p">))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì´í”„ë¡œ ë³´ë‚´ëŠ” ë‚´ìš© ë³´ê¸° ìœ„í•¨</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"popen ì˜¤ë¥˜"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">fgets</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">,</span> <span class="n">fpin</span><span class="p">))</span>
        <span class="n">fputs</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
    <span class="n">pclose</span><span class="p">(</span><span class="n">fpin</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pexec2 <span class="nb">date
</span>ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° ë°›ì€ ê²°ê³¼
2012ë…„ 3ì›” 1ì¼ ëª©ìš”ì¼ ì˜¤ì „ 11ì‹œ 59ë¶„ 44ì´ˆ
</code></pre></div></div>

<p><br /></p>

<h1 id="124-ì´ë¦„-ìˆëŠ”-íŒŒì´í”„">12.4 ì´ë¦„ ìˆëŠ” íŒŒì´í”„</h1>

<p>ì§€ê¸ˆê¹Œì§€ ë°°ì› ë˜ íŒŒì´í”„ë“¤ì€ unnamed pipe, ì¦‰ ì´ë¦„ì´ ì—†ëŠ” íŒŒì´í”„ì˜€ë‹¤.</p>

<ul>
  <li>pipe(fd);</li>
</ul>

<p>ê·¸ ì „ì— íŒŒì´í”„ëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ fdë¥¼ ê·¸ëŒ€ë¡œ ë³µì œí•˜ì—¬ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ì´ë¦„ì„ ëª°ë¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

<h2 id="ì´ë¦„-ìˆëŠ”-íŒŒì´í”„named-pipe">ì´ë¦„ ìˆëŠ” íŒŒì´í”„(named pipe)</h2>

<ul>
  <li>(ì´ë¦„ ì—†ëŠ”) íŒŒì´í”„
    <ul>
      <li>ì´ë¦„ì´ ì—†ìœ¼ë¯€ë¡œ ë¶€ëª¨ ìì‹ê³¼ ê°™ì€ ì„œë¡œ ê´€ë ¨ëœ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì—ë§Œ ì‚¬ìš©ë  ìˆ˜ ìˆì—ˆë‹¤.</li>
    </ul>
  </li>
  <li>ì´ë¦„ ìˆëŠ” íŒŒì´í”„ (named pipe, fifo file)
    <ul>
      <li>ë‹¤ë¥¸ íŒŒì¼ì²˜ëŸ¼ ì´ë¦„ì´ ìˆìœ¼ë©° íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ì— ì¡´ì¬í•œë‹¤.</li>
      <li>ì„œë¡œ ê´€ë ¨ ì—†ëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ë„ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
      <li>IPCë¥¼ ê°€ëŠ¥ì¼€ í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ì´ë¦„-ìˆëŠ”-íŒŒì´í”„ë¥¼-ë§Œë“œëŠ”-ë°©ë²•">ì´ë¦„ ìˆëŠ” íŒŒì´í”„ë¥¼ ë§Œë“œëŠ” ë°©ë²•</h2>

<ul>
  <li>p ì˜µì…˜ê³¼ í•¨ê»˜ mknod ëª…ë ¹ì–´</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">$mknod myPipe p</code></p>

<p><code class="language-plaintext highlighter-rouge">$chmod ug+rw myPipe</code></p>

<ul>
  <li>user group read/write</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">$ls -l myPipe</code></p>

<p><code class="language-plaintext highlighter-rouge">prw-rw-r-- 1 chang faculty 0 4ì›” 11ì¼ 13:03 myPipe //pëŠ” pipeíŒŒì¼ ì„ì„ ëª…ì‹œ</code></p>

<ul>
  <li>mkfifo() ì‹œìŠ¤í…œ í˜¸ì¶œ</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="nf">mkfifo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="n">mode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="c1">//Mode: ì ‘ê·¼ê¶Œí•œ</span>
<span class="c1">//ì´ë¦„ ìˆëŠ” íŒŒì´í”„ë¥¼ ìƒì„±í•œë‹¤. ì„±ê³µí•˜ë©´ 0ì„ ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´í•œë‹¤. </span>
</code></pre></div></div>

<p><br /></p>

<h2 id="npreaderc">npreader.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#define MAXLINE 100
</span><span class="cm">/* ì´ë¦„ ìˆëŠ” íŒŒì´í”„ë¥¼ í†µí•´ ì½ì€ ë‚´ìš©ì„ í”„ë¦°íŠ¸í•œë‹¤. */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    
    <span class="n">unlink</span><span class="p">(</span><span class="s">"myPipe"</span><span class="p">);</span>
    <span class="n">mkfifo</span><span class="p">(</span><span class="s">"myPipe"</span><span class="p">,</span> <span class="mo">0660</span><span class="p">);</span> <span class="c1">//myPipe ìƒì„±, ì ‘ê·¼ ê¶Œí•œ 0660</span>
    <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"myPipe"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span> <span class="c1">// regular fileì²˜ëŸ¼ ì—´ ìˆ˜ ìˆìŒ.</span>
    
    <span class="k">while</span> <span class="p">(</span><span class="n">readLine</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">str</span><span class="p">))</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%s </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">readLine</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">str</span><span class="o">++</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="npwriterc">npwriter.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#define MAXLINE 100
</span><span class="cm">/* ì´ë¦„ ìˆëŠ” íŒŒì´í”„ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤. */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">message</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    
    <span class="n">sprintf</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s">"Hello from PID%d"</span><span class="p">,</span> <span class="n">getpid</span><span class="p">());</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    
    <span class="k">do</span> <span class="p">{</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"myPipe"</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">fd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&amp; npwriter &amp;
<span class="o">[</span>2] 10716
<span class="o">[</span>3] 10717
Hello from PID 10717
Hello from PID 10717
Hello from PID 10717
Hello from PID 10717
</code></pre></div></div>

<p><br /></p>

<h2 id="íŒŒì´í”„ë¥¼-ì´ìš©í•œ-ì¼ëŒ€ì¼-ì±„íŒ…">íŒŒì´í”„ë¥¼ ì´ìš©í•œ ì¼ëŒ€ì¼ ì±„íŒ…</h2>

<ul>
  <li>ì´ í”„ë¡œê·¸ë¨ì€ ì±„íŒ… ì„œë²„ì™€ ì±„íŒ… í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.</li>
  <li>ì±„íŒ… ì„œë²„ì—ì„œ ì±„íŒ… í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ”ë° í•˜ë‚˜ì˜ íŒŒì´í”„ê°€ í•„ìš”í•˜ê³ </li>
  <li>ë°˜ëŒ€ë¡œ ì±„íŒ… í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì±„íŒ… ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ”ë° ë˜ í•˜ë‚˜ì˜ íŒŒì´í”„ê°€ í•„ìš”í•˜ë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="chatserverc">chatserver.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define MAXLINE 256
</span><span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">n</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">msg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">mkfifo</span><span class="p">(</span><span class="s">"./chatfifo1"</span><span class="p">,</span> <span class="mo">0666</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="c1">// named pipe ìƒì„±</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"mkfifo"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">mkfifo</span><span class="p">(</span><span class="s">"./chatfifo2"</span><span class="p">,</span> <span class="mo">0666</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"mkfifo"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// íŒŒì¼ ì´ë¦„ì„ ëª…ì‹œí•˜ëŠ” ì´ìœ ëŠ” ì´ë¦„ìˆëŠ” pipeì´ê¸° ë•Œë¬¸ì´ë‹¤.</span>
    <span class="n">fd1</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"./chatfifo1"</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span><span class="c1">// í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ê²ƒê³¼ ë°˜ëŒ€ê°€ ë˜ì–´ì•¼ ê² ì§€?</span>
    <span class="n">fd2</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"./chatfifo2"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span><span class="c1">// í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ê²ƒê³¼ ë°˜ëŒ€ê°€ ë˜ì–´ì•¼ ê² ì§€?</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fd1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">fd2</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"open"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"* ì„œë²„ ì‹œì‘ </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[ì„œë²„] : "</span><span class="p">);</span>
        <span class="n">fgets</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span><span class="c1">// í‚¤ë³´ë“œ ì…ë ¥</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">write</span><span class="p">(</span><span class="n">fd1</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"write"</span><span class="p">);</span>
            <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd2</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[í´ë¼ì´ì–¸íŠ¸] -&gt; %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="chatclientc">chatclient.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#define MAXLINE 256
</span><span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">n</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">inmsg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    
    <span class="n">fd1</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"./chatfifo1"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span>
    <span class="n">fd2</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"./chatfifo2"</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
    
    <span class="k">if</span><span class="p">(</span><span class="n">fd1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">fd2</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"open"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"* í´ë¼ì´ì–¸íŠ¸ ì‹œì‘ </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd1</span><span class="p">,</span> <span class="n">inmsg</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[ì„œë²„] -&gt; %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">inmsg</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[í´ë¼ì´ì–¸íŠ¸] : "</span><span class="p">);</span>
        <span class="n">fgets</span><span class="p">(</span><span class="n">inmsg</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>
        <span class="n">write</span><span class="p">(</span><span class="n">fd2</span><span class="p">,</span> <span class="n">inmsg</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">inmsg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chatserver
<span class="k">*</span> ì„œë²„ ì‹œì‘
<span class="o">[</span>ì„œë²„] : ì•ˆë…•í•˜ì„¸ìš” í´ë¼ì´ì–¸íŠ¸
<span class="o">[</span>í´ë¼ì´ì–¸íŠ¸] -&gt; ë°˜ê°‘ìŠµë‹ˆë‹¤.ì„œë²„.
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>chatclient
<span class="k">*</span> í´ë¼ì´ì–¸íŠ¸ ì‹œì‘
<span class="o">[</span>ì„œë²„] : ì•ˆë…•í•˜ì„¸ìš” í´ë¼ì´ì–¸íŠ¸
<span class="o">[</span>í´ë¼ì´ì–¸íŠ¸] -&gt; ë°˜ê°‘ìŠµë‹ˆë‹¤.ì„œë²„.
</code></pre></div></div>

<p><br /></p>

<h2 id="í•µì‹¬-ê°œë…">í•µì‹¬ ê°œë…</h2>

<ul>
  <li>íŒŒì´í”„ëŠ” ë°ì´í„°ë¥¼ í•œ ë°©í–¥ìœ¼ë¡œ ë³´ë‚´ëŠ”ë° ì‚¬ìš©ëœë‹¤.</li>
  <li>íŒŒì´í”„ëŠ” ë‘ ê°œì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ê°–ëŠ”ë‹¤. í•˜ë‚˜ëŠ” ì“°ê¸°ìš©ì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì½ê¸°ìš©ì´ë‹¤.</li>
  <li>ì´ë¦„ ìˆëŠ” íŒŒì´í”„ëŠ” íŒŒì¼ì²˜ëŸ¼ íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ì— ì¡´ì¬í•˜ê³  ì´ë¦„ì´ ìˆìœ¼ë©° ì„œë¡œ ê´€ë ¨ ì—†ëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ë„ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
:ET