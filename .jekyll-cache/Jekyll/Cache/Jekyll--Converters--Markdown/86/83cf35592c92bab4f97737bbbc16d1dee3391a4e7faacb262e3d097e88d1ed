I"»Ò<p><br /></p>

<h1 id="130-ë„¤íŠ¸ì›Œí¬-ëª¨ë¸">13.0 ë„¤íŠ¸ì›Œí¬ ëª¨ë¸</h1>

<h2 id="network-model">Network Model</h2>

<ul>
  <li>How is data transferred through network?
    <ul>
      <li><strong>circuit switching</strong>: <span style="color:red">dedicated circuit per call: telephone net </span>
        <ul>
          <li>the whole message is sent from the source to the destination without being divided into packets</li>
          <li>End-end resources reserved for â€œ<strong>call</strong>â€</li>
          <li>QoS ë³´ì¥ : No end-to-end delay
            <ul>
              <li>networkê°€ ì»¤ì§€ë”ë¼ê³  í•­ìƒ end-to-endë¥¼ ë³´ì¥í•œë‹¤.</li>
            </ul>
          </li>
          <li>Call blocking in case of congestion</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>packet-switching</strong>: data sent thru net in discrete â€œchunksâ€
    <ul>
      <li>Store &amp; forward</li>
      <li>each end-end data stream divided into <strong>packets</strong></li>
      <li><strong>ìì› ê³µìœ </strong></li>
      <li>QoS ë³´ì¥ X</li>
      <li>Increaed end-to-end delay</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="circuit-switching">Circuit-switching</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169854256-f8620029-3dac-4ff1-a7fe-c6bcd7489665.png" alt="image" /></p>

<p>íšŒì„ ì„ ì ìœ </p>

<p>waiting ì‹œê°„ ì—†ì´ ë°”ë¡œ ì „ì†¡</p>

<p><br /></p>

<h2 id="packet-switching">Packet-switching</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169854337-f3365e2a-abfa-4e75-8cac-833db40da2e3.png" alt="image" /></p>

<p>waiting time: packetì´ routerì— ì €ì¥ëë‹¤ê°€ ë‹¤ì‹œ ë³´ë‚´ê¸° ì „ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„</p>

<p>ë§¤ packetë§ˆë‹¤ ë‹¤ìŒ routerê°€ ì–´ë”˜ì§€ë¥¼ ì°¾ì•„ì„œ ì´ë™ì„ í•œë‹¤.</p>

<p><br /></p>

<h2 id="internet">Internet</h2>

<ul>
  <li>A network of networks
    <ul>
      <li>ì—¬ëŸ¬ networkë¡œ ì´ë£¨ì–´ì§„ í•˜ë‚˜ì˜ network</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169854408-91111412-3f1b-415a-b465-bab0f7d508c2.png" alt="image" /></p>

<p><br /></p>

<h2 id="osi-7-layer-model">OSI 7 Layer Model</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169854489-324d95c9-24c2-4064-82fd-50e40c8f0f4b.png" alt="image" /></p>

<p><br /></p>

<h2 id="ì¸í„°ë„·-êµ¬ì„±">ì¸í„°ë„· êµ¬ì„±</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169854560-adf0af46-3949-4a0c-b368-c189e1175f4a.png" alt="image" /></p>

<p><br /></p>

<h2 id="tcpip-í”„ë¡œí† ì½œ">TCP/IP í”„ë¡œí† ì½œ</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169854660-c6264ff9-b9f6-4304-841f-e5740fb403b9.png" alt="image" /></p>

<p><br /></p>

<h2 id="designing-applications-for-a-distributed-environment">Designing Applications for a Distributed Environment</h2>

<p>ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜</p>

<ul>
  <li>Programmers who build applications for a distributed environment try to <strong>make distributed application</strong> behave as much as possible like the <strong>non-distributed version</strong> of the program</li>
  <li>Goal of distributed computing is to provide an environment that hides the geographic location of computers and services and makes them appear to be local</li>
  <li>Service <strong>should</strong> be provided with <strong>Concurrency</strong></li>
</ul>

<p><br /></p>

<h2 id="tcpip-í”„ë¡œí† ì½œ-1">TCP/IP í”„ë¡œí† ì½œ</h2>

<ul>
  <li>TCP/IP í”„ë¡œí† ì½œ
    <ul>
      <li>ì¸í„°ë„·ì˜ í•µì‹¬ í”„ë¡œí† ì½œì¸ TCPì™€ IPë¥¼ í¬í•¨í•œ ê°ì¢… í”„ë¡œí† ì½œ</li>
      <li><strong>ìš´ì˜ì²´ì œ</strong>ì—ì„œ êµ¬í˜„ì„ ì œê³µí•˜ë©°, ì¼ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìš´ì˜ì²´ì œê°€ ì œê³µí•˜ëŠ” TCP/IP í”„ë¡œí† ì½œì˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í†µì‹ ì„ ìˆ˜í–‰</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="tcpip-í”„ë¡œí† ì½œ-êµ¬ì¡°">TCP/IP í”„ë¡œí† ì½œ êµ¬ì¡°</h2>

<ul>
  <li>TCP/IP í”„ë¡œí† ì½œ êµ¬ì¡°
    <ul>
      <li>ê³„ì¸µì  êµ¬ì¡°</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169855067-7978daea-0060-41b5-8c93-db836baf029a.png" alt="image" /></p>

<p><br /></p>

<h2 id="tcpip-í”„ë¡œí† ì½œ-êµ¬ì¡°-1">TCP/IP í”„ë¡œí† ì½œ êµ¬ì¡°</h2>

<ul>
  <li><strong>ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ê³„ì¸µ</strong>(network access layer)
    <ul>
      <li>ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•œ ì‹¤ì œì ì¸ ë°ì´í„° ì „ì†¡</li>
      <li>êµ¬ì„± ìš”ì†Œ
        <ul>
          <li>ë„¤íŠ¸ì›Œí¬ í•˜ë“œì›¨ì–´ + ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„</li>
        </ul>
      </li>
      <li>ì£¼ì†Œ ì§€ì • ë°©ì‹
        <ul>
          <li>ë¬¼ë¦¬ ì£¼ì†Œ(physical address) - MAC address</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ì˜ˆ
    <ul>
      <li>ì´ë”ë„·(Ethernet)</li>
    </ul>
  </li>
  <li><strong>ì¸í„°ë„· ê³„ì¸µ</strong>(Internet layer)
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ê³„ì¸µì˜ ë„ì›€ì„ ë°›ì•„, ì „ì†¡ ê³„ì¸µì´ ë‚´ë ¤ ë³´ë‚¸ ë°ì´í„°ë¥¼ ì¢…ë‹¨ ì‹œìŠ¤í…œê¹Œì§€ ì „ë‹¬</li>
      <li>ì‚¬ìš© ì£¼ì†Œ
        <ul>
          <li>IP ì£¼ì†Œ(Internet Protocol address)</li>
        </ul>
      </li>
      <li>ë¼ìš°íŒ…(routing)
        <ul>
          <li>ëª©ì ì§€ê¹Œì§€ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ì¼ë ¨ì˜ ì‘ì—… ë¼ìš°íŒ…ì„ ìœ„í•œ ì •ë³´ íšë“ ë¼ìš°íŒ… ì •ë³´ë¥¼ ê¸°ì´ˆë¡œ ì‹¤ì œ ë°ì´í„° ì „ë‹¬(forward)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>ì „ì†¡ ê³„ì¸µ</strong>(transport layer)
    <ul>
      <li>ìµœì¢…ì ì¸ í†µì‹  ëª©ì ì§€(í”„ë¡œì„¸ìŠ¤)ë¥¼ ì§€ì •í•˜ê³ , ì˜¤ë¥˜ ì—†ì´ ë°ì´í„°ë¥¼ ì „ì†¡</li>
      <li>ì‚¬ìš© ì£¼ì†Œ
        <ul>
          <li>í¬íŠ¸ ë²ˆí˜¸(port number)</li>
        </ul>
      </li>
      <li>ì˜ˆ
        <ul>
          <li>TCP(Transmission Control Protocol)</li>
          <li>UDP(User Datagram Protocol)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ</strong>(application layer)
    <ul>
      <li>ë‹¤ìˆ˜ì˜ ì‘ìš© í”„ë¡œí† ì½œê³¼, ì‘ìš© í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬ê´„</li>
      <li>ì˜ˆ
        <ul>
          <li>Telnet, FTP, HTTP, SMTP ë“±</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="tcpip-í”„ë¡œí† ì½œ-êµ¬ì¡°-2">TCP/IP í”„ë¡œí† ì½œ êµ¬ì¡°</h2>

<ul>
  <li>TCPì™€ UDP</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169855643-9098e98b-e897-4f4b-aef3-87aff2d264d7.png" alt="image" /></p>

<p>ë‘˜ ë‹¤ packet switching</p>

<p><br /></p>

<h2 id="íŒ¨í‚·-ì „ì†¡-ì›ë¦¬">íŒ¨í‚· ì „ì†¡ ì›ë¦¬</h2>

<ul>
  <li>íŒ¨í‚· ì „ì†¡ í˜•íƒœ
    <ul>
      <li>ì†¡ì‹ ì¸¡</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169855889-3c204209-577f-4f99-a936-40919040bb69.png" alt="image" /></p>

<ul>
  <li>ìˆ˜ì‹ ì¸¡</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169855917-2686df25-ab2d-4c75-a2c8-fb178f9fa384.png" alt="image" /></p>

<ul>
  <li>ê³„ì¸µë³„ (peer-to-peer communication)</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169855956-9a1845d2-3263-4196-9bfe-ab40a479b9c1.png" alt="image" /></p>

<ul>
  <li>TCP/IP í”„ë¡œí† ì½œì„ ì´ìš©í•œ íŒ¨í‚· ì „ì†¡</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169856120-39874334-50ab-4c46-a52b-ecf9c3fc09cd.png" alt="image" /></p>

<p>ê°€ìš´ë° ë‘ ë¼ìš°í„°ê°€ ì—°ê²°ëœ ë¶€ë¶„ì´ network</p>

<p><br /></p>

<h2 id="ip-ì£¼ì†Œì™€-í¬íŠ¸-ë²ˆí˜¸">IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸</h2>

<ul>
  <li><strong>IP ì£¼ì†Œ</strong>
    <ul>
      <li>ì¸í„°ë„· ê³„ì¸µì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ</li>
      <li>ì¸í„°ë„·ì— ì¡´ì¬í•˜ëŠ” í˜¸ìŠ¤íŠ¸(ì¢…ë‹¨ ì‹œìŠ¤í…œ, ë¼ìš°í„°)ë¥¼ ìœ ì¼í•˜ê²Œ êµ¬ë³„ í•  ìˆ˜ ìˆëŠ” ì‹ë³„ì</li>
      <li>Software defined <strong>Globally unique address</strong>
        <ul>
          <li>ì „ ì„¸ê³„ì— ê°™ì€ IPì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” í—ˆë½ë˜ì§€ ì•Šì€ ê²ƒ</li>
        </ul>
      </li>
      <li>IPv4ëŠ” 32ë¹„íŠ¸, IPv6ëŠ” 128ë¹„íŠ¸ ì‚¬ìš©</li>
      <li>8ë¹„íŠ¸ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•˜ì—¬ 10ì§„ìˆ˜ë¡œ í‘œê¸°(IPv4)</li>
      <li>ì˜ˆ) 147.46.114.70</li>
    </ul>
  </li>
  <li><strong>í¬íŠ¸ ë²ˆí˜¸</strong>
    <ul>
      <li>ì „ì†¡ê³„ì¸µì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ</li>
      <li>í†µì‹  ì¢…ì°©ì§€(í•˜ë‚˜ í˜¹ì€ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‹ë³„ì</li>
    </ul>
  </li>
  <li>ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ì†ŒëŠ” MAC addressì„</li>
  <li>IP + í¬íŠ¸ ë²ˆí˜¸ -&gt; socket address</li>
</ul>

<p><br /></p>

<ul>
  <li>IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169856319-ebf4ffcc-1518-4ce9-99e8-3d7538a21086.png" alt="image" /></p>

<ul>
  <li>ëª¨ë“  í¬íŠ¸ë“¤ì€ uniqueí•œ ë²ˆí˜¸ë¥¼ í• ë‹¹ ë°›ëŠ”ë‹¤.
    <ul>
      <li>í¬íŠ¸ ë²ˆí˜¸ëŠ” ì–´ë–¤ ì»´í“¨í„° ì•ˆì—ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ê²ƒ</li>
    </ul>
  </li>
  <li>IPì£¼ì†ŒëŠ” host(íŠ¹ì • ì»´í“¨í„°)ë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•œ ë²ˆí˜¸</li>
</ul>

<p><br /></p>

<h1 id="131-ì†Œì¼“">13.1 ì†Œì¼“</h1>

<h2 id="í´ë¼ì´ì–¸íŠ¸-ì„œë²„-ëª¨ë¸">í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸</h2>

<ul>
  <li>ë„¤íŠ¸ì›Œí¬ ì‘ìš© í”„ë¡œê·¸ë¨
    <ul>
      <li>í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.</li>
    </ul>
  </li>
  <li>í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸
    <ul>
      <li>í•˜ë‚˜ì˜ ì„œë²„ í”„ë¡œì„¸ìŠ¤ì™€ ì—¬ëŸ¬ ê°œì˜ í´ë¼ì´ì–¸íŠ¸ë¡œ êµ¬ì„±ëœë‹¤.</li>
      <li>ì„œë²„ëŠ” ì–´ë–¤ ìì›ì„ ê´€ë¦¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•´ ìì› ê´€ë ¨ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169856512-c8f507d2-637a-4ffb-aefe-6b63e0e270bb.png" alt="image" /></p>

<p><br /></p>

<h2 id="communications-in-client-server-systems">Communications in Client-Server Systems</h2>

<ul>
  <li><strong>Sockets</strong> â€“ low level form of communication between distributed processes</li>
  <li>Remote Procedure Calls (RPC)</li>
  <li>Pipes</li>
  <li>Remote Method Invocation (Java)</li>
</ul>

<p><br /></p>

<h2 id="ipc-inter-process-communication">IPC (Inter Process Communication)</h2>

<ul>
  <li>pipes, FIFOs, message queues, semaphores, and shared memory
    <ul>
      <li>allow processes running on the <strong>same machine</strong> to communicate with one another.</li>
    </ul>
  </li>
  <li><strong>socket</strong>
    <ul>
      <li>allows processes running on <strong>different machines</strong> to communicate with one another.</li>
      <li>ë‹¤ë¥¸ ë¨¸ì‹ ì—ì„œ ë™ì‘í•´ë„ ëŒì•„ê°„ë‹¤!</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169856722-e180503b-37c9-449b-9495-b7614f599fbb.png" alt="image" /></p>

<p><br /></p>

<h2 id="socket">Socket</h2>

<ul>
  <li>Socket
    <ul>
      <li>an abstraction of a communication endpoint.</li>
    </ul>
  </li>
  <li>Socket descriptor
    <ul>
      <li>Just as applications would use file descriptors to access a file, applications use <span style="color:red">socket descriptors</span> to access sockets.</li>
      <li>Socket descriptors are implemented <span style="color:red">as file descriptors</span>.
        <ul>
          <li>ì´ë¦„ë§Œ ë‹¤ë¥´ê³  socket descriptorì™€ file descriptorëŠ” ê°™ì€ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŒ</li>
          <li>many of the functions that deal with file descriptors (<strong>read</strong> and <strong>write</strong>) will work with a socket descriptor.</li>
          <li>But, <strong>lseek</strong> doesnâ€™t work with sockets, since sockets donâ€™t support the concept of a file offset.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<ul>
  <li>Socket descriptor and file descriptor <strong>shares a table</strong>.
    <ul>
      <li>3 and 4 are file descriptors.</li>
      <li>5 is a socket descriptor.</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169857068-88ef3c3e-8be5-40ad-9375-ca63cc0a1899.png" alt="image" /></p>

<ul>
  <li>descriptor tableì€ per process structureì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ë¥¸ processê°„ì—ëŠ” ê°™ì€ ê°’ì˜ descriptorë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“ì˜-ê°œë…">ì†Œì¼“ì˜ ê°œë…</h2>

<ul>
  <li>ì„¸ ê°€ì§€ ê´€ì 
    <ul>
      <li>â‘  ë°ì´í„° íƒ€ì…</li>
      <li>â‘¡ í†µì‹  ì¢…ë‹¨ì (communication end-point)</li>
      <li>â‘¢ ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<ul>
  <li><strong>ë°ì´í„° íƒ€ì…</strong>
    <ul>
      <li>ìš´ì˜ì²´ì œê°€ í†µì‹ ì„ ìœ„í•´ ê´€ë¦¬í•˜ëŠ” ë°ì´í„°ë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  <strong>ì¼ì¢…ì˜ í•¸ë“¤</strong>(handle)</li>
      <li>ìƒì„±ê³¼ ì„¤ì • ê³¼ì •ì´ ëë‚˜ë©´ ì´ë¥¼ ì´ìš©í•˜ì—¬ í†µì‹ ê³¼ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ì‘ì—…ì„ í•  ìˆ˜ ìˆëŠ” ê°„í¸í•œ ë°ì´í„° íƒ€ì…</li>
      <li>socket()ì˜ ë¦¬í„´ íƒ€ì…ì€ SOCKETì´ë©° í•´ë‹¹ ë°ì´í„° íƒ€ì…ì¸ ë³€ìˆ˜ sockì„ í†µí•´ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169857338-f3f5859e-105b-47ea-93ee-0b0aa36e2ae7.png" alt="image" /></p>

<ul>
  <li><strong>í†µì‹  ì¢…ë‹¨ì </strong> (communication endpoint)
    <ul>
      <li>ì†Œì¼“ì€ í†µì‹ ì„ ìœ„í•´ í•„ìš”í•œ ì—¬ëŸ¬ ìš”ì†Œì˜ ì§‘í•©ì²´
        <ul>
          <li>ì‚¬ìš©í•  í”„ë¡œí† ì½œ(TCP/IP, UDP/IP ë“±)</li>
          <li>ì†¡ì‹ ì¸¡ IP ì£¼ì†Œ, ì†¡ì‹ ì¸¡ í¬íŠ¸ ë²ˆí˜¸ (socket address)</li>
          <li>ìˆ˜ì‹ ì¸¡ IP ì£¼ì†Œ, ìˆ˜ì‹ ì¸¡ í¬íŠ¸ ë²ˆí˜¸ (socket address)</li>
        </ul>
      </li>
      <li>ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìì‹ ì˜ ì†Œì¼“ì´ ìƒëŒ€ë°©ì˜ ì†Œì¼“ê³¼ ì—°ê²°ëœ ê²ƒìœ¼ë¡œ ìƒê°í•˜ê³  ë°ì´í„°ë¥¼ êµí™˜</li>
    </ul>
  </li>
  <li>í†µì‹  ì¢…ë‹¨ì (contâ€™d)</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169857538-dabec282-284f-4bef-915c-cc3d97b19141.png" alt="image" /></p>

<ul>
  <li>ì‹¤ì œë¡œëŠ” ë°‘ìœ¼ë¡œ TCP/IP layerë¥¼ ê±°ì³ì„œ ì „ì†¡ì´ ë˜ëŠ” ê²ƒ -&gt; í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ to ì„œë²„ ì†Œì¼“
    <ul>
      <li>í¬íŠ¸ë¥¼ í†µí•œ logical ì ì¸ ì†¡ìˆ˜ì‹ </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<ul>
  <li><strong>ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤</strong>
    <ul>
      <li>í†µì‹  ì–‘ë‹¨ì´ ëª¨ë‘ ì†Œì¼“ì„ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ìŒ</li>
      <li>TCP/IP í”„ë¡œí† ì½œ êµ¬ì¡°ì—ì„œ (ì¼ë°˜ì ìœ¼ë¡œ) ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µê³¼ ì „ì†¡ ê³„ì¸µ ì‚¬ì´ì— ìœ„ì¹˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169857740-5c0b1c5f-2ce7-4233-86db-d1882e6ba574.png" alt="image" /></p>

<p><br /></p>

<h2 id="ì†Œì¼“ì˜-ì¢…ë¥˜">ì†Œì¼“ì˜ ì¢…ë¥˜</h2>

<ul>
  <li>ì†Œì¼“
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ ì‚¬ìš©ì ìˆ˜ì¤€ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µ</li>
      <li>ì†Œì¼“ì€ <strong>ì–‘ë°©í–¥</strong> í†µì‹  ë°©ë²•ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì˜ í†µì‹ ì— ë§¤ìš° ì í•©í•˜ë‹¤.</li>
      <li>ìœ ë‹‰ìŠ¤ ì†Œì¼“(AF_UNIX)
        <ul>
          <li><strong>ê°™ì€ í˜¸ìŠ¤íŠ¸</strong> ë‚´ì˜ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì˜ í†µì‹  ë°©ë²•</li>
        </ul>
      </li>
      <li>ì¸í„°ë„· ì†Œì¼“(AF_INET)
        <ul>
          <li>ì¸í„°ë„·ì— ì—°ê²°ëœ ì„œë¡œ <strong>ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸</strong>ì— ìˆëŠ” í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì˜ í†µì‹  ë°©ë²•</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“-ì—°ê²°">ì†Œì¼“ ì—°ê²°</h2>

<ol>
  <li>ì„œë²„ê°€ ì†Œì¼“ì„ ë§Œë“ ë‹¤.</li>
  <li>í´ë¼ì´ì–¸íŠ¸ê°€ (ìê¸° ìì‹ ì˜)ì†Œì¼“ì„ ë§Œë“  í›„ ì„œë²„ì— ì—°ê²° ìš”ì²­ì„ í•œë‹¤.</li>
  <li>ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ìˆ˜ë½í•˜ì—¬ ì†Œì¼“ ì—°ê²°ì´ ì´ë£¨ì–´ì§„ë‹¤.</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/79521972/169857971-74e7f570-4c57-4662-9d4c-76f7ff218bd1.png" alt="image" /></p>

<p><br /></p>

<h2 id="ì†Œì¼“-ì—°ê²°-ê³¼ì •">ì†Œì¼“ ì—°ê²° ê³¼ì •</h2>

<ul>
  <li>ì„œë²„</li>
</ul>

<ol>
  <li>
    <p>socket() í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ ì†Œì¼“ ì„ ë§Œë“¤ê³  ì´ë¦„ì„ ë¶™ì¸ë‹¤.</p>
  </li>
  <li>
    <p>listen() í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ ëŒ€ê¸° íë¥¼ ë§Œë“ ë‹¤.</p>
  </li>
  <li>
    <p>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì—°ê²° ìš”ì²­ì„ accept() í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ ìˆ˜ë½</p>
  </li>
  <li>
    <p>ì†Œì¼“ ì—°ê²°ì´ ì´ë£¨ì–´ì§€ë©´</p>

    <ul>
      <li>ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬
        <ul>
          <li>conquencyí•˜ê²Œ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ ë§ˆë‹¤ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´ ë™ì‹œì— ì—¬ëŸ¬ clientë¥¼ ìƒëŒ€ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤.</li>
        </ul>
      </li>
      <li>
        <p>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ ì²˜ë¦¬</p>
      </li>
      <li>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•œë‹¤.</li>
    </ul>
  </li>
</ol>

<ul>
  <li>í´ë¼ì´ì–¸íŠ¸</li>
</ul>

<ol>
  <li>socket() í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ ì†Œì¼“ ì„ ë§Œë“ ë‹¤.</li>
  <li>connection() í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ ì„œë²„ì— ì—°ê²° ìš”ì²­ì„ í•œë‹¤.</li>
  <li>ì„œë²„ê°€ ì—°ê²° ìš”ì²­ì„ ìˆ˜ë½í•˜ë©´ ì†Œì¼“ ì—°ê²°ì´ ë§Œë“¤ì–´ì§„ë‹¤.</li>
  <li>ì„œë²„ì— ì„œë¹„ìŠ¤ë¥¼ ìš”ì²­í•˜ê³  ì„œë²„ë¡œë¶€í„° ì‘ë‹µì„ ë°›ì•„ ì²˜ë¦¬</li>
</ol>

<p><br /></p>

<h2 id="ì†Œì¼“-ì—°ê²°-ê³¼ì •-1">ì†Œì¼“ ì—°ê²° ê³¼ì •</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169858416-55c32594-0cbd-40fe-96b4-e654ab8b94f6.png" alt="image" /></p>

<p>ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ì—†ëŠ” ì„œë²„ì´ê¸° ë•Œë¬¸ì—(ì„œë²„ í”„ë¡œì„¸ìŠ¤ ìì²´ê°€ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒëŒ€í•˜ê³  ìˆê¸° ë•Œë¬¸) ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦°ë‹¤.</p>

<p><br /></p>

<h2 id="ì†Œì¼“-ë§Œë“¤ê¸°">ì†Œì¼“ ë§Œë“¤ê¸°</h2>

<ul>
  <li>Sets values of the socket structure</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="n">socket</span><span class="p">(</span><span class="kt">int</span> <span class="n">domain</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">protocol</span><span class="p">)</span>
<span class="c1">//ì†Œì¼“ì„ ìƒì„±í•˜ê³  ì†Œì¼“ì„ ìœ„í•œ íŒŒì¼ (ì†Œì¼“) ë””ìŠ¤í¬ë¦½í„°ë¥¼ ë¦¬í„´, ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´</span>
</code></pre></div></div>

<ul>
  <li>ì¸í„°ë„· ì†Œì¼“</li>
</ul>

<p>fd = socket(AF_INET, SOCK_STREAM, DEFAULT _PROTOCOL);</p>

<ul>
  <li>
    <p>ìœ ë‹‰ìŠ¤ ì†Œì¼“</p>

    <p>fd = socket(AF_UNIX, SOCK_STREAM, DEFAULT _PROTOCOL);</p>
  </li>
</ul>

<p><br /></p>

<h2 id="socket-êµ¬ì¡°ì²´">Socket êµ¬ì¡°ì²´</h2>

<p><img src="https://user-images.githubusercontent.com/79521972/169858862-59aed75c-dd79-4279-99dc-2c4e0048f89e.png" alt="image" /></p>

<p>socket()ì— domain type protocol ì„¸ ê°œì˜ parameterë¥¼ ì£¼ê²Œ ë˜ë©´ êµ¬ì¡°ì²´ì˜ ê° ë©¤ë²„(domain, type, protocol)ê°€ í•´ë‹¹ ê°’ìœ¼ë¡œ setting ëœë‹¤.</p>

<p><br /></p>

<h2 id="socket-1">socket()</h2>

<ul>
  <li>domain argument determines the nature of the communication , including the address format.
    <ul>
      <li><strong>AF_INET</strong>: IPv4 Internet domain</li>
      <li>AF_INET6: IPv6 Internet domain</li>
      <li>AF_UNIX: UNIX domain</li>
      <li>AF_UNSPEC: unspecified</li>
    </ul>
  </li>
  <li>type argument determines the type of the socket, which further determines the <strong>communication characteristics</strong>.
    <ul>
      <li><strong>SOCK_DGRAM</strong>(UDP): connectionless, unreliable, datagram</li>
      <li><strong>SOCK_STREAM</strong>(TCP): connection-oriented, reliable, stream</li>
      <li>SOCK_RAW: Raw socket</li>
    </ul>
  </li>
  <li>protocol argument selects the default protocol for the given domain and socket type.
    <ul>
      <li>TCP (Transmission Control Protocol):
        <ul>
          <li>SOCK_STREAM in AF_INET domain</li>
        </ul>
      </li>
      <li>UDP (User Datagram Protocol):
        <ul>
          <li>SOCK_DGRAM in AF_INET domain</li>
        </ul>
      </li>
      <li><strong>Usually, zero is used</strong>.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“-ìƒì„±">ì†Œì¼“ ìƒì„±</h2>

<ul>
  <li>ì†Œì¼“ íƒ€ì…
    <ul>
      <li>ì‚¬ìš©í•  í”„ë¡œí† ì½œì˜ íŠ¹ì„±</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169859145-d06e1cd1-ba05-4a69-800b-cdbe7062335b.png" alt="image" /></p>

<ul>
  <li>ì˜ˆ) TCPì™€ UDP í”„ë¡œí† ì½œ ì„¤ì •(1)</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169859192-e62bbb7b-41b6-4875-96db-5e2f9162caa9.png" alt="image" /></p>

<p><br /></p>

<h2 id="socket-2">socket()</h2>

<ul>
  <li>example</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sd1</span><span class="p">,</span> <span class="n">sd2</span><span class="p">;</span>
    
    <span class="n">fd1</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"/etc/passwd"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"/etc/passwd's file descriptor = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">fd1</span><span class="p">);</span>
    
    <span class="n">sd1</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">PF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"stream socket descriptor = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sd1</span><span class="p">);</span> 
    
    <span class="n">sd2</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">PF_INET</span><span class="p">,</span> <span class="n">SOCK_DGRAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"datagram socket descriptor = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sd2</span><span class="p">);</span>
    
    <span class="n">fd2</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"/etc/hosts"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"/etc/hosts's file descriptor = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">fd2</span><span class="p">);</span>
    
    <span class="n">close</span><span class="p">(</span><span class="n">fd2</span><span class="p">)</span> <span class="p">;</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd1</span><span class="p">)</span> <span class="p">;</span>
    <span class="n">close</span><span class="p">(</span><span class="n">sd2</span><span class="p">)</span> <span class="p">;</span>
    <span class="n">close</span><span class="p">(</span><span class="n">sd1</span><span class="p">)</span> <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ì‹¤í–‰</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$gcc</span> <span class="nt">-o</span> open_socket open_socket.c <span class="nt">-lsocket</span>
<span class="nv">$.</span>/open_socket
/etc/passwd<span class="s1">'s file descriptor = 3
stream socket descriptor = 4
datagram socket descriptor = 5
/etc/hosts'</span>s file descriptor <span class="o">=</span> 6
<span class="err">$</span>
</code></pre></div></div>

<p>ê°™ì€ tableì„ ê³µìœ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì˜ˆì œ</p>

<p><br /></p>

<h2 id="socket-address">Socket address</h2>

<ul>
  <li>Overall structure including socket</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169859449-5e41be4b-ccdd-4e93-b6fa-2d7fdb0cfece.png" alt="image" /></p>

<p>ì‘ìš© í”„ë¡œì„¸ìŠ¤ì—ì„œ ì†Œì¼“ í˜¹ì€ íŒŒì¼ì„ ì—´ë©´ ì†Œì¼“ì€ communication endpointì´ê¸° ë•Œë¬¸ì— ì‘ìš© í”„ë¡œê·¸ë¨ì— ë¶™ì–´ ìˆëŠ”ë°</p>

<p>ë°ì´í„°ê°€ ë„¤íŠ¸ì›ì„ íƒ€ê³  ë“¤ì–´ì™”ì„ ë•Œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ì— ì „ë‹¬í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ í¬íŠ¸ ë²ˆí˜¸</p>

<p><br /></p>

<h2 id="tcp-ì„œë²„í´ë¼ì´ì–¸íŠ¸-ë¶„ì„-22">TCP ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ë¶„ì„ (2/2)</h2>

<ul>
  <li>ì†Œì¼“ ë°ì´í„° êµ¬ì¡°ì²´</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169859546-059c520c-582f-4a97-97fe-2b8502907300.png" alt="image" /></p>

<p><br /></p>

<h2 id="ì†Œì¼“-ì£¼ì†Œ-êµ¬ì¡°ì²´-ì •ì˜">ì†Œì¼“ ì£¼ì†Œ êµ¬ì¡°ì²´ ì •ì˜</h2>

<ul>
  <li>ì†Œì¼“ ì£¼ì†Œ êµ¬ì¡°ì²´(socket address structures)
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë¨ì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ì£¼ì†Œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” <strong>êµ¬ì¡°ì²´</strong>ë¡œ, ë‹¤ì–‘í•œ ì†Œì¼“ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì‚¬ìš©</li>
      <li>ì£¼ì†Œ ì²´ê³„ì— ë”°ë¼ <strong>ë‹¤ì–‘í•œ í˜•íƒœ</strong>ê°€ ì¡´ì¬</li>
      <li>ì˜ˆ) TCP/IP -&gt; SOCKADDR_IN(Internet), IrDA -&gt; SOCKADDR_IRDA</li>
      <li>ê¸°ë³¸í˜•ì€ SOCKADDR êµ¬ì¡°ì²´ì„</li>
    </ul>
  </li>
  <li>SOCKADDR êµ¬ì¡°ì²´ (Generic socket address structure)</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span><span class="k">struct</span> <span class="n">sockaddr</span> <span class="p">{</span>
    <span class="n">u_short</span> <span class="n">sa_family</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">sa_data</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">};</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="n">SOCKADDR</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>sa_family
    <ul>
      <li><strong>ì£¼ì†Œ ì²´ê³„</strong>ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒìˆ˜ê°’</li>
      <li>ì˜ˆ) TCP/IP í”„ë¡œí† ì½œ -&gt; AF_INET</li>
    </ul>
  </li>
  <li>sa_data
    <ul>
      <li>í•´ë‹¹ ì£¼ì†Œ ì²´ê³„ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ ì •ë³´ ì˜ˆ) TCP/IP í”„ë¡œí† ì½œ</li>
      <li>IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“ì—-ì´ë¦„ì£¼ì†Œ-ì£¼ê¸°">ì†Œì¼“ì— ì´ë¦„(ì£¼ì†Œ) ì£¼ê¸°</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">bind</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span><span class="o">*</span> <span class="n">address</span><span class="p">,</span> <span class="kt">int</span> <span class="n">addressLen</span><span class="p">)</span>
<span class="c1">//ì†Œì¼“ì— ëŒ€í•œ ì´ë¦„ ë°”ì¸ë”©ì´ ì„±ê³µí•˜ë©´ 0ì„ ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´í•œë‹¤.</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì†Œì¼“ì— ì£¼ì†Œë¥¼ ë¶€ì—¬í•˜ëŠ” ê°œë…</p>
  </li>
  <li>associate an address with a socket.</li>
  <li>ì„œë²„ì˜ ì§€ì—­ IP ì£¼ì†Œì™€ ì§€ì—­ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ê²°ì •(ì´ˆê¸°í™”)</li>
  <li>For a <strong>server</strong>, we need to associate a <strong>well-known address</strong> with the serverâ€™s socket on which client requests will arrive.
    <ul>
      <li>why well-known? -&gt; ëˆ„êµ¬ë‚˜ ë‹¤ ì•Œì•„ì•¼ í•˜ëŠ” ì£¼ì†Œì´ê¸° ë•Œë¬¸ì— (ê·¸ë˜ì•¼ í´ë¼ì´ì–¸íŠ¸ ì„œë²„ ëª¨ë¸ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë¹„ìŠ¤ ìš”ì²­ì„ í•˜ë©´ ì„œë²„ì˜ socket addressë¥¼ ëª¨ë¥´ë©´ ì„œë¹„ìŠ¤ ìš”ì²­ì„ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸)</li>
    </ul>
  </li>
  <li>For client, we can let the system choose a default address.
    <ul>
      <li>-&gt; bind() is not used in client side.</li>
    </ul>
  </li>
  <li>
    <p>len is the size of socket address</p>
  </li>
  <li>ìœ ë‹‰ìŠ¤ ì†Œì¼“ ì´ë¦„</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">sockaddr_un</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sun_family</span><span class="p">;</span> 	<span class="c1">// AF_UNIX</span>
    <span class="kt">char</span> <span class="n">sun_path</span><span class="p">[</span><span class="mi">108</span><span class="p">];</span> 		<span class="c1">// ì†Œì¼“ ì´ë¦„</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="ì†Œì¼“ì—-ì´ë¦„ì£¼ì†Œ-ì£¼ê¸°-1">ì†Œì¼“ì— ì´ë¦„(ì£¼ì†Œ) ì£¼ê¸°</h2>

<ul>
  <li>ì¸í„°ë„· ì†Œì¼“ ì´ë¦„</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">in_addr</span> <span class="p">{</span>
    <span class="n">in_addr_t</span> <span class="n">s_addr</span><span class="p">;</span> <span class="cm">/* IPv4 address */</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">sockaddr_in</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sin_family</span><span class="p">;</span> <span class="c1">// AF_INET</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sin_port</span><span class="p">;</span> <span class="c1">// ì¸í„°ë„· ì†Œì¼“ì˜ í¬íŠ¸ ë²ˆí˜¸</span>
    <span class="k">struct</span> <span class="n">in_addr</span> <span class="n">sin_addr</span><span class="p">;</span> <span class="c1">// 32-bit IP ì£¼ì†Œ</span>
    <span class="kt">char</span> <span class="n">sin_zero</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span> <span class="c1">// ì‚¬ìš© ì•ˆ í•¨</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>sockaddr êµ¬ì¡°ì²´ëŠ” IP address, port number ë“±ì„ ì§ì ‘ ì“°ê±°ë‚˜ ì½ê¸°ê°€ ë¶ˆí¸í•¨
    <ul>
      <li>í•„ë“œê°€ êµ¬ë¶„ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸(IP+port number)</li>
    </ul>
  </li>
  <li>sockaddr êµ¬ì¡°ì²´ ëŒ€ì‹  4 ë°”ì´íŠ¸ì˜ IP addressì™€ 2 ë°”ì´íŠ¸ì˜ port ë²ˆí˜¸ë¥¼ êµ¬ë¶„í•˜ì—¬ ì§€ì •í•  ìˆ˜ ìˆëŠ” ì¸í„°ë„· ì „ìš© ì†Œì¼“ì£¼ì†Œ êµ¬ì¡°ì²´ì¸ <strong>sockaddr_in</strong>ì„ <strong>ì£¼ë¡œ ì‚¬ìš©í•¨</strong></li>
</ul>

<p><br /></p>

<h2 id="socket-address-1">Socket address</h2>

<ul>
  <li>Socket address structure
    <ul>
      <li>sockaddr_inì€ sockaddr êµ¬ì¡°ì²´ì˜ ë°ì´í„°ë¥¼ internet protocolì—ì„œ ì‚¬ìš© í•˜ê¸°ì— ì í•©í•˜ë„ë¡ ìˆ˜ì •í•œ ê²ƒì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169860271-a79ff223-f03c-4b6b-a74c-f607c2fce177.png" alt="image" /></p>

<p>sockaddr_inì´ ì‚¬ìš©í•˜ê¸° í›¨ì”¬ ë” í¸í•¨</p>

<p><br /></p>

<h2 id="tcp-socket-programming">TCP Socket programming</h2>

<ul>
  <li>socket programmingâ€™s basic procedure</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169860338-9fe26c12-60b2-4570-b1ca-fae94163528b.png" alt="image" /></p>

<p><br /></p>

<h2 id="udp-socket-programming">UDP Socket programming</h2>

<ul>
  <li>UDP ì„œë²„/í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/79521972/169860392-ccb3f220-f81c-432a-8cc8-6984363c80dc.png" alt="image" /></p>

<p>serverì™€ clientê°€ socketì„ ìƒì„±í•˜ëŠ” ê²ƒê¹Œì§€ëŠ” TCPì™€ ê°™ì€ë°</p>

<p>ì„œë²„ ì¸¡ì˜ accept(), listen()ì™€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì˜ connect()ê°€ ì—†ì–´ì¡Œë‹¤.</p>

<p>ì´ëŠ” UDPëŠ” ì—°ê²° ì„¤ì •ì´ë¼ëŠ” ê²ƒì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸.</p>

<ul>
  <li>UDPëŠ” accept(), listen(), connect()ê°€ í•„ìš” ì—†ìŒ</li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“-í-ìƒì„±">ì†Œì¼“ í ìƒì„±</h2>

<ul>
  <li>listen() ì‹œìŠ¤í…œ í˜¸ì¶œ
    <ul>
      <li>ì†Œì¼“ê³¼ ê²°í•©ëœ TCP í¬íŠ¸ ìƒíƒœë¥¼ LISTENINGìœ¼ë¡œ ë³€ê²½</li>
      <li>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦°ë‹¤.</li>
      <li>ì—°ê²° ìš”ì²­ ëŒ€ê¸° íì˜ ê¸¸ì´ë¥¼ ì •í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">listen</span><span class="p">(</span><span class="kt">int</span> <span class="n">socketfd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">queueLength</span><span class="p">)</span>
<span class="c1">//spcketfdì— ëŒ€í•œ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦°ë‹¤. ì„±ê³µí•˜ë©´ 0ì„ ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´</span>
</code></pre></div></div>

<ul>
  <li>A <strong>server</strong> announces that it is willing to accept connect requests.</li>
  <li><strong>queueLength</strong> : maximum number of pending connections on a socket
    <ul>
      <li>ì—°ê²° ì„¤ì •ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ìš”ì²­ì˜ ìµœëŒ€ ê°œìˆ˜</li>
    </ul>
  </li>
  <li>backlog specifies how many connection requests can be queued. (<strong>queue size</strong>)</li>
  <li>listen(serverFd, 5);</li>
</ul>

<p><br /></p>

<h2 id="ì†Œì¼“ì—-ì—°ê²°-ìš”ì²­">ì†Œì¼“ì— ì—°ê²° ìš”ì²­</h2>

<ul>
  <li>connect() ì‹œìŠ¤í…œ í˜¸ì¶œ
    <ul>
      <li>ì„œë²„ì—ê²Œ ì ‘ì†í•˜ì—¬ TCP í”„ë¡œí† ì½œ ìˆ˜ì¤€ì˜ ì—°ê²° ì„¤ì •</li>
      <li>í´ë¼ì´ì–¸íŠ¸ ì¸¡ì˜ Local IP, port ë²ˆí˜¸ ì„¤ì •</li>
      <li>fdê°€ ë‚˜íƒ€ë‚´ëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ê³¼ addressê°€ ë‚˜íƒ€ë‚´ëŠ” ì„œë²„ ì†Œì¼“ê³¼ì˜ ì—°ê²°ì„ ìš”ì²­í•œë‹¤.</li>
      <li>ì„±ê³µí•˜ë©´ fdë¥¼ ì„œë²„ ì†Œì¼“ê³¼ì˜ í†µì‹ ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">connect</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span><span class="o">*</span> <span class="n">address</span><span class="p">,</span> <span class="kt">int</span> <span class="n">addressLen</span><span class="p">)</span>
<span class="c1">//ì„±ê³µí•˜ë©´ 0ì„ ì‹¤íŒ¨í•˜ë©´ -1ë¥¼ ë¦¬í„´í•œë‹¤.</span>
</code></pre></div></div>

<ul>
  <li>Client requests a connection to server
    <ul>
      <li>Before exchanging data, we need to create a connection between the socket of client and server.</li>
      <li>addrress is <strong>the address of the server</strong>.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ì—°ê²°-ìš”ì²­-ìˆ˜ë½">ì—°ê²° ìš”ì²­ ìˆ˜ë½</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">accept</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span><span class="o">*</span> <span class="n">address</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">addressLen</span><span class="p">)</span>
<span class="c1">//ì„±ê³µí•˜ë©´ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ ë³µì‚¬ë³¸ ì†Œì¼“ì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°, ì‹¤íŒ¨í•˜ë©´ -1ì„ ë¦¬í„´</span>
</code></pre></div></div>

<ul>
  <li>ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ìƒˆë¡œìš´ ì†Œì¼“ì„ ìƒì„±í•˜ì—¬ ë¦¬í„´</li>
  <li>ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì˜ IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì•Œë ¤ì¤Œ</li>
  <li>ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ì—°ê²°ìš”ì²­ì„ ìˆ˜ë½í•˜ëŠ” ë‚´ë¶€ ê³¼ì •</li>
  <li>ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ì¤€ë¹„ ì™„ë£Œ</li>
</ul>

<ol>
  <li>ì„œë²„ëŠ” fdê°€ ë‚˜íƒ€ë‚´ëŠ” ì„œë²„ ì†Œì¼“ì„ ê²½ì²­í•˜ê³ </li>
  <li>í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì´ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.</li>
  <li><mark>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì—°ê²° ìš”ì²­ì´ ì˜¤ë©´ ì›ë˜ ì„œë²„ ì†Œì¼“ê³¼ ê°™ì€ ë³µì‚¬ë³¸ ì†Œì¼“ì„ ë§Œë“¤ì–´ </mark>ì´ <strong>ë³µì‚¬ë³¸ ì†Œì¼“</strong>ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì„ ì—°ê²°</li>
  <li>ì—°ê²°ì´ ì´ë£¨ì–´ì§€ë©´ addressëŠ” <strong>í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ì£¼ì†Œë¡œ ì„¸íŒ…</strong>ë˜ê³  addressLenëŠ” ê·¸ í¬ê¸°ë¡œ ì„¸íŒ…</li>
  <li><strong>ìƒˆë¡œ ë§Œë“¤ì–´ì§„ ë³µì‚¬ë³¸ ì†Œì¼“ì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ ë¦¬í„´</strong></li>
</ol>

<p><br /></p>

<h2 id="send">send()</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span>
<span class="kt">ssize_t</span> <span class="nf">send</span><span class="p">(</span><span class="kt">int</span> <span class="n">sockfd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nbytes</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="c1">//Returns: number of bytes sent if OK, -1 on error </span>
</code></pre></div></div>

<ul>
  <li>Send data to other process.
    <ul>
      <li>is <strong>similar</strong> to <strong>write</strong>, but</li>
      <li>allows us to specify flags to change how the data we want to transmit is treated
        <ul>
          <li>MSG_DONTROUTE, MSG_DONTWAIT, MSG_EOR, MSG_OOB</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="receive">receive()</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span>
<span class="kt">ssize_t</span> <span class="nf">recv</span><span class="p">(</span><span class="kt">int</span> <span class="n">sockfd</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nbytes</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="c1">//Returns: length of message in bytes,0 if no messages are available and peer has done an orderly shutdown, or -1 on error </span>
</code></pre></div></div>

<ul>
  <li>Receive data from other process.
    <ul>
      <li>is <strong>similar</strong> to <strong>read</strong>, but</li>
      <li>allows us to specify some options to control how we receive the data.
        <ul>
          <li>MSG_OOB, MSG_PEEK, MSG_TRUNC, MSG_WAITALL</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="exëŒ€ë¬¸ì-ë³€í™˜-ì„œë²„">EX)ëŒ€ë¬¸ì ë³€í™˜ ì„œë²„</h2>

<p>ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ˆ</p>

<ul>
  <li>ì´ í”„ë¡œê·¸ë¨
    <ul>
      <li>ì…ë ¥ë°›ì€ ë¬¸ìì—´ì„ ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•œë‹¤.</li>
      <li>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¡œ êµ¬ì„±ëœë‹¤.</li>
    </ul>
  </li>
  <li>ì„œë²„
    <ul>
      <li>ì†Œì¼“ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë¬¸ìì—´ì„ ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ì—¬ ì†Œì¼“ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì— ë‹¤ì‹œ ë³´ë‚¸ë‹¤.</li>
    </ul>
  </li>
  <li>í´ë¼ì´ì–¸íŠ¸
    <ul>
      <li>í‘œì¤€ì…ë ¥ìœ¼ë¡œë¶€í„° ë¬¸ìì—´ì„ ì…ë ¥ë°›ì•„</li>
      <li>ì´ë¥¼ ì†Œì¼“ì„ í†µí•´ ì„œë²„ì— ë³´ë‚¸ í›„ì—</li>
      <li>ëŒ€ë¬¸ìë¡œ ë³€í™˜ëœ ë¬¸ìì—´ì„ ë‹¤ì‹œ ë°›ì•„ í‘œì¤€ì¶œë ¥ì— ì¶œë ¥</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="cserverc">cserver.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;signal.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/un.h&gt;</span><span class="cp">
#define DEFAULT_PROTOCOL 0
#define MAXLINE 100
</span><span class="cm">/* ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ëŠ” ì„œë²„ í”„ë¡œê·¸ë¨ */</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">listenfd</span><span class="p">,</span> <span class="n">connfd</span><span class="p">,</span> <span class="n">clientlen</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">inmsg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">],</span> <span class="n">outmsg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    <span class="k">struct</span> <span class="n">sockaddr_un</span> <span class="n">serverUNIXaddr</span><span class="p">,</span> <span class="n">clientUNIXaddr</span><span class="p">;</span> <span class="c1">//UNIX ì†Œì¼“ êµ¬ì¡°ì²´</span>

    <span class="n">signal</span><span class="p">(</span><span class="n">SIGCHLD</span><span class="p">,</span> <span class="n">SIG_IGN</span><span class="p">);</span>
    <span class="n">clientlen</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">clientUNIXaddr</span><span class="p">);</span>

    <span class="n">listenfd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">DEFAULT_PROTOCOL</span><span class="p">);</span>
    <span class="n">serverUNIXaddr</span><span class="p">.</span><span class="n">sun_family</span> <span class="o">=</span> <span class="n">AF_UNIX</span><span class="p">;</span> <span class="c1">//ì†Œì¼“ íƒ€ì… ì§€ì •</span>
    
    <span class="n">strcpy</span><span class="p">(</span><span class="n">serverUNIXaddr</span><span class="p">.</span><span class="n">sun_path</span><span class="p">,</span> <span class="s">"convert"</span><span class="p">);</span><span class="c1">//ì†Œì¼“ì˜ ì´ë¦„ ì§€ì • -&gt; convert</span>
    <span class="n">unlink</span><span class="p">(</span><span class="s">"convert"</span><span class="p">);</span> <span class="c1">//ì›¹ì„œë²„ì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ì„ ì‚­ì œí•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤</span>
    <span class="n">bind</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">serverUNIXaddr</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">serverUNIXaddr</span><span class="p">));</span>

    <span class="n">listen</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span><span class="c1">//ì´ 5ê°œì˜ ì—°ê²° ìš”ì²­ê¹Œì§€ ë°›ì„ ìˆ˜ ìˆë‹¤, í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦°ë‹¤.</span>

    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ì†Œì¼“ ì—°ê²° ìš”ì²­ ìˆ˜ë½ */</span>
        <span class="n">connfd</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientUNIXaddr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientlen</span><span class="p">);</span><span class="c1">//í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì£¼ì†Œ ë°›ìŒ</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fork</span> <span class="p">(</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//ë³µì‚¬ë³¸ ì†Œì¼“ ë§Œë“¤ê¸°</span>
            <span class="cm">/* ì†Œì¼“ìœ¼ë¡œë¶€í„° í•œ ì¤„ì„ ì½ì–´ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ì—¬ ë³´ëƒ„ */</span>
            <span class="n">readLine</span><span class="p">(</span><span class="n">connfd</span><span class="p">,</span> <span class="n">inmsg</span><span class="p">);</span> <span class="c1">//connfdë¡œ ë°›ì€ ë¬¸ìì—´ inmsgì— ë³µì‚¬</span>
            <span class="n">toUpper</span><span class="p">(</span><span class="n">inmsg</span><span class="p">,</span> <span class="n">outmsg</span><span class="p">);</span> <span class="c1">//ê²°ê³¼ -&gt; outmsg</span>
            <span class="n">write</span><span class="p">(</span><span class="n">connfd</span><span class="p">,</span> <span class="n">outmsg</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">outmsg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// connfdë¡œ ë‚´ë³´ë‚´ê¸°</span>
            <span class="n">close</span><span class="p">(</span><span class="n">connfd</span><span class="p">);</span>
            <span class="n">exit</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="n">close</span><span class="p">(</span><span class="n">connfd</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/* ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜ */</span>
<span class="n">toUpper</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">in</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">out</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">strlen</span><span class="p">(</span><span class="n">in</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">islower</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">out</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="k">else</span> <span class="n">out</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">in</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">out</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* í•œ ì¤„ ì½ê¸° */</span>
<span class="n">readLine</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">str</span><span class="o">++</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="k">return</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> 
</code></pre></div></div>

<p><br /></p>

<h2 id="cclientc">cclient.c</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;signal.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/un.h&gt;</span><span class="cp">
#define DEFAULT_PROTOCOL 0
#define MAXLINE 100
</span>
<span class="cm">/* ì†Œë¬¸ì-ëŒ€ë¬¸ì ë³€í™˜: í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ */</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">clientfd</span><span class="p">,</span> <span class="n">result</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">inmsg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">],</span> <span class="n">outmsg</span><span class="p">[</span><span class="n">MAXLINE</span><span class="p">];</span>
    <span class="k">struct</span> <span class="n">sockaddr_un</span> <span class="n">serverUNIXaddr</span><span class="p">;</span>

    <span class="n">clientfd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">DEFAULT_PROTOCOL</span><span class="p">);</span>
    <span class="n">serverUNIXaddr</span><span class="p">.</span><span class="n">sun_family</span> <span class="o">=</span> <span class="n">AF_UNIX</span><span class="p">;</span>
    <span class="n">strcpy</span><span class="p">(</span><span class="n">serverUNIXaddr</span><span class="p">.</span><span class="n">sun_path</span><span class="p">,</span> <span class="s">"convert"</span><span class="p">)</span>
        
        <span class="k">do</span> <span class="p">{</span> <span class="cm">/* ì—°ê²° ìš”ì²­ */</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="n">clientfd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">serverUNIXaddr</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">serverUNIXaddr</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"ë³€í™˜í•  ë¬¸ìì—´ ì…ë ¥:</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">fgets</span><span class="p">(</span><span class="n">inmsg</span><span class="p">,</span> <span class="n">MAXLINE</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="n">clientfd</span><span class="p">,</span><span class="n">inmsg</span><span class="p">,</span><span class="n">strlen</span><span class="p">(</span><span class="n">inmsg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// ë³€í™˜í•  ë¬¸ìì—´ ë³´ë‚´ê¸°(clientfd ì†Œì¼“ì„ í†µí•´ì„œ)</span>

    <span class="cm">/* ì†Œì¼“ìœ¼ë¡œë¶€í„° ë³€í™˜ëœ ë¬¸ìì—´ì„ í•œ ì¤„ ì½ì–´ì„œ í”„ë¦°íŠ¸ */</span>
    <span class="n">readLine</span><span class="p">(</span><span class="n">clientfd</span><span class="p">,</span><span class="n">outmsg</span><span class="p">);</span> <span class="c1">// clientfdë¥¼ í†µí•´ ë³€í™˜ëœ ë¬¸ìì—´ì„ ë°›ì•„ì„œ outmsgì— ë„£ìŒ</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s --&gt; </span><span class="se">\n</span><span class="s">%s"</span><span class="p">,</span> <span class="n">inmsg</span><span class="p">,</span> <span class="n">outmsg</span><span class="p">);</span>
    <span class="n">close</span><span class="p">(</span><span class="n">clientfd</span><span class="p">);</span> 
    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> 
<span class="p">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cserver &amp;
<span class="o">[</span>1] 32014
<span class="nv">$ </span>client
ë³€í™˜í•  ë¬¸ìì—´ ì…ë ¥
Hello socket stream //ì‚¬ìš©ì ì…ë ¥ ë¶€ë¶„
Hello socket stream <span class="nt">--</span><span class="o">&gt;</span>
HELLO SOCKET STREAM
</code></pre></div></div>

:ET