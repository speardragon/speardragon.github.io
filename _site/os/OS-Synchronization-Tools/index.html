<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[OS] Synchronization Tools | speardragon note</title>
<meta name="description" content="[toc]">


  <meta name="author" content="Kang Chang Ryong">
  
  <meta property="article:author" content="Kang Chang Ryong">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="speardragon note">
<meta property="og:title" content="[OS] Synchronization Tools">
<meta property="og:url" content="http://localhost:4000/os/OS-Synchronization-Tools/">


  <meta property="og:description" content="[toc]">







  <meta property="article:published_time" content="2022-09-27T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/os/OS-Synchronization-Tools/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Kang Chang Ryong",
      "url": "http://localhost:4000/"
    
  }
</script>






  <meta name="naver-site-verification" content="cd7b9197fb220245e1da6b83be8b0feaf0434524">


<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="speardragon note Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon.ico/apple-icon-57x57.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon.ico/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="/assets/favicon.ico/mstile-150x150.png">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/image_initial.jpg" alt="speardragon note"></a>
        
        <a class="site-title" href="/">
          speardragon note
          <span class="site-subtitle">Believe in yourself</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tag</a>
            </li><li class="masthead__menu-item">
              <a href="/search/">Search</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">ÌÜ†Í∏Ä Î©îÎâ¥</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#os" itemprop="item"><span itemprop="name">Os</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">[OS] Synchronization Tools</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="http://localhost:4000/">
        <img src="/assets/images/image_face.png" alt="Kang Chang Ryong" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Kang Chang Ryong</a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">ÌåîÎ°úÏö∞</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Republic of Korea, Uijeongbu</span>
        </li>
      

      
        
          
            <li><a href="mailto:rkdckdfyyd@naver.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://speardragon.github.io" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/speardragon" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  

  
    <!--Ï†ÑÏ≤¥ Í∏Ä ÏàòÎ•º ÏÑ∏Í∏∞ ÏúÑÌïú Ïó∞ÏÇ∞. sum Î≥ÄÏàòÏóê Ï†ÑÏ≤¥ Í∏Ä Ïàò Ï†ÄÏû•-->



<nav class="nav__list">
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">ÌÜ†Í∏Ä Î©îÎâ¥</label>
  <ul class="nav__items" id="category_tag_menu">
      <!--Ï†ÑÏ≤¥ Í∏Ä Ïàò-->
      <li>
            üìÇ <span style="font-family:'Cafe24Oneprettynight';">Ï†ÑÏ≤¥ Í∏Ä</style> <span style="font-family:'Coming Soon';">(146)</style> <span style="font-family:'Cafe24Oneprettynight';"></style> 
      </li>

      <li>
      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: Language-------------------------------------->
        <!--span ÌÉúÍ∑∏Î°ú Ïπ¥ÌÖåÍ≥†Î¶¨Îì§ÏùÑ ÌÅ¨Í≤å Î∂ÑÎ•ò ex) C/C++/C#-->
        <span class="nav__sub-title">üåé Language: ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç Ïñ∏Ïñ¥</span>
            <!--ul ÌÉúÍ∑∏Î°ú Í∞ôÏùÄ Ïπ¥ÌÖåÍ≥†Î¶¨Îì§ Î™®ÏïÑÎëî ÌéòÏù¥ÏßÄÎì§ ÎÇòÏó¥-->
            <ul>
                <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                <!--Python Ïπ¥ÌÖåÍ≥†Î¶¨ Í∏ÄÎì§ÏùÑ Î™®ÏïÑÎëî ÌéòÏù¥ÏßÄÏù∏ /categories/python Ï£ºÏÜåÏùò Í∏ÄÎ°ú ÎßÅÌÅ¨ Ïó∞Í≤∞-->
                <!--category[1].size Î°ú Ìï¥Îãπ Ïπ¥ÌÖåÍ≥†Î¶¨Î•º Í∞ÄÏßÑ Í∏ÄÏùò Í∞úÏàò ÌëúÏãú--> 
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/python" class="">Python (4)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/kotlin" class="">Kotlin (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>
            
      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: BackEnd-------------------------------------->
      <span class="nav__sub-title">üíª BackEnd</span>
      <ul>
          <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/nodejs" class="">NodeJs (6)</a></li>
          
          
          
          
          
          
          
          
          
          
      </ul> 

      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: FrontEnd-------------------------------------->
      <span class="nav__sub-title">üé® FrontEnd</span>
      <ul>
          <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/reactnative" class="">ReactNative (3)</a></li>
          
          
          
          
          <li><a href="/categories/hci" class="">HCI (15)</a></li>
          
          
      </ul> 

      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: System-------------------------------------->
      <span class="nav__sub-title">üìü System</span>
      <ul>
          <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/systemprogramming" class="">System Programming (22)</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
      </ul>              
            
      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: Computer Science-------------------------------------->
        <span class="nav__sub-title">üñ•Ô∏è Computer Science</span>
            <ul>
                <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/datalgorithmwithJava" class="">Data structures and algorithms(Java) (30)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/computerarchitecture" class="">Computer Architecture (26)</a></li>
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/datalgorithmwithPython" class="">Data structures and algorithms(Python) (14)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/os" class="">OS (10)</a></li>
                
                
                
                
            </ul>              

     <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: Project-------------------------------------->
     <span class="nav__sub-title">üì± Android</span>
            <ul>
                <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/android" class="">Android (3)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>               
            
     <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: Project-------------------------------------->
     <span class="nav__sub-title">üß™ Project: ÌîÑÎ°úÏ†ùÌä∏</span>
            <ul>
                <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>   

      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: Algorithm-------------------------------------->
      <span class="nav__sub-title">üî† Algorithm: Î¨∏Ï†ú ÌíÄÏù¥(Î∞±Ï§Ä, ÌîÑÎ°úÍ∑∏ÎûòÎ®∏Ïä§)</span>
      <ul>
          <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
          
          
          
          <li><a href="/categories/math" class="">Math (1)</a></li>
          
          
          <li><a href="/categories/bruteforce" class="">BruteForce (4)</a></li>
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/implementation" class="">Implementation (4)</a></li>
          
          
          
          
          
          
          <li><a href="/categories/linkedList" class="">LinkedList (3)</a></li>
          
          
          <li><a href="/categories/stack" class="">Stack (2)</a></li>
          
          
          <li><a href="/categories/queue" class="">Queue (2)</a></li>
          
          
          <li><a href="/categories/hash" class="">Hash (2)</a></li>
          
          
          <li><a href="/categories/binarysearch" class="">BinarySearch (3)</a></li>
          
          
          <li><a href="/categories/sorting" class="">Sorting (7)</a></li>
          
          
          <li><a href="/categories/tree" class="">Tree (1)</a></li>
          
          
          <li><a href="/categories/heap" class="">Heap (1)</a></li>
          
          
          <li><a href="/categories/graph" class="">Graph (4)</a></li>
          
          
          <li><a href="/categories/dijkstra" class="">Dijkstra (1)</a></li>
          
          
          <li><a href="/categories/dynamicprogramming" class="">DynamicProgramming (1)</a></li>
          
          
          <li><a href="/categories/greedy" class="">Greedy (1)</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
      </ul>            
      <!-------------------------------------- ÏÉÅÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨: ETC-------------------------------------->
        <span class="nav__sub-title">üí¨ ETC: Í∏∞ÌÉÄ</span>
            <ul>
                <!-- ÌïòÏúÑ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/history" class="">History (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/tip" class="">Tip (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>
      </li>
  </ul>
</nav>
  
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[OS] Synchronization Tools">
    <meta itemprop="description" content="[toc]">
    <meta itemprop="datePublished" content="2022-09-27T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/os/OS-Synchronization-Tools/" class="u-url" itemprop="url">[OS] Synchronization Tools
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          29 Î∂Ñ ÏÜåÏöî
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu"><li><a href="#chapter-6-synchronization-tools">Chapter 6: Synchronization Tools</a><ul><li><a href="#objectives">Objectives</a></li><li><a href="#background">Background</a></li><li><a href="#cooperating-processes">Cooperating Processes</a></li><li><a href="#producer-consumer-problem">Producer-Consumer Problem</a></li><li><a href="#ch-3-bounded-buffer-shared-memory-solution">Ch 3 Bounded-Buffer Shared-Memory Solution</a></li><li><a href="#bounded-buffer---producer">Bounded-Buffer - Producer</a></li><li><a href="#bounded-buffer---consumer">Bounded Buffer - Consumer</a></li><li><a href="#producer-counter">Producer (counter)</a></li><li><a href="#consumer-counter">Consumer (counter)</a></li><li><a href="#race-condition">Race Condition</a></li><li><a href="#race-condition---Ï§ëÏöî">Race Condition - Ï§ëÏöî</a></li><li><a href="#critical-section-problem">Critical Section Problem</a></li><li><a href="#critical-section">Critical Section</a></li><li><a href="#solution-to-critical-section-problem">Solution to Critical-Section Problem</a></li><li><a href="#critical-section-handling-in-os">Critical-Section Handling in OS</a></li><li><a href="#algorithm-for-process-pi">Algorithm for Process Pi</a></li><li><a href="#initial-attempt-1-to-solve-problem">Initial Attempt 1 to Solve Problem</a></li><li><a href="#initial-attempt-2-to-solve-problem">Initial Attempt 2 to Solve Problem</a></li><li><a href="#petersons-solution">Peterson‚Äôs Solution</a></li><li><a href="#algorithm-for-process-pi-1">Algorithm for Process Pi</a></li><li><a href="#petersons-solution-cont">Peterson‚Äôs Solution (Cont.)</a></li><li><a href="#multiple-process-solution-bakery-algorithm">Multiple-Process Solution: Bakery Algorithm</a></li><li><a href="#bakery-algorithm-contÏ§ëÏöî">Bakery Algorithm (Cont.)(Ï§ëÏöî)</a></li><li><a href="#reordering-of-instructions---xxxx">Reordering of instructions - XXXX</a></li><li><a href="#hardware-support-for-synchronization-memory-barrier---xxxx">Hardware Support for Synchronization: Memory barrier - XXXX</a></li><li><a href="#effects-of-instruction-reordering---xxxx">Effects of Instruction reordering - XXXX</a></li><li><a href="#synchronization-hardware">Synchronization Hardware</a></li><li><a href="#solution-to-critical-section-problem-using-locks">Solution to Critical-section Problem Using Locks</a></li><li><a href="#test_and_set-instruction">test_and_set Instruction</a></li><li><a href="#solution-using-test_and_set---Ï§ëÏöî">Solution using test_and_set() - Ï§ëÏöî</a></li><li><a href="#compare_and_swap-instruction---xxxx">compare_and_swap Instruction - XXXX</a></li><li><a href="#solution-using-compare_and_swap---xxxx">Solution using compare_and_swap - XXXX</a></li><li><a href="#bounded-waiting-mutual-exclusion-with-test_and_set">Bounded-Waiting Mutual Exclusion with Test_and_Set</a></li><li><a href="#mutex-locks">Mutex Locks</a></li><li><a href="#acquire-and-release">acquire() and release()</a></li><li><a href="#semaphore">Semaphore</a></li><li><a href="#semaphore-usage">Semaphore Usage</a></li><li><a href="#semaphore-implementation">Semaphore Implementation</a></li><li><a href="#semaphore-implementation-with-no-busy-waiting">Semaphore Implementation with no Busy waiting</a></li><li><a href="#implementation-with-no-busy-waiting-cont-ÏãúÌóò">Implementation with no Busy waiting (Cont.) ÏãúÌóò!</a></li><li><a href="#semaphore-as-general-synchronization-toolÏ§ëÏöî">Semaphore as General Synchronization Tool(Ï§ëÏöî)</a></li><li><a href="#two-types-of-semaphores">Two Types of Semaphores</a></li><li><a href="#implementing-s-as-a-binary-semaphore">Implementing S as a Binary Semaphore</a></li><li><a href="#implementing-s-cont---Ï§ëÏöî">Implementing S (Cont.) - Ï§ëÏöî</a></li><li><a href="#problems-with-semaphores">Problems with Semaphores</a></li><li><a href="#monitors">Monitors</a></li><li><a href="#monitors-continued">Monitors (continued)</a></li><li><a href="#schematic-view-of-a-monitor">Schematic view of a monitor</a></li><li><a href="#monitors-continued---ÏãúÌóò">Monitors (continued) - ÏãúÌóò</a></li><li><a href="#monitor-with-condition-variables">Monitor with condition variables</a></li><li><a href="#monitors-continued-1">Monitors (continued)</a></li><li><a href="#monitor-implementation-using-semaphores">Monitor Implementation Using Semaphores</a></li><li><a href="#monitor-implementation---condition-variables">Monitor Implementation - Condition Variables</a></li><li><a href="#monitor-implementation-cont">Monitor Implementation (Cont.)</a></li><li><a href="#monitor-implementation-cont-1">Monitor Implementation (Cont.)</a></li><li><a href="#single-resource-allocation">Single Resource allocation</a></li><li><a href="#a-monitor-to-allocate-single-resource---Ï§ëÏöî">A Monitor to Allocate Single Resource - Ï§ëÏöî</a></li><li><a href="#monitor-implementation-cont-2">Monitor Implementation (Cont.)</a></li><li><a href="#liveness---Î¨¥Ïãú-xxxx">Liveness - Î¨¥Ïãú XXXX</a></li><li><a href="#atomic-transactions--xxxx">Atomic Transactions -XXXX</a></li><li><a href="#system-model---xxxx">System Model - XXXX</a></li><li><a href="#types-of-storage-media---xxxx">Types of Storage Media - XXXX</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <p>[toc]</p>

<h1 id="chapter-6-synchronization-tools">Chapter 6: Synchronization Tools</h1>

<ul>
  <li>Background</li>
  <li>The Critical-Section Problem</li>
  <li>Peterson‚Äôs Solution</li>
  <li>Synchronization Hardware</li>
  <li>Mutex Locks</li>
  <li>Semaphores</li>
  <li>Classical Problems of Synchronization</li>
  <li>Monitors</li>
</ul>

<p><br /></p>

<h2 id="objectives">Objectives</h2>

<ul>
  <li>To present the <strong>concept</strong> of process synchronization.</li>
  <li>To introduce the <strong>critical-section problem</strong>, whose solutions can be used to ensure the <strong>consistency</strong> of shared data</li>
  <li>To present both software and hardware solutions of the critical-section problem</li>
  <li>To examine several classical process-synchronization problems</li>
  <li>To explore several tools that are used to solve process synchronization problems</li>
</ul>

<p><br /></p>

<h2 id="background">Background</h2>

<p>Í∑∏ÎûòÎèÑ Í≤∞Íµ≠ thread of controlÏùÄ Îëê Í∞úÍ∞Ä ÏïÑÎãàÎùº ÌïòÎÇò.</p>

<ul>
  <li>Processes can execute concurrently or in parallel
    <ul>
      <li>CPU scheduler switches between processes to provide concurrent execution</li>
      <li>May be interrupted at any time, partially completing execution at any point in its instruction stream
        <ul>
          <li>Ïñ∏Ï†úÎì†ÏßÄ interruptÍ∞Ä Í±∏Î¶¥ Ïàò ÏûàÏùå
            <ul>
              <li>time quatum expired(software interrupt)</li>
              <li>Ïô∏Î∂ÄÏóêÏÑúÏùò Ïù¥Î≤§Ìä∏ Î∞úÏÉù -&gt; interrupt -&gt; controlÏù¥ Ïû†Ïãú OSÎ°ú ÎÇ¥Î†§Í∞ÄÏÑú ÌåêÎã®</li>
            </ul>
          </li>
          <li>Processing core may be assigned to execute instructions of another process (<strong>concurrent execution</strong>)</li>
        </ul>
      </li>
      <li>Two instruction streams (different processes) execute simultaneously on separating processing cores (<strong>parallel execution</strong>)
        <ul>
          <li>2Í∞úÏùò coreÏóêÏÑú Ï∞ê parallel ÌïòÍ≤å Ïã§Ìñâ</li>
          <li>Ïô∏Î∂ÄÏóêÏÑú interruptÍ∞Ä Í±∏Î¶¨ÏßÄ ÏïäÏïÑÎèÑ ÎëêÍ∞ú Ïù¥ÏÉÅÏùò streamÏù¥ ÎèôÏãúÏóê Ïã§ÌñâÎêúÎã§.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Concurrent access to shared data may result in data inconsistency
    <ul>
      <li>1Î≤àÏùÑ Îã§ ÎÅùÎÇ¥ÏßÄ Î™ªÌïú ÏÉÅÌÉúÏóêÏÑú 2Î≤àÏùÑ Ïã§ÌñâÌïòÍ≤å ÎêòÎ≤ÑÎ¶¨Î©¥ 1Î≤àÏóêÏÑú ÏÇ¨Ïö©ÌïòÎçò Îç∞Ïù¥ÌÑ∞Î•º 2Î≤àÏóêÏÑú Í≥µÏú†Îç∞Ïù¥ÌÑ∞Î°ú Ïì∞Í≤å ÎêòÏñ¥ Î≤ÑÎ¶¥ Ïàò ÏûàÎã§.</li>
      <li>ÎØøÏùÑ ÎßåÌïú Îç∞Ïù¥ÌÑ∞Ïù∏ÏßÄ -&gt; Îç∞Ïù¥ÌÑ∞Ïùò Ïã†Î¢∞ÏÑ±Ïù¥ Îñ®Ïñ¥Ïßê</li>
      <li>ÏùÄÌñâ Í≥ÑÏ¢å ÏñòÍ∏∞ - Í∞ÅÏûê Í≥ÑÏ¢åÎ•º Îî∞Î°ú Ïì∞Î©¥ Î¨∏Ï†úÍ∞Ä ÏóÜÍ≤†ÏßÄÎßå Í∞ÄÏ°±ÎÅºÎ¶¨ Í≥ÑÏ¢åÎ•º Í∞ôÏù¥ Ïì∞Î©¥ Ïù¥Í≤ÉÏù¥ ÏÇ¨Ïã§ÏÉÅ Í≥µÏú† Îç∞Ïù¥ÌÑ∞ Ïù∏ Í≤ÉÏù¥Îã§. ÎßåÏïΩ ÎèôÏãúÏóê 10ÎßåÏõêÏùÑ ÎΩëÍ≤å ÎêòÎ©¥ ÏûêÏπ´Ìï¥ÏÑú ÏùÄÌñâÏùÄ 10ÎßåÏõêÏùÑ ÏÜêÌï¥Î•º Î≥º Ïàò ÏûàÏùå
        <ul>
          <li>Í∑∏ÎûòÏÑú synchronizationÏù¥ ÍµâÏû•Ìûà Ï§ëÏöîÌïú Í≤É</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Maintaining data consistency requires mechanisms to ensure the <strong>orderly execution</strong> of cooperating processes
    <ul>
      <li>ÌòëÎ†• Í¥ÄÍ≥ÑÏùò ÌîÑÎ°úÏÑ∏Ïä§ Í∞ÑÏóêÎäî Î∞òÎìúÏãú Ïã§ÌñâÏùò ÏàúÏÑúÎ•º Ï†úÏñ¥Ìï† ÌïÑÏöîÍ∞Ä ÏûàÎã§.</li>
      <li>ÎèÖÎ¶ΩÏ†ÅÏù¥Î©¥ ÌïÑÏöîÏóÜÏùå</li>
    </ul>
  </li>
  <li>parallel processingÏù¥ÎÇò pseudo parallel processingÏù¥ÎÇò ÏñªÏùÑ Ïàò ÏûàÎäî Ïû•Ï†êÏù¥ ÏûàÏùå.</li>
</ul>

<p><br /></p>

<h2 id="cooperating-processes">Cooperating Processes</h2>

<ul>
  <li><strong>Independent process</strong> cannot affect or be affected by the execution of another process.</li>
  <li><strong>Cooperating process</strong> can affect or be affected by the execution of another process
    <ul>
      <li>Directly share a logical address space (code and data)</li>
      <li>Share data through shared memory or message passing</li>
    </ul>
  </li>
  <li>Advantages of process cooperation
    <ul>
      <li>Information sharing</li>
      <li>Computation speed-up</li>
      <li>Modularity</li>
      <li>Convenience</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="producer-consumer-problem">Producer-Consumer Problem</h2>

<ul>
  <li>Illustration of the problem:
    <ul>
      <li>Suppose that we wanted to provide a solution to the consumer-producer problem that fills all the buffers.</li>
      <li>We can do so by having an integer <strong>counter</strong> that keeps track of the  number of full buffers.</li>
      <li>Initially, counter is set to 0. It is incremented by the producer after it  produces a new buffer and is decremented by the consumer after it  consumes a buffer.</li>
    </ul>
  </li>
  <li>Paradigm for cooperating processes, <strong>producer process</strong> produces  information that is consumed by a <strong>consumer process.</strong>
    <ul>
      <li>unbounded-buffer places no practical limit on the size of the buffer.</li>
      <li>bounded-buffer assumes that there is a fixed buffer size.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="ch-3-bounded-buffer-shared-memory-solution">Ch 3 Bounded-Buffer Shared-Memory Solution</h2>

<ul>
  <li>
    <p>Shared data</p>

    <ul>
      <li>
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define BUFFER_SIZE 10
</span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
<span class="p">}</span> <span class="n">item</span><span class="p">;</span>
<span class="n">item</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">in</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">out</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>10Í∞úÏùò itemÏùÑ Ï†ÄÏû•Ìï† Ïàò ÏûàÎäî buffer</p>
  </li>
  <li>
    <p>if <strong>in=out</strong>, buffer is empty</p>
  </li>
  <li>
    <p>if <strong>(in+1) mod n = out</strong>, buffer is full</p>
  </li>
  <li>
    <p>Solution is correct, but can only use BUFFER_SIZE-1 elements</p>
  </li>
</ul>

<p><br /></p>

<h2 id="bounded-buffer---producer">Bounded-Buffer - Producer</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span> 
    <span class="cm">/* produce an item in next produced */</span> 
    <span class="k">while</span> <span class="p">(((</span><span class="n">in</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">)</span> <span class="o">==</span> <span class="n">out</span><span class="p">)</span> 
        <span class="p">;</span> <span class="cm">/* do nothing */</span> 
    <span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_produced</span><span class="p">;</span> 
    <span class="n">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">in</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">;</span> 
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="bounded-buffer---consumer">Bounded Buffer - Consumer</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">item</span> <span class="n">next_consumed</span><span class="p">;</span> 
<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">in</span> <span class="o">==</span> <span class="n">out</span><span class="p">)</span> 
        <span class="p">;</span> <span class="cm">/* do nothing */</span>
    <span class="n">next_consumed</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span> 
    <span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="n">out</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">;</span>
    <span class="cm">/* consume the item in next consumed */</span> 
<span class="p">}</span> 

</code></pre></div></div>

<p><br /></p>

<h2 id="producer-counter">Producer (counter)</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* produce an item in next produced */</span> 
    
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="n">BUFFER_SIZE</span><span class="p">)</span> <span class="p">;</span> 
    	<span class="cm">/* do nothing */</span> 
    <span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_produced</span><span class="p">;</span> 
    <span class="n">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">in</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">;</span> 
    <span class="n">counter</span><span class="o">++</span><span class="p">;</span> 
<span class="p">}</span> 
</code></pre></div></div>

<ul>
  <li>Î≤ÑÌçºÎ•º ÌïòÎÇò ÎπÑÏõåÏïºÎßå ÌïòÎçò Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ counter Î≥ÄÏàòÎ°ú Î≤ÑÌçºÏùò Îç∞Ïù¥ÌÑ∞ Í∞ØÏàòÎ•º ÏÑºÎã§.</li>
</ul>

<p><br /></p>

<h2 id="consumer-counter">Consumer (counter)</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
        <span class="p">;</span> <span class="cm">/* do nothing */</span> 
    <span class="n">next_consumed</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span> 
    <span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="n">out</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">;</span> 
    <span class="n">counter</span><span class="o">--</span><span class="p">;</span> <span class="c1">//Ïù¥ Î∂ÄÎ∂ÑÏùÑ atomicÌïòÍ≤å Ïã§ÌñâÌïòÎèÑÎ°ù ÎßåÎì§Ïñ¥ Ï£ºÏñ¥Ïïº Ìï®</span>
    <span class="cm">/* consume the item in next consumed */</span> 
<span class="p">}</span> 
</code></pre></div></div>

<p>producerÍ∞Ä Ï¶ùÍ∞ÄÏãúÌÇ§Îäî ÎèôÏïàÏóêÎäî consumerÍ∞Ä Í∞êÏÜåÌïòÏßÄ ÏïäÎèÑÎ°ù Ìï¥Ïïº Ìï®.</p>

<p><br /></p>

<h2 id="race-condition">Race Condition</h2>

<p>ÏúÑ ÏΩîÎìúÎäî ÏûòÎ™ªÎêú ÏΩîÎìúÏûÑ -&gt; atomic ÌïòÏßÄ ÏïäÏùå!</p>

<ul>
  <li>
    <p>Ï°∞ÏûëÌïòÍ≥† ÏûàÎäî ÏÇ¨Ïù¥Ïóê Context SwitchingÏù¥ ÏùºÏñ¥ÎÇòÍ≤å ÎêòÎ©¥ Í∑∏ Í∞íÏùÄ ÏõêÌïòÎäî Í≤∞Í≥ºÎ•º Í∞ÄÏ†∏Ïò§ÏßÄ Î™ªÌï† Í≤ÉÏù¥Îã§.</p>
  </li>
  <li>
    <p>counter++ could be implemented in machine language as:</p>

    <p>register1 = counter [r1=5]</p>

    <p>register1 = register1 + 1 [r1=6]</p>

    <p>counter = register1 [counter=6]</p>

    <ul>
      <li>counterÎ•º Ï¶ùÍ∞ÄÏãúÌÇ§Îäî Î¨∏Ïû•Ïù¥ atomicÌïòÏßÄ ÏïäÎã§(ÏïÑÎûòÎèÑ ÎßàÏ∞¨Í∞ÄÏßÄ)</li>
    </ul>
  </li>
  <li>
    <p>counter‚Äì could be implemented in machine language as:</p>

    <p>register2 = counter [r2=5]</p>

    <p>register2 = register2 - 1 [r2=4]</p>

    <p>counter = register2 [counter=4]</p>
  </li>
  <li>ÌïòÎÇòÏùò instructionÏù¥ Ïã§ÌñâÎêòÎäî ÎèôÏïàÏóêÎäî Ïñ¥Îñ§ interruptÍ∞Ä ÏôÄÎèÑ Î∞òÏùëÌïòÏßÄ ÏïäÏùå(atomic instruction)</li>
  <li>Í∑∏Îü¨ÎÇò instruction ÏÇ¨Ïù¥ÏÇ¨Ïù¥ÏóêÎäî interrutptÍ∞Ä Î∞úÏÉùÌï† Ïàò ÏûàÏñ¥ÏÑú context switchingÏù¥ ÏùºÏñ¥ÎÇúÎã§.</li>
</ul>

<p><br /></p>

<h2 id="race-condition---Ï§ëÏöî">Race Condition - Ï§ëÏöî</h2>

<ul>
  <li>
    <p>If both the producer and consumer <strong>attempt to update the buffer concurrently</strong>, the assembly language statements may get interleaved.</p>

    <ul>
      <li>
        <p>Ìïú Î≤àÏóê 2Í∞ú Ïù¥ÏÉÅÏùò Writer ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ï†ëÍ∑ºÌïòÎäî Í≤ΩÏö∞ =&gt; WriterÎäî Ìïú Î≤àÏóê 1Í∞úÎßå Ï†ëÍ∑ºÍ∞ÄÎä•</p>
      </li>
      <li>
        <p>critical sectionÏùò Ïã§ÌñâÏùÄ ÎèôÏãúÏóê Ïã§ÌñâÎêòÏßÄ ÏïäÎèÑÎ°ù!</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Interleaving depends upon how the producer and consumer processes  are scheduled.</p>
  </li>
  <li>
    <p>Assume <strong>counter</strong> is initially 5. One interleaving of statements is:</p>

    <p>producer: register1 = counter (register1 = 5) 
producer: register1 = register1 + 1 (register1 = 6) 
consumer: register2 = counter (register2 = 5) 
consumer: register2 = register2 ‚Äì 1 (register2 = 4) 
producer: counter = register1 (counter = 6) 
consumer: counter = register2 (counter = 4)</p>
  </li>
  <li>
    <p>The value of count may be either 4 or 6, where the correct result  should be 5.</p>
  </li>
</ul>

<p><br /></p>

<ul>
  <li>
    <p>More than one process accessing a shared variable  ‚Äì&gt; race condition</p>

    <ul>
      <li>race conditionÏóêÏÑú Î¨∏Ï†úÎäî Î∞úÏÉùÌï† ÏàòÎèÑ ÏûàÏßÄÎßå Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌï† ÏàòÎèÑ ÏûàÎäîÎç∞ Î∞úÏÉùÌïòÎ©¥ ÌÅ∞Ïùº ÎÇúÎã§.
        <ul>
          <li>ÎÇôÌïòÏÇ∞Ïù¥ Ìé¥Ïßà ÎïåÎèÑ ÏûàÍ≥† Ïïà Ìé¥Ïßà ÎïåÎèÑ ÏûàÎã§? -&gt; ‚Ä¶‚Ä¶</li>
        </ul>
      </li>
      <li>Timing factors (interrupts) can cause incorrect results
        <ul>
          <li>Intermediate results are used</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>The statements:</p>

    <ul>
      <li>
        <p>counter := counter + 1;</p>
      </li>
      <li>
        <p>counter := counter - 1;</p>

        <p>must be executed atomically.  -&gt; data consistency Î≥¥Ïû•</p>
      </li>
    </ul>
  </li>
  <li>
    <p><mark>Atomic operation means an operation that completes in its entirety  without interruption. </mark></p>
  </li>
  <li>
    <p><strong>Race condition</strong>: The situation where several processes access ‚Äì and  manipulate shared data concurrently. The final value of the shared data  depends upon which process finishes last.</p>
  </li>
  <li>
    <p>To prevent race conditions, concurrent processes must be  <strong>synchronized</strong>.</p>

    <ul>
      <li>race conditionÏùÑ ÏõêÏ≤ú Î¥âÏáÑÌïòÎäî Í≤É -&gt; ÎèôÍ∏∞ÌôîÏùò Î™©Ï†Å!</li>
    </ul>
  </li>
  <li>
    <p>Í≥µÏú† Îç∞Ïù¥ÌÑ∞Ïóê ÎåÄÌïú Ï†ëÍ∑ºÏùÑ ÎèôÍ∏∞Ìôî!</p>
  </li>
</ul>

<p><br /></p>

<h2 id="critical-section-problem">Critical Section Problem</h2>

<ul>
  <li>Consider system of n processes {p0 , p1 , ‚Ä¶ pn-1 }</li>
  <li>n processes all competing to use some shared data</li>
  <li>Each process has <strong>critical section</strong> segment of code
    <ul>
      <li>Process may be changing common variables(Í≥µÏú† Îç∞Ïù¥ÌÑ∞Î•º Î≥ÄÍ≤Ω Í∞ÄÎä•!), updating table, writing file,  etc</li>
      <li>When one process in critical section, no other may be in its critical section</li>
    </ul>
  </li>
  <li><strong>Critical section problem</strong> is to design protocol to solve this
    <ul>
      <li>ensure that when one process is executing in its critical section, no other process is allowed to execute in its critical section.</li>
    </ul>
  </li>
  <li>Each process must ask permission to enter critical section in <strong>entry section</strong>, may follow critical section with <strong>exit section</strong>, then <strong>remainder section</strong></li>
  <li>Especially <strong>challenging</strong> with preemptive kernels
    <ul>
      <li>preemptive kernel: kernel ÏïàÏóêÏÑú preemptionÏùÑ ÌóàÏö©</li>
      <li>Ïù¥ Í≤ΩÏö∞ Îçî Ïñ¥Î†§ÏõÄ</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="critical-section">Critical Section</h2>

<ul>
  <li>Structure of process P<sub>i</sub></li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002203915957.png" alt="image-20221002203915957" /></p>

<ul>
  <li>ÏõêÎûò ÏΩîÎìúÎäî critical sectionÍ≥º remainder sectionÏù¥ Î≠âÏ≥êÏ†∏ÏÑú Ìïú Î∂ÄÎ∂ÑÏùÑ Ïù¥Î£®Ïñ¥Ï†∏ ÏûàÏóàÎäîÎç∞ race conditionÏùÑ ÏùºÏúºÌÇ§Îäî Î∂ÄÎ∂ÑÏù¥ ÏûàÏñ¥ÏÑú Ïù¥ Î∂ÄÎ∂ÑÏùÑ Îî∞Î°ú ÎπºÏïº ÌñàÏùå.
    <ul>
      <li>‚Äì&gt; entry section</li>
    </ul>
  </li>
  <li>Îî± Ìïú Í∞úÎßå ÎèåÎèÑÎ°ù ÌïòÍ∏∞ ÏúÑÌï¥ÏÑú ÏàúÏÑúÎ•º Í≤∞Ï†ïÌïòÎäî Í≤ÉÏûÑ!
    <ul>
      <li>entry sectionÏóê ÏßÑÏûÖÌï† Îïå Ìã∞ÏºìÏùÑ ÎΩëÍ≥† exit sectionÏóêÏÑú ÎÇòÍ∞à Îïå Ìã∞Ïºì Î∞òÎÇ©</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="solution-to-critical-section-problem">Solution to Critical-Section Problem</h2>

<p>critical section problemÏùÑ Ï†úÎåÄÎ°ú Ìï¥Í≤∞ÌñàÎäîÏßÄ ÌôïÏù∏ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî Îã§Ïùå ÏÑ∏ Ï°∞Í±¥ÏùÑ ÎßåÏ°±ÏãúÌÇ§Îäî ÏßÄÎ•º ÌôïÏù∏ÌïòÎ©¥ ÎêúÎã§.</p>

<ol>
  <li>
    <p><strong>Mutual Exclusion</strong>.</p>

    <ul>
      <li>critical sectionÏùÑ Ïã§Ìñâ Ï§ëÏù∏ processÎäî Î∞òÎìúÏãú Ïò§ÏßÅ ÌïòÎÇòÏó¨ÏïºÎßå ÌïúÎã§.
        <ul>
          <li>Ï¶â, ÌïòÎÇòÏùò processÍ∞Ä critical sectionÏóê Ï†ëÍ∑ºÌñàÏúºÎ©¥ Îã§Î•∏ ÌîÑÎ°úÏÑ∏Ïä§Îäî Ï†ëÍ∑ºÌïòÏßÄ Î™ªÌï¥Ïïº ÌïúÎã§.</li>
        </ul>
      </li>
      <li>If process Pi is executing in its critical section, then no other processes can be executing <strong>in their critical sections.</strong></li>
      <li>mutual exclusionÏùÄ critical section Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌñàÎäîÏßÄÎ•º Îî∞ÏßÄÎäî Ï§ëÏöîÌïú Í∑ºÍ∞ÑÏù¥ ÎêòÎäî Ï°∞Í±¥Ïù¥ÏßÄÎßå Ïù¥Î•º ÎßåÏ°±ÌïòÍ∏∞ ÏúÑÌï¥ ÎÖ∏Î†•ÌïòÎã§ Î≥¥Î©¥ ÏïÑÎûòÏôÄ Í∞ôÏùÄ Ïó≠Ìö®Í≥ºÍ∞Ä ÏÉùÍ∏∞Í∏∞ ÎßàÎ†®Ïù¥Îã§.
        <ul>
          <li>Í∑∏ÎûòÏÑú ÏïÑÎûò Îëê Ï°∞Í±¥ÎèÑ ÎßåÏ°± ÏãúÏºúÏïº Î¨∏Ï†úÎ•º ÏôÑÏ†ÑÌûà Ìï¥Í≤∞ÌñàÎã§Í≥† Ìï† Ïàò ÏûàÏùå</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Progress</strong>.</p>

    <ul>
      <li>ÏïÑÎ¨¥ÎèÑ critical sectionÏóê Îì§Ïñ¥Í∞à Ïàò ÏóÜÎäî ÏÉÅÌô©Ïù¥ ÎßåÎì§Ïñ¥ ÏßÄÎ©¥ ÏïàÎêúÎã§. (Í∑∏ÎûòÏÑú ÏïÑÎ¨¥ÎèÑ critical sectionÏóê ÏóÜÎäî ÏÉÅÌô©)</li>
      <li><mark>Ìïú critical sectionÏóêÏÑú Ïã§ÌñâÎêòÍ≥† ÏûàÎäî ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏóÜÎäî ÏÉÅÌô©ÏóêÏÑú, Ïñ¥Îñ§ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Í∑∏ critical sectionÏóê Îì§Ïñ¥Í∞ÄÍ≥† Ïã∂Îã§Í≥† ÏÑ†Ïñ∏ÌñàÏúºÎ©¥ Îì§Ïñ¥Í∞à Ïàò ÏûàÏñ¥Ïïº ÌïúÎã§.!</mark></li>
    </ul>

    <ol>
      <li>A process outside of its CS can not block another process from entering  its own CS
        <ul>
          <li>critical sectionÏóê Îßâ Îì§Ïñ¥Í∞ÄÎ†§Í≥† ÌïòÎäî ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä CS Î∞ñÏóêÏÑú ÎèåÍ≥† ÏûàÎäî processÏùò ÏòÅÌñ•ÏùÑ Î∞õÏïÑ CS ÏïàÏúºÎ°ú Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌïòÎäî Í≤ΩÏö∞</li>
        </ul>
      </li>
      <li>If no process is executing in its critical section and there exist some processes that wish to enter their critical section, then the selection of the processes that will enter the critical section next cannot be postponed indefinitely.
        <ul>
          <li>CSÎ•º Ïã§Ìñâ Ï§ëÏù∏ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏóÜÎäî ÏÉÅÌô©ÏóêÏÑú Ïó¨Îü¨ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÎèôÏãúÏóê CSÏóê Îì§Ïñ¥Í∞ÄÎ†§Í≥† ÌïòÍ≥† Ïã∂ÏùÑ Îïå Í≤ΩÏüÅÏóê Í∞ÄÎã¥ÌïòÎäî ÌîÑÎ°úÏÑ∏Ïä§Îì§ÏùÄ Í∑∏Îì§Ïùò remainder sectionÏóêÏÑú Ïã§ÌñâÏ§ëÏù¥ÏßÄ ÏïäÎäî ÌîÑÎ°úÏÑ∏Ïä§Ïó¨Ïïº ÌïúÎã§.</li>
          <li>ÎàÑÍ∞Ä Îì§Ïñ¥Í∞à ÏßÄ ÏÑ†ÌÉùÌï¥Ïïº Ìï®.</li>
        </ul>
      </li>
    </ol>

    <ul>
      <li>Í∑∏Î¶¨Í≥† Í≤∞Ï†ïÍ≥ºÏ†ïÏùÄ Î¨¥ÌïúÏ†ïÏúºÎ°ú ÏßÄÏó∞ÎèºÏÑúÎäî ÏïàÎêúÎã§.</li>
    </ul>
  </li>
  <li>
    <p><strong>Bounded Waiting</strong>.</p>

    <ul>
      <li>ÏûÖÏû•Í∂åÏùÑ Î∞õÍ∏∞ ÏúÑÌï¥ Í∏∞Îã§Î¶¨Í≥† ÏûàÎäîÎç∞ FCFSÎ°ú ÌïòÎ©¥ ÎãπÏó∞Ìûà Î®ºÏ†ÄÏò® ÏÇ¨ÎûåÏù¥ Î®ºÏ†Ä Îì§Ïñ¥Í∞ÄÎãàÍπå Í∏∞Îã§Î†§Ïïº ÎêòÎäî ÏãúÍ∞ÑÏùÄ ÎÇ¥ ÏïûÏù¥ Î™á Î™ÖÏù¥ ÏÑú ÏûàÎÉêÏóê Îî∞Îùº Í≤∞Ï†ïÎêòÎäîÎç∞ Î≤àÌò∏ÌëúÎ•º ÎÇòÎà†Ï£ºÎäî Î∞©Î≤ïÏóê Î¨∏Ï†úÍ∞Ä ÏûàÏúºÎ©¥ ÏùºÏ∞ç ÏôîÏñ¥ÎèÑ Îä¶Í≤å Îì§Ïñ¥Í∞à Ïàò ÏûàÍ≤å ÎêúÎã§.</li>
      <li>
        <p>A bound must exist on the number of times that other processes are allowed to enter their critical sections after a process has made a request to enter its critical section and before that request is granted.</p>
      </li>
      <li>
        <p>Assume that each process executes at a nonzero speed</p>
      </li>
      <li>
        <p>No assumption concerning relative speed of the n processes.</p>
      </li>
      <li>ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Critical SectionÏóê Îì§Ïñ¥Í∞ÄÍ∏∞Î°ú ÌñàÏúºÎ©¥ Î¨¥ÌïúÏ†ï Í∏∞Îã§Î†§ÏÑúÎäî ÏïàÎêúÎã§. ÏùºÏ†ï ÏãúÍ∞Ñ ÏïàÏóê Îì§Ïñ¥Í∞ÄÏïº ÌïúÎã§.</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h2 id="critical-section-handling-in-os">Critical-Section Handling in OS</h2>

<ul>
  <li>Two approaches depending on if kernel is preemptive or non-preemptive
    <ul>
      <li><strong>Preemptive</strong> ‚Äì allows preemption of process when running in kernel mode</li>
      <li><strong>Non-preemptive</strong> ‚Äì runs until exits kernel mode, blocks, or voluntarily yields CPU
        <ul>
          <li>Essentially free of race conditions in kernel mode</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="algorithm-for-process-pi">Algorithm for Process Pi</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002204108801.png" alt="image-20221002204108801" /></p>

<p><br /></p>

<h2 id="initial-attempt-1-to-solve-problem">Initial Attempt 1 to Solve Problem</h2>

<ul>
  <li>Í∞ÄÏ†ï: <strong>Only 2 processes</strong>, Pi and Pj</li>
  <li>turn - i =&gt; Pi can enter its critical section</li>
  <li>initially turn = i</li>
  <li>line 2: entry section</li>
  <li>line 4: exit section</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002204145030.png" alt="image-20221002204145030" /></p>

<ul>
  <li>mutexÍ∞Ä Î≥¥Ïû•Îê®
    <ul>
      <li>initial Í∞íÏù¥ iÏù¥Í∏∞ ÎïåÎ¨∏Ïóê Ï≤òÏùåÏóêÎäî PiÎßå Îì§Ïñ¥Í∞à Ïàò ÏûàÍ∏∞ ÎïåÎ¨∏</li>
      <li>critical sectionÏóê Îì§Ïñ¥Í∞ê. -&gt; critical sectionÏùÑ Îπ†Ï†∏ ÎÇòÏò¨ Îïå <code class="language-plaintext highlighter-rouge">turn = j;</code> ÎùºÎäî exit sectionÏùÑ Í±∞Ï≥êÏÑú PjÍ∞Ä Îì§Ïñ¥Í∞à Ïàò ÏûàÍ≤å ÎêúÎã§.</li>
      <li>turnÏù¥ÎùºÎäî Î≥ÄÏàòÏóêÎäî i Ïù¥Í±∞ÎÇò j Îëò Ï§ë ÌïòÎÇòÏùò Í∞íÎßå Í∞ÄÏßà Ïàò ÏûàÏùå</li>
    </ul>
  </li>
  <li>Satisfies mutual exclusion, but not progress (<strong>strict alternation</strong>)
    <ul>
      <li>strict alternation: Î∞òÎìúÏãú iÌõÑÏóê jÍ∞Ä Ïò¨ Ïàò ÏûàÏùå(ÎÇ¥Í∞Ä ÏõêÌï† Îïå critical sectionÏóê Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌï®)
        <ul>
          <li>i - j - i - j -i - j - ‚Ä¶‚Ä¶.</li>
        </ul>
      </li>
      <li>iÍ∞Ä critical sectionÏóêÏÑú Îπ†Ï†∏ÎÇòÏò§Î©¥ÏÑú turnÏùÑ jÎ°ú Î∞îÍøîÏ£ºÎäîÎç∞ Ïù¥ Îïå ÌîÑÎ°úÏÑ∏Ïä§jÎäî whileÎ¨∏Ïóê Í∞ñÌòÄÏûàÍ±∞ÎÇò remainder sectionÏùÑ Ïã§Ìñâ Ï§ëÏùº Í≤ÉÏù¥Îã§.
        <ul>
          <li>Í∑ºÎç∞ jÍ∞Ä remainder sectionÏùÑ Ïã§Ìñâ Ï§ëÏù∏ Í≤ΩÏö∞
            <ul>
              <li>jÍ∞Ä remainder sectionÏóêÏÑú ÏãúÍ∞ÑÏù¥ Ïò§Îûò Í±∏Î†§ÏÑú <strong>iÍ∞Ä Î®ºÏ†Ä</strong> remainder sectionÏùÑ Î™®Îëê ÏàòÌñâÌïòÍ≥† Îã§Ïãú while Î¨∏Ïóê Îì§Ïñ¥Í∞Ä critical sectionÏóê Îì§Ïñ¥Í∞ÄÍ≥† Ïã∂Ïñ¥ÌïòÎäî ÏÉÅÌô©Ïù¥ ÏÉùÍ≤®Î≤ÑÎ¶¨Î©¥ iÎäî ÏïûÏÑú Ïù¥ÎØ∏ turnÏùÑ jÏóêÍ≤å ÎÑòÍ≤®Ï£ºÏóàÍ∏∞ ÎïåÎ¨∏Ïóê critical sectionÏóê ÏïÑÎ¨¥ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏóÜÏùåÏóêÎèÑ Î∂àÍµ¨ÌïòÍ≥† Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌïòÎäî ÏÉÅÌô©Ïù¥ ÏÉùÍ∏∞Í≥† ÎßåÎã§.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>deadlock - ÏÑúÎ°úÍ∞Ä ÏñëÎ≥¥Ìï¥ÏÑú Ïñ¥Îäê Í≤ÉÎèÑ Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌï®</li>
      <li>bounded wait: Ìïú Î≤àÎßå Í∏∞Îã§Î¶¨Î©¥ Îì§Ïñ¥Í∞à Ïàò ÏûàÏùå</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="initial-attempt-2-to-solve-problem">Initial Attempt 2 to Solve Problem</h2>

<ul>
  <li>
    <p>turn ÎßêÍ≥† flagÎ•º Ïì∞Ïûê(ÏßÑÏûÖ ÏùòÏÇ¨Î•º ÎÇòÌÉÄÎÇ¥Îäî)</p>

    <ul>
      <li>
        <p>ÏñëÎ≥¥Î•º ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê mutexÍ∞Ä Î≥¥Ïû•Ïù¥ ÎêúÎã§.</p>
      </li>
      <li>
        <p>ÌïòÏßÄÎßå bounded waitingÍ≥º progress ÏöîÍµ¨ ÏÇ¨Ìï≠Ïù¥ Ï∂©Ï°±ÎêòÏßÄ ÏïäÎäîÎã§.</p>
      </li>
    </ul>
  </li>
  <li>initially flag [i] = flag [j] = false.</li>
  <li>flag [i] = true</li>
  <li>Pi ready to enter its critical section</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002204223532.png" alt="image-20221002204223532" /></p>

<ul>
  <li>Satisfies mutual exclusion, but not progress requirement.
    <ul>
      <li>ÏÉÅÎåÄÎ∞©Ïùò ÏßÑÏûÖ ÏùòÏÇ¨Í∞Ä ÏûàÏúºÎ©¥ Î∞òÎìúÏãú ÏñëÎ≥¥ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê mutual exclusionÏùÄ ÎßåÏ°±ÌïòÏßÄÎßå,</li>
      <li>atomicÌïú instructionÏù¥ ÏïÑÎãàÍ∏∞ ÎïåÎ¨∏Ïóê flag[i]ÏôÄ flag[j]Í∞Ä Î™®Îëê trueÏù∏ ÏÉÅÌô©Ïù¥ ÏûàÏùÑ Ïàò ÏûàÎã§.
        <ul>
          <li>Í∑∏Îü¨Î©¥ ÏÑúÎ°ú ÏñëÎ≥¥ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê progress Ï°∞Í±¥ÏùÑ ÎßåÏ°±ÏãúÌÇ§ÏßÄ Î™ªÌï®.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>If switch 2 statements in entry section, then no mutual exclusion</li>
</ul>

<p><br /></p>

<p><span style="color:red">ÏãúÌóò ÎÇòÏò¨ ÎìØ 3Î≤à!</span></p>

<ol>
  <li>
    <p>MTX requirement is met</p>
  </li>
  <li>
    <p>Progress Requirement is not met</p>

    <p>T0: Pi sets flag[i] = true</p>

    <p>T1: Pj sets flag[j] = true</p>

    <p>both processes are looping forever</p>
  </li>
  <li>
    <p><mark>Bounded-waiting Requirement ?</mark></p>

    <ul>
      <li>ÎÇ¥Í∞Ä Îì§Ïñ¥Í∞ÄÍ≥† Ïã∂ÏùÄÎç∞ Í≥ÑÏÜç Î™ªÎì§Ïñ¥Í∞à ÏàòÍ∞Ä ÏûàÎäêÎÉê?( <strong>Îëê ÌîÑÎ°úÏÑ∏Ïä§ Î™®Îëê ÎèôÏãúÏóê Îì§Ïñ¥Í∞ÄÍ≥† Ïã∂Ïñ¥ÌïòÎäî Í≤ΩÏö∞</strong> )</li>
      <li>Í∑∏Îü∞ Í≤ΩÏö∞Ïóê Îëò Îã§ ÏñëÎ≥¥ÌïòÎäîÎç∞ Ïù¥Í≤ÉÏù¥ bounded -waiting Ï°∞Í±¥ÏùÑ ÎßåÏ°± ÏãúÌÇ§Îäî Í≤ÉÏù∏ÏßÄ ÏïÑÎãåÏßÄ</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h2 id="petersons-solution">Peterson‚Äôs Solution</h2>

<p>ÏúÑÏùò Í≤∞Ìï®ÏúºÎ°ú ÎÇòÏò® Í≤ÉÏù¥ peterson‚Äôs solution</p>

<ul>
  <li>Good algorithmic description of solving the problem</li>
  <li>Two process solution</li>
  <li>Assume that the LOAD and STORE machine-language instructions  are atomic; that is, cannot be interrupted</li>
  <li>The two processes share two variables:
    <ul>
      <li>int <strong>turn</strong>;</li>
      <li>Boolean <strong>flag</strong>[2]</li>
      <li>initially flag [0] = flag [1] = false</li>
    </ul>
  </li>
  <li>The variable ‚Äòturn‚Äô indicates whose turn it is to enter the critical  section
    <ul>
      <li>ÎàÑÍ∞Ä critical sectionÏóê Îì§Ïñ¥Í∞à Ï∞®Î°ÄÏù∏ÏßÄ</li>
    </ul>
  </li>
  <li>The flag array is used to indicate if a process is ready to enter the  critical section. flag[i] = true implies that process Pi is ready to enter its critical section!
    <ul>
      <li>Í∞Å ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä critical sectionÏóê Îì§Ïñ¥Í∞à Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÎäîÏßÄ(whileÎ¨∏ ÏßÅÏ†ÑÏóê trueÍ∞Ä Îê®)</li>
    </ul>
  </li>
  <li>ÌîÑÎ°úÏÑ∏Ïä§Î•º 2Í∞úÏù∏ Í≤ΩÏö∞Î•º Í∞ÄÏ†ïÌïú Í≤ÉÏù¥ÎØÄÎ°ú ÌîÑÎ°úÏÑ∏Ïä§Ïùò Í∞ØÏàòÍ∞Ä NÍ∞úÎ°ú ÎäòÏñ¥ÎÇòÎ©¥ ÏΩîÎìúÎ•º ÏàòÏ†ïÌï¥Ïïº Ìï®.</li>
</ul>

<p><br /></p>

<h2 id="algorithm-for-process-pi-1">Algorithm for Process Pi</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002204443244.png" alt="image-20221002204443244" /></p>

<ul>
  <li>ÏÉÅÎåÄÎ∞©Ïù¥ Îì§Ïñ¥Í∞à Ïàò ÏóÜÎäî Í≤ΩÏö∞Ïóê Îì§Ïñ¥Í∞à Ïàò ÏûàÏùå
    <ul>
      <li>
        <table>
          <tbody>
            <tr>
              <td>flag[j] == false</td>
              <td>¬†</td>
              <td>turn == i Ïù∏ Í≤ΩÏö∞Ïóê CSÏóê Îì§Ïñ¥Í∞à Ïàò ÏûàÏùå</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>ÏÉÅÎåÄÎ∞©Ïù¥ ÏùòÏÇ¨ÏßÑÏûÖÏùÑ Ìù¨ÎßùÌïòÍ≥† ÏûàÍ≥† turnÎèÑ ÏÉÅÎåÄÎ∞©ÏúºÎ°ú ÎêòÏñ¥ ÏûàÏúºÎ©¥ Î™ª Îì§Ïñ¥Í∞ê</li>
    </ul>
  </li>
  <li>ÏÉÅÎåÄÎ∞©Ïù¥ Îì§Ïñ¥Í∞à ÏùòÏÇ¨Í∞Ä ÏóÜÎäî Í≤ΩÏö∞ -&gt; Î¨¥Ï°∞Í±¥ Îì§Ïñ¥Í∞ê</li>
  <li>ÎÇòÎèÑ ÏÉÅÎåÄÎ∞©ÎèÑ Îì§Ïñ¥Í∞à ÏùòÏÇ¨Í∞Ä ÏûàÏúºÎ©¥ turn Í∞íÏùÑ Î≥¥Í≥† Í≤∞Ï†ï!</li>
  <li>Combined shared variables of initial attempts 1 and 2.</li>
  <li>Meets all three requirements; solves the critical-section problem for two processes.</li>
  <li>Problem: does not generalize well
    <ul>
      <li>nÍ∞úÏùò process ÏÉÅÌô©ÏúºÎ°ú ÌôïÏû•ÌïòÍ∏∞Í∞Ä Ïñ¥Î†§ÏõÄ</li>
      <li>Very difficult to expand to more than 2 processes</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="petersons-solution-cont">Peterson‚Äôs Solution (Cont.)</h2>

<ul>
  <li>
    <p>to enter the CS, process Pi first sets flag[i] to be true and then sets turn to value j , thereby asserting that if the other process wishes to enter CS it can do so.</p>

    <ul>
      <li>Îì§Ïñ¥Í∞ÄÍ≥† Ïã∂Îã§Îäî ÏùòÏÇ¨ ÌëúÏãúÎäî ÌïòÏßÄÎßå turnÏùÄ ÏÉÅÎåÄÎ∞©ÏóêÍ≤å ÏñëÎ≥¥</li>
    </ul>
  </li>
  <li>
    <p>Provable that the three CS requirement are met:</p>

    <ol>
      <li>
        <p>Mutual exclusion is preserved 
Pi enters CS only if: 
either <code class="language-plaintext highlighter-rouge">flag[j] = false or turn = i </code></p>
      </li>
      <li>
        <p>Progress requirement is satisfied</p>
      </li>
      <li>
        <p>Bounded-waiting requirement is met</p>

        <p>Pi will enter CS (progress) after at most one entry by Pj</p>
      </li>
    </ol>
  </li>
</ul>

<p><br /></p>

<h2 id="multiple-process-solution-bakery-algorithm">Multiple-Process Solution: Bakery Algorithm</h2>

<p>Critical section <strong>for n processes</strong></p>

<ul>
  <li>Before entering its critical section, process <strong>receives a number</strong>.
    <ul>
      <li>Holder of the smallest number enters the critical section.</li>
      <li>Í∞ÄÏû• ÏûëÏùÄ Ïà´ÏûêÎ•º Í∞ÄÏßÑ Ïï†Í∞Ä Îì§Ïñ¥Í∞ê</li>
    </ul>
  </li>
  <li>If processes Pi and Pj receive the same number, if i &lt; j, then Pi is  served first; else Pj is served next .
    <ul>
      <li>Ïù¥ Î≤àÌò∏Îì§ÏùÄ uniqueÌïú Î≤àÌò∏Í∞Ä ÏïÑÎãàÍ∏∞ ÎïåÎ¨∏Ïóê Î¨∏Ï†úÍ∞Ä ÏÉùÍπÄ!</li>
      <li>ÎßåÏïΩ Í∞ôÏùÄ numberÎ•º Î∂ÄÏó¨ Î∞õÏúºÎ©¥ pidÍ∞Ä Îçî ÏûëÏùÄ Ïï†Í∞Ä Îì§Ïñ¥Í∞à Í∂åÎ¶¨Í∞Ä Ï£ºÏñ¥Ïßê.</li>
    </ul>
  </li>
  <li>The numbering scheme always generates numbers in increasing order of enumeration; i.e., 1,2,3,3,3,3,4,5‚Ä¶
    <ul>
      <li>Ïôú ÎòëÍ∞ôÏùÄ Î≤àÌò∏Î•º Î∞õÎäî ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏÉùÍ∏∏Íπå‚Ä¶?</li>
      <li>Ïù¥ Í≤ΩÏö∞ pidÍ∞Ä ÏûëÏùÄ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Îì§Ïñ¥Í∞ÄÎäî Í≤ÉÏúºÎ°ú Ìï¥Í≤∞</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="bakery-algorithm-contÏ§ëÏöî">Bakery Algorithm (Cont.)(Ï§ëÏöî)</h2>

<p><strong>ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä NÍ∞úÏùº ÎïåÎèÑ ÎßåÏ°±ÌïòÎäî ÏïåÍ≥†Î¶¨Ï¶ò</strong></p>

<ul>
  <li>
    <p>Notation &lt;= lexicographical order (<strong>ticket #, process id #</strong>)</p>

    <ul>
      <li>(a,b) &lt; (c,d) if a &lt; c or if a = c and b &lt; d</li>
      <li>max (a<sub>0</sub> ,‚Ä¶, a<sub>n-1</sub> ) is a number, k, such that k &gt;= a<sub>i</sub> for i - 0,‚Ä¶, n ‚Äì 1</li>
    </ul>
  </li>
  <li>
    <p>Shared data</p>

    <p><strong>var</strong> choosing: <strong>array</strong> [0..n ‚Äì 1] <strong>of</strong> boolean;  ‚Äì&gt; Î≤àÌò∏ÌëúÎ•º Ìï†Îãπ Î∞õÍ≥† ÏûàÎäî ÏÉÅÌÉú
		number: <strong>array</strong> [0..n ‚Äì 1] <strong>of</strong> integer,</p>

    <p>Data structures are initialized to <strong>false</strong> and <strong>0</strong> respectively</p>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002204837783.png" alt="image-20221002204837783" /></p>

<ul>
  <li>
    <p>i, jÎäî pid</p>
  </li>
  <li>ÌïòÏßÄÎßå Î≥¥Î©¥ ÏïåÍ≤†ÏßÄÎßå entry sectionÏù¥ ÎÑàÎ¨¥ Î≥µÏû°Ìï®
    <ul>
      <li>ÏÇ¨Ïö©ÏûêÍ∞Ä ÌïòÎäî Í≤ÉÏùÄ ÏÇ¨Ïã§ÏÉÅ Î∂àÍ∞ÄÎä•</li>
    </ul>
  </li>
  <li>Îëê Î≤àÏß∏ Î¨∏Ïû•Ïù¥ atomicÌïòÏßÄ ÏïäÏïÑÏÑú(Î≤àÌò∏Ìëú ÎΩëÎäî Î¨∏Ïû• - number[i] = max ‚Ä¶.) ÎèôÏùºÌïú Î≤àÌò∏Í∞Ä Î∞úÎ∂Ä ÎêòÎäî Í≤É
    <ul>
      <li>Í∑∏Îü¨ÎÇò Í∞ôÏùÄ Î≤àÌò∏Î•º Î∞úÍ∏âÎ∞õÏßÄ Î™ªÌï¥Ïïº ÌïúÎã§.</li>
    </ul>
  </li>
  <li>Í∞ôÏùÄ Î≤àÌò∏Î©¥ pidÍ∞Ä ÏûëÏùÄ Ïï†Î•º Ï∞æÏùå(loopÎ•º ÎèåÎ©¥ÏÑú)</li>
  <li>Îß® ÏúÑ ÏÑ∏ Î¨∏Ïû•ÏùÑ Ïã§ÌñâÏãúÌÇ§Í≥† ÏûàÎäî Ïï†Îì§ÏùÄ
    <ul>
      <li>choosing numberÍ∞Ä falseÍ∞Ä ÏïÑÎãàÎùºÎ©¥(Ï¶â trueÎùºÎ©¥) Î∞úÍ∏â Î∞õÎäî Ï§ëÏù∏ Ïï†Ïù∏ Í≤ÉÏù¥Îã§.</li>
    </ul>
  </li>
  <li>number[i] = 0
    <ul>
      <li>Î∞úÎ∂Ä Î∞õÏùÄ Î≤àÌò∏ÌëúÎ•º Î∞òÎÇ©ÌñàÍ±∞ÎÇò ÏïÑÏßÅ Î≤àÌò∏ÌëúÎ•º Î∞õÏßÄ Î™ªÌïú ÏÉÅÌÉú(ÏûÑÍ≥Ñ ÏòÅÏó≠Ïóê Îì§Ïñ¥Í∞ÄÏßÄ ÏïäÍ≤†Îã§Îäî ÏùòÎØ∏)</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>1) MTX requirement is met 
   consider Pi in its CS and Pk trying to enter CS. 
   when Pk executes the second while statement for j==1, it finds  that</p>
<ul>
  <li>number[j] ‚â† 0</li>
  <li>(number[j], j) &lt; (number[i], i) 
2) Progress Requirement is met</li>
  <li>critical section Î∞ñÏóê ÏûàÎäî ÌîÑÎ°úÏÑ∏Ïä§Ïùò number[i]Îäî 0Ïù¥Îã§. lexical orderÏóê ÏùòÌï¥ÏÑú ÎàÑÍµ∞Í∞Ä ÌïòÎÇòÎäî CSÏóê Îì§Ïñ¥Í∞ÄÍ≤å ÎêúÎã§.</li>
  <li>Í∑∏ÎûòÏÑú CSÏóê ÏïÑÎ¨¥ÎèÑ ÏóÜÎäîÎç∞ Î™ªÎì§Ïñ¥Í∞ÄÎäî Í≤ΩÏö∞Îäî ÏûàÏùÑ Ïàò ÏóÜÏùå.
3) Bounded-waiting Requirement - ensures fairness - process enters CS on FCFS basis</li>
  <li>Îä¶Í≤å Ïò® ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Î®ºÏ†Ä Îê† ÏàòÎèÑ ÏûàÍ∏¥ÌïòÏßÄÎßå Î≤àÌò∏Ìëú + pidÏóê ÏùòÌï¥ÏÑú ÏûÖÏû•ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê</li>
</ul>

<p><br /></p>

<hr />

<p>petersonÍ≥º bakeryÎäî FCFSÍ∞Ä Î≥¥Ïû•ÎêòÏßÄ ÏïäÏùå</p>

<ul>
  <li>CPU busy waiting ÎïåÎ¨∏Ïóê(Î®ºÏ†Ä ÏôîÎã§Í≥† Î®ºÏ†Ä Ïã§ÌñâÎêúÎã§Îäî Î≥¥Ïû•Ïù¥ ÎêòÏßÄ ÏïäÏùå)</li>
</ul>

<hr />

<h2 id="reordering-of-instructions---xxxx">Reordering of instructions - XXXX</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221118124543252.png" alt="image-20221118124543252" /></p>

<ul>
  <li>Ïª¥ÌååÏùºÎü¨Í∞Ä code optimization(ÏΩîÎìúÏùò Ïã§ÌñâÏÜçÎèÑÎ•º Îπ†Î•¥Í≤å ÌïòÍ∏∞ ÏúÑÌï¥ ÌÅ¨Í≤å Î¨∏Ï†úÍ∞Ä ÏóÜÎã§Í≥† ÌåêÎã®ÌïòÎ©¥ Î¨∏Ïû• ÏàúÏÑúÎ•º Î∞îÍæ∏Îäî Í≤É, Ï¶â reordering) ÏùÑ ÏßÑÌñâ.</li>
  <li>Ï¢ãÏùÑÎùºÍ≥† instruction reorderingÏùÑ ÌïòÏßÄÎßå ÏòàÍ∏∞Ïπò ÏïäÏùÄ ÏÉÅÌô©Ïù¥ ÏùºÏñ¥ÎÇ† Ïàò ÏûàÏùå(ÎèôÍ∏∞Ìôî Î¨∏Ï†ú)
    <ul>
      <li>dependencyÏóê ÏùòÌï¥</li>
    </ul>
  </li>
  <li>Í∑∏ÎûòÏÑú memory_barrier();
    <ul>
      <li>flagÍ∞íÏù¥ x Í∞íÏù¥ Î∞îÎÄåÍ∏∞ Ï†ÑÏóê Î∞îÎÄåÎ©¥ ÏïàÎêòÍ≤åÎÅî - Ï¶â reorderingÏù¥ ÎêòÏßÄ ÏïäÍ≤å Ìï¥ Ï§ÄÎã§.</li>
      <li>reorderingÏù¥ ÎêòÏßÄ ÏïäÍ∏∞Î•º ÏõêÌïòÎäî instruction ÏÇ¨Ïù¥Ïóê Íª¥Ï§ÄÎã§.</li>
    </ul>
  </li>
  <li>Í∑∏ÎûòÏÑú ÏÇ¨Ïö©ÏûêÎäî Ïù¥Îü∞ Í≤ΩÏö∞ÍπåÏßÄ Í≥†Î†§Ìï¥Ïïº ÎêòÎØÄÎ°ú ÍµâÏû•Ìûà Í≥®Ïπò ÏïÑÌîî.</li>
  <li>ÎßåÏïΩ ÏúÑ ÏòàÏ†úÏóêÏÑú thread 2Ïùò ÏàúÏÑúÎ•º Î∞îÍæ∏ÏßÄ ÏïäÎäîÎã§Î©¥ 100Ïù¥ Ï∂úÎ†• ÎêòÍ≤†ÏßÄÎßå ÏàúÏÑúÎ•º Î∞îÍæºÎã§Î©¥ flagÎ•º trueÎ°ú Î∞îÍæ∏Ïñ¥ Î≤ÑÎ†§ Í∏∞Ï°¥ Í∞íÏù∏ 0ÏùÑ Ï∂úÎ†•ÌïòÍ≥† Í∑∏ ÌõÑÏóê xÍ∞íÏù¥ 100ÏúºÎ°ú Î∞îÎÄêÎã§.
    <ul>
      <li>Ïù¥Îäî Î∂ÑÎ™ÖÌûà Î¨∏Ï†úÍ∞Ä ÏûàÎäî Í≤ΩÏö∞Ïù¥Îã§. -&gt; reorderingÏùÑ ÌïòÎ©¥ ÏïàÎê®</li>
    </ul>
  </li>
  <li>reorderingÏùÑ ÌïòÎ†§Î©¥ ÌïòÍ∏∞ Ï†ÑÍ≥º ÌõÑÏùò Í≤∞Í≥ºÍ∞Ä Î∞òÎìúÏãú Í∞ôÏùåÏùÑ Î≥¥Ïû•Ìï¥Ïïº Ìï®!</li>
  <li>memory_barrier() : instruction reorderingÏùÑ Î™ªÌïòÎèÑÎ°ù</li>
</ul>

<p><br /></p>

<h2 id="hardware-support-for-synchronization-memory-barrier---xxxx">Hardware Support for Synchronization: Memory barrier - XXXX</h2>

<ul>
  <li>Memory model
    <ul>
      <li>Strongly ordered
        <ul>
          <li>Where a memory modification on one processor is immediately visible to all other processors</li>
        </ul>
      </li>
      <li>Weakley ordered
        <ul>
          <li>Where a memory modification on one processor may not be immediately visible to all other processors</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Memory model vary by processor type
    <ul>
      <li>Kernel can not make any assumption regarding the visibility of modification of memory on a shared memory multiprocessor</li>
    </ul>
  </li>
  <li><strong>Memory barriers</strong> or <strong>memory fences</strong> instruction
    <ul>
      <li>Ensure that memory modifications are visible to threads running on other processors</li>
      <li>When they are executed, it ensures that all loads and stores are completed before any subsequent loads or stores are performed</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="effects-of-instruction-reordering---xxxx">Effects of Instruction reordering - XXXX</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221118151759725.png" alt="image-20221118151759725" /></p>

<ul>
  <li>instruction reorderingÏùÑ ÌïòÎ©¥ Î¨¥Ïä®ÏùºÏù¥ Î≤åÏñ¥ÏßÄÎäî ÏßÄ</li>
</ul>

<p><br /></p>

<h2 id="synchronization-hardware">Synchronization Hardware</h2>

<ul>
  <li>Many systems provide hardware support for implementing the critical section code.</li>
  <li>All solutions below based on idea of <strong>locking</strong>
    <ul>
      <li>Protecting critical regions via locks</li>
    </ul>
  </li>
  <li>Uniprocessors ‚Äì could disable interrupts
    <ul>
      <li>Currently running code would execute without preemption</li>
      <li>Generally too inefficient on multiprocessor systems
        <ul>
          <li>Operating systems using this not broadly scalable</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Modern machines provide special atomic hardware instructions
    <ul>
      <li>Atomic = non-interruptable</li>
      <li>Either test memory word and set value</li>
      <li>Or swap contents of two memory words</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="solution-to-critical-section-problem-using-locks">Solution to Critical-section Problem Using Locks</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205101587.png" alt="image-20221002205101587" /></p>

<p><br /></p>

<h2 id="test_and_set-instruction">test_and_set Instruction</h2>

<ul>
  <li>
    <p>Test and modify the content of a word atomically.</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205126651.png" alt="image-20221002205126651" /></p>
  </li>
  <li>ÏúÑÎäî atomicÌïòÏßÄ ÏïäÏùå. but hardwareÎ°ú Íµ¨ÌòÑÎêòÏñ¥ ÏûàÍ∏∞ ÎñÑÎ¨∏Ïóê interruptÍ∞Ä Í±∏Î¶¨ÏßÄ ÏïäÎäîÎã§.</li>
  <li>Executed atomically (Non-interruptible)</li>
  <li>Returns the original value of passed parameter (lock)</li>
  <li>Set the new value of passed parameter to ‚ÄúTRUE‚Äù.</li>
  <li>
    <p>If multiple processes attempting to execute instruction, first successful  process will have value false returned to it</p>
  </li>
  <li>return Í∞íÏù¥ ÌÜµÍ≥ºÍ∞ÄÎä• ÌÜµÍ≥º Î∂àÍ∞ÄÎä•ÏùÑ Í≤∞Ï†ï</li>
</ul>

<p><br /></p>

<h2 id="solution-using-test_and_set---Ï§ëÏöî">Solution using test_and_set() - Ï§ëÏöî</h2>

<ul>
  <li>
    <p>Shared Boolean variable lock, initialized to FALSE</p>
  </li>
  <li>
    <p>Solution:</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205221103.png" alt="image-20221002205221103" /></p>

    <ul>
      <li>test_and_setÏùÑ Ïì∞Î©¥ Î≥µÏû°ÌïòÍ≤å Ïì∞Îçò entry section ÏΩîÎìúÏôÄ Îã§Î•¥Í≤å Ìïú Ï§ÑÏù¥Î©¥ ÎÅùÎÇúÎã§.
        <ul>
          <li>test_and_setÏù¥ trueÏù¥Î©¥ do nothingÏùÑ Ïã§ÌñâÌïòÎØÄÎ°ú lockÏù¥ Í±∏Î¶¨Í≤å ÎêúÎã§.</li>
        </ul>
      </li>
      <li>hardwareÍ∞Ä ÏßÅÏ†ë Ìï¥ Ï£ºÍ≤†Îã§.</li>
      <li>mutual exclusion Î≥¥Ïû•, progressÎèÑ Î≥¥Ïû•, but bouned waitingÏùÄ Î≥¥Ïû• X</li>
    </ul>
  </li>
  <li>It works fine</li>
  <li>Problem:
    <ul>
      <li>fairness (starvation) ‚Äì no bounded waiting (Ìïú ÎÜàÏù¥ Í≥ÑÏÜç Ïû°ÏùÑ Í∞ÄÎä•ÏÑ±Ïù¥ ÏûàÏùå.)</li>
      <li>Waste CPU cycle
        <ul>
          <li>CPU cycles to check test&amp;set routine</li>
          <li>CPUÏóê ÏùòÌï¥ Ï†Ä Î¨∏Ïû•Ïù¥ Í≥ÑÏÜç Ïã§ÌñâÎê®(useless) - CPU ÏãúÍ∞Ñ ÎÇ≠ÎπÑ</li>
          <li>CPU busy waiting!! -&gt; Í∏∞Îã§Î¶¨ÎäîÎç∞ CPUÎ•º Î∞îÏÅòÍ≤å ÎßåÎìúÎäî Í≤É, Ïì∏Îç∞ ÏóÜÏù¥</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><mark>**Ïôú test_and_setÏùÄ no bounded waiting Î¨∏Ï†úÍ∞Ä ÏùºÏñ¥ÎÇòÎäîÍ∞Ä?</mark></p>

<ul>
  <li>ÏÇ¨Ïö©ÏûêÍ∞Ä Ïß† ÌîÑÎ°úÍ∑∏Îû®Ïù¥Í∏∞ ÎïåÎ¨∏Ïóê while Î¨∏Ïû•</li>
  <li>ÎÇ¥Í∞Ä Î®ºÏ†Ä whileÎ¨∏Ïû•Ïóê Îì§Ïñ¥Í∞îÎã§Í≥† ÎÇò Îã§ÏùåÏóê whileÎ¨∏Ïóê Îì§Ïñ¥ÏôÄÏÑú lockÏù¥ Í±∏Î¶∞ Ïï†Îì§Ïù¥ Ï§ÑÏùÑ ÏÑúÍ≥† ÏûàÏùÑ Îïå Ïñ¥Îñ§ Ïï†Í∞Ä Î®ºÏ†Ä ÌïúÎã§Îäî Î≥¥Ïû•Ïù¥ ÏûàÎäîÍ∞Ä? -&gt; No
    <ul>
      <li>ÎàÑÍ∞Ä Î®ºÏ†Ä ÎèÑÏ∞©ÌñàÎã§Í≥† Í∏∞Î°ùÎêòÎäî Í≤ÉÏù¥ ÏóÜÍ∏∞ ÎïåÎ¨∏,</li>
      <li>ÏµúÏïÖÏùò Í≤ΩÏö∞ Í≥ÑÏÜç Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌï† Ïàò ÏûàÏùå</li>
      <li>ÏïÑÎ¨¥Î¶¨ Ïò§Îûò Í∏∞Îã§Î†∏Ïñ¥ÎèÑ Í≥ÑÏÜç Î™ªÎì§Ïñ¥Í∞à ÏàòÎèÑ ÏûàÎã§.</li>
    </ul>
  </li>
</ul>

<p>ÌîºÌÑ∞Ïä®, Î≤†Ïù¥Ïª§Î¶¨ - ÏßÅÏ†ë</p>

<p>ÌïòÎìúÏõ®Ïñ¥Ïùò ÎèÑÏõÄ - swap</p>

<p>OSÏùò ÎèÑÏõÄ - semaphore</p>

<p><br /></p>

<h2 id="compare_and_swap-instruction---xxxx">compare_and_swap Instruction - XXXX</h2>

<p>Íµ¨ÌòÑ ÎÇ¥Ïö©Îßå Îã§Î•¥Í≥† ÎèôÏûëÏùÄ test_and_setÍ≥º Í±∞Ïùò ÎèôÏùºÌï®.</p>

<p>Definition:</p>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205311507.png" alt="image-20221002205311507" /></p>

<ul>
  <li>Executed atomically</li>
  <li>Returns the original value of passed parameter ‚Äúvalue‚Äù</li>
  <li>Set the variable ‚Äúvalue‚Äù the value of the passed parameter ‚Äúnew_value‚Äù but  only if ‚Äúvalue‚Äù ==‚Äúexpected‚Äù. That is, the swap takes place only under this  condition.</li>
</ul>

<p><br /></p>

<h2 id="solution-using-compare_and_swap---xxxx">Solution using compare_and_swap - XXXX</h2>

<ul>
  <li>Shared integer ‚Äúlock‚Äù initialized to 0;</li>
  <li>Solution:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205409806.png" alt="image-20221002205409806" /></p>

<ul>
  <li>Problem:
    <ul>
      <li>fairness (starvation) ‚Äì no bounded waiting</li>
      <li>Waste CPU cycle</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="bounded-waiting-mutual-exclusion-with-test_and_set">Bounded-Waiting Mutual Exclusion with Test_and_Set</h2>

<p>Ï§ëÏöî</p>

<p>test_and_setÏùÄ entry sectionÏù¥ flagÎ•º falseÎ°ú Î∞îÍøîÏ£ºÎäî Í≤ÉÏúºÎ°ú ÎÅùÎÇ¨ÏßÄÎßå ÏïÑÎûò ÏΩîÎìúÎäî bounded waitingÏùÑ Î≥¥Ïû•ÌïòÍ∏∞ ÏúÑÌïòÎã§ Î≥¥Îãà ÏΩîÎìúÍ∞Ä ÍµâÏû•Ìûà Î≥µÏû°Ìï¥Ïßê</p>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205506699.png" alt="image-20221002205506699" /></p>

<ul>
  <li>Shared data (initialized to false):</li>
  <li>boolean lock;</li>
  <li>boolean waiting[n];</li>
  <li>Satisfies all the CS requirements</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ---- 1. Í∞ÅÍ∞ÅÏùò ÌîÑÎ°úÏÑ∏Ïä§Îì§Ïù¥ Ìï¥Îãπ ÏΩîÎìúÏóê ÏßÑÏûÖÌïòÍ≤å ÎêòÎ©¥ Í∞Å ÌîÑÎ°úÏÑ∏Ïä§Ïùò Ìï¥ÎãπÌïòÎäî waiting Î∞∞Ïó¥Ïùò Í∞íÏùÑ TRUEÎ°ú Î∞îÍøàÏúºÎ°úÏç®
Critical SectionÏóê Îì§Ïñ¥Í∞à Ï§ÄÎπÑÍ∞Ä ÎêêÎã§Îäî Í≤ÉÏùÑ ÏùòÎØ∏Ìï©ÎãàÎã§. ÏòàÎ•º Îì§Ïñ¥ P0, P2, P4, P5Í∞Ä ÏßÑÏûÖÌïòÏó¨ Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÎã§Í≥† ÌïòÍ≥†
Í∑∏Ï§ëÏóê P2Í∞Ä Í∞ÄÏû• Î®ºÏ†Ä ÎèÑÏ∞©ÌñàÎã§Í≥† Í∞ÄÏ†ïÌï¥Î¥ÖÏãúÎã§.

// ---- 2. P2Í∞Ä Î®ºÏ†Ä ÎèÑÏ∞©ÌïòÏó¨ while Î¨∏ÏùÑ Îì§Ïñ¥Í∞ÄÍ≤å ÎêòÎ©¥ TestAndSet Ìï®ÏàòÎ•º ÌÜµÌï¥ lockÏùÑ ÏñªÍ≥† P2Îäî ÏßÑÏûÖÌïúÎã§Îäî ÏùòÎØ∏Î°ú waiting Î∞∞Ïó¥Ïùò Í∞íÏùÑ FALSEÎ°ú Î∞îÍøî Ï§Ä ÌõÑ Critical SectionÏóê ÏßÑÏûÖÌïòÍ≥† ÎÇòÎ®∏ÏßÄ ÌîÑÎ°úÏÑ∏Ïä§Îì§ÏùÄ lockÏù¥ TRUEÎ°ú Ïù∏Ìïú TestAndSetÏùò Î∞òÌôòÍ∞íÏù¥ TRUEÏù¥ÎØÄÎ°ú Í≥ÑÏÜçÌï¥ÏÑú while Î¨∏ÏóêÏÑú ÎåÄÍ∏∞ÌïòÍ≤å Îê©ÎãàÎã§.

// ---- 3. P2Í∞Ä Critical SectionÏùÑ ÏàòÌñâÌïòÍ≥† ÏûêÍ∏∞ Î≥¥Îã§ ÌÅ∞ Î≤àÌò∏Ïùò ÌîÑÎ°úÏÑ∏Ïä§Îì§ Ï§ë Í∞ÄÏû• ÏûëÏùÄ ÌîÑÎ°úÏÑ∏Ïä§Î•º ÏÑ†ÌÉùÌïòÍ≤å Îê©ÎãàÎã§. iÎäî ÌòÑÏû¨ 2Ïù¥Í≥† Î∞∞Ïó¥Ïùò ÌÅ¨Í∏∞Îäî 7Ïù¥Í∏∞ ÎïåÎ¨∏Ïóê jÏùò Í∞íÏùÄ 3Ïù¥ ÎêòÍ≤å Îê©ÎãàÎã§. ÌïòÏßÄÎßå P3ÏùÄ Ï§ÄÎπÑÍ∞Ä ÎêòÏñ¥ ÏûàÏßÄ ÏïäÏùÄ ÏÉÅÌÉúÏù¥Í∏∞ ÎïåÎ¨∏Ïóê Îã§Ïãú ÌïúÎ≤à while Î¨∏ ÏïàÏúºÎ°ú Îì§Ïñ¥Í∞Ä Îã§Ïùå ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ï§ÄÎπÑÎêòÏñ¥ ÏûàÎäîÏßÄÎ•º Í≤ÄÏÇ¨ÌïòÍ≤å Îê©ÎãàÎã§. Í∑∏Î¶¨ÌïòÏó¨ jÎäî 4Í∞Ä ÎêòÏñ¥ P4Í∞Ä ÏÑ†ÌÉùÎêòÍ≥† waiting[j]Í∞Ä FALSEÍ∞Ä ÎêòÍ∏∞ ÎïåÎ¨∏Ïóê P4Îäî 2Î≤àÏùò while Î¨∏ÏùÑ Î≤óÏñ¥ÎÇò Critical SectionÏùÑ Îì§Ïñ¥Í∞ÄÍ≤å Îê©ÎãàÎã§. Ïù¥Îü∞ ÏãùÏúºÎ°ú Î™®Îì† waiting Î∞∞Ïó¥Ïùò Í∞íÏù¥ FALSEÍ∞Ä ÎêòÏñ¥ Ï†ÑÎ∂Ä ÌÜµÍ≥ºÎêòÏóàÎã§Î©¥ ÎßàÏßÄÎßâ ÌîÑÎ°úÏÑ∏Ïä§Ïùò Ï∞®Î°ÄÏóêÏÑúÎäî iÏôÄ jÍ∞Ä Í∞ôÏïÑÏßÄÍ≤å Îê©ÎãàÎã§. Í∑∏Î†áÍ≤å ÎêòÎ©¥ ÏÑúÎ°ú ÎèåÎ†§Í∞ÄÏßÄÎçò lockÏùÑ ÏµúÏ¢Ö Î∞òÎÇ©ÌïòÍ≥† Î™®Îëê Critical SectionÏùÑ Î≤óÏñ¥ÎÇòÍ≤å Îê©ÎãàÎã§.
</code></pre></div></div>

<ol>
  <li>
    <p>MTX</p>

    <ul>
      <li>
        <p>Pi can enter CS only if either  waiting[i] == false or key == false</p>
      </li>
      <li>Value of key can become false only if  testAndSet is executed</li>
      <li>waiting[i] can become false only if  another process leaves CS</li>
      <li>-&gt; Only one waiting[i] can become  false</li>
    </ul>
  </li>
  <li>
    <p>Progress Requirement</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205639849.png" alt="image-20221002205639849" /></p>
  </li>
</ol>

<ul>
  <li>a process exiting CS either sets lock to false, or sets  waiting[j] to false to allow a process that is waiting to enter CS to proceed</li>
</ul>

<ol>
  <li>
    <p>Bounded-waiting Requirement</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205716160.png" alt="image-20221002205716160" /></p>
  </li>
</ol>

<ul>
  <li>any process waiting to enter CS will do so within n-1 times</li>
</ul>

<p><br /></p>

<h2 id="mutex-locks">Mutex Locks</h2>

<p>userÎèÑ bounded waiting Î≥¥Ïû•Ïù¥ ÏïàÎêòÍ≥† HWÎèÑ not badÏù¥ÏßÄÎßå Í∑∏ÎÉ• Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê <strong>OSÏùò</strong> ÎèÑÏõÄÏùÑ Ìïú Î≤à Î∞õÏïÑÎ≥ºÍπå?</p>

<ol>
  <li>Mutex_lock</li>
  <li>semaphore</li>
  <li>monitor</li>
</ol>

<ul>
  <li>Previous solutions are complicated and generally inaccessible to  application programmers</li>
  <li>OS designers build software tools to solve critical section problem</li>
  <li>Simplest is mutex lock</li>
  <li>Product critical regions with it by first <strong>acquire()</strong> a lock then <strong>release()</strong> it
    <ul>
      <li>Boolean variable indicating if lock is available or not</li>
    </ul>
  </li>
  <li>Calls to acquire() and release() must be atomic
    <ul>
      <li>Usually implemented via hardware atomic instructions</li>
    </ul>
  </li>
  <li>But this solution requires <strong>busy waiting</strong>  - ÏôÑÏ†Ñ Ï§ëÏöî
    <ul>
      <li>This lock therefore called a <strong>spinlock</strong></li>
      <li>Good locking mechanism used in multiprocessor system when lock is held for a short duration (duration of less than 2 context switches)</li>
      <li>mutex lockÎèÑ ÏÇ¨Ïã§ÏÉÅ semaphoreÏù∏Îç∞ CPU busy waiting ÌïòÎäî semaphoreÎ•º spin lockÏù¥ÎùºÍ≥† ÌïúÎã§.</li>
      <li>lockÏù¥ Í∏àÎ∞© ÌíÄÎ¶¨Îäî Í≤ΩÏö∞ÏóêÎäî original semaphoreÎ•º Ïì∞Í≤å ÎêòÎ©¥ context swtichÍ∞Ä ÎßéÏù¥ ÏùºÏñ¥ÎÇò overheadÍ∞Ä ÌÅ¨Îã§.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="acquire-and-release">acquire() and release()</h2>

<p>ÏÇ¨Ïö©Ïûê ÏΩîÎìú Í∏∞Î∞òÏóêÏÑú critical sectionÏùÑ Îì§Ïñ¥Í∞à Ïàò ÏûàÎäîÏßÄ ÏóÜÎäîÏßÄÎ•º ÌåêÎã®ÌïòÎäî Í≤ÉÏùÄ OSÍ∞Ä Ìï† ÏàòÎèÑ, H/WÍ∞Ä Ìï† ÏàòÎèÑ ÏûàÏùå.</p>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002205926375.png" alt="image-20221002205926375" /></p>

<ul>
  <li>
    <p>lockÏù¥ Ïù¥ÎØ∏ Í±∏Î†§ ÏûàÏúºÎ©¥ Ï¶â, not availableÏù¥Î©¥ Í∏∞Îã§Î¶∞Îã§.</p>
  </li>
  <li>
    <p>ÎÇ¥Í∞Ä lockÏùÑ ÌöçÎìùÌïòÎ©¥ Îã§Ïãú availableÏùÑ falseÎ°ú Î∞îÍæ∏Í≥† Îì§Ïñ¥Í∞ÄÎäî Í±∞Í≥†, ÌöçÎìùÌïòÏßÄ Î™ªÌïòÎ©¥ Í∏∞Îã§Î¶¨Í≥†,ÎßàÏßÄÎßâÏúºÎ°ú ÎÇòÍ∞à ÎïåÎäî Îã§Ïãú lockÏùÑ Î∞òÎÇ©</p>
  </li>
  <li>
    <p>Í∑∏Î†áÎã§Î©¥ Ï∞®Ïù¥Îäî?</p>

    <ul>
      <li>
        <p>test_setÏùÄ hardwareÎ°ú Íµ¨ÌòÑ</p>
      </li>
      <li>
        <p>mutex lockÏùÄ OS ÏΩîÎìúÎ°ú Íµ¨ÌòÑÌïú software</p>
      </li>
    </ul>
  </li>
  <li>available ÌïòÎ©¥ Îì§Ïñ¥Í∞ÄÍ≥† available = falseÍ∞Ä Îê®. -&gt; CPU busy waiting
    <ul>
      <li>Îã§Î•∏Ïï†Í∞Ä Î™ªÎì§Ïñ¥ Í∞ÄÎèÑÎ°ù false</li>
      <li>CPU timeÏùÑ Ìï†Ïï†ÌïòÎ©¥ÏÑú availableÏù¥ trueÍ∞Ä Îê† ÎïåÍπåÏßÄ Í∏∞Îã§Î¶º</li>
      <li>critical sectionÏùÑ Î∞îÎ°ú Îì§Ïñ¥Í∞ÄÏßÄ Î™ªÌïòÎ©¥ busy waiting(?)</li>
    </ul>
  </li>
  <li>test_and_setÎ≥¥Îã§ Îçî Ï¢ãÏßÄ ÏïäÏßÄÎßå Í∑∏ÎüºÏóêÎèÑ Ï†úÍ≥µÌïòÎäî Ïù¥Ïú†?</li>
  <li>acquire Ìï®ÏàòÍ∞Ä atomicÌïòÍ≤å Ïã§ÌñâÎê®</li>
</ul>

<p><br /></p>

<h2 id="semaphore">Semaphore</h2>

<p>ÏñòÎäî CPU timeÏùÑ ÎÇ≠ÎπÑÌïòÏßÄ ÏïäÏùå - CPU busy waitingÏùÑ ÌïÑÏöîÎ°ú ÌïòÏßÄ ÏïäÎäî locking mechanism</p>

<ul>
  <li>
    <p>Synchronization tool that provides more sophisticated ways (than Mutex locks) for  process to synchronize their activities.</p>
  </li>
  <li>
    <p>Each process must perform operations on semaphore before entering its own CS</p>

    <ul>
      <li>Spinlock : no context switch required</li>
      <li>When locks are expected to be held for short times, spinlocks are useful</li>
    </ul>
  </li>
  <li>
    <p>Semaphore <strong>S</strong> ‚Äì integer variable</p>
  </li>
  <li>
    <p>Can only be accessed via two indivisible (atomic) operations</p>

    <ul>
      <li><strong>wait() (acquire)</strong> and <strong>signal()</strong>(release)
        <ul>
          <li>Originally called <strong>P()</strong> and <strong>V()</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Definition of the <strong>wait() operation</strong></p>

    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">while</span> <span class="p">(</span><span class="n">S</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// busy wait</span>
    <span class="n">S</span><span class="o">--</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Definition of the <strong>signal() operation</strong></p>

    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">signal</span><span class="p">(</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">S</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>SÍ∞Ä lock</p>

<p>SÍ∞íÏùÑ Ï¥àÍ∏∞Ïóê 1Î°ú Ìï¥Ïïº Ï≤òÏùåÏóêÎäî Îì§Ïñ¥Í∞ÄÍ≥† 1Ïù¥ Í∞êÏÜåÌïòÏó¨ Í∑∏ Îã§ÏùåÏóê Îì§Ïñ¥Ïò§Îäî Ïï†Îì§ÏùÄ busy waiting</p>

<p>Í∑∏Î†áÎã§Î©¥ CPU timeÏùÑ ÎÇ≠ÎπÑÌïòÏßÄ ÏïäÍ≥† Í∏∞Îã§Î¶¥ Ïàò ÏûàÎäî Î∞©Î≤ïÏùÄ ÏóÜÎÇò? -&gt; ÏΩîÎìúÎ•º Ï¢Ä ÏàòÏ†ïÌï¥ Î≥¥Ïûê(Implementation with no Busy waiting ÏΩîÎìú)</p>

<p><br /></p>

<h2 id="semaphore-usage">Semaphore Usage</h2>

<ul>
  <li>
    <p><strong>Counting semaphore</strong> ‚Äì integer value can range over an unrestricted domain (Í∞íÏùò Î≤îÏúÑÏóê Ï†úÌïúÏù¥ ÏóÜÏùå)</p>
  </li>
  <li>
    <p><strong>Binary semaphore</strong> ‚Äì integer value can range only between 0 and 1 (Ïò§ÏßÅ 0 and 1)</p>

    <ul>
      <li>Same as a <strong>mutex lock</strong></li>
    </ul>
  </li>
  <li>
    <p>Can solve various synchronization problems</p>

    <ul>
      <li>
        <p>semaphore ‚Äúmutex‚Äù initialized to 1</p>

        <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002210231403.png" alt="image-20221002210231403" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Consider P<sub>1</sub> and P<sub>2</sub> that require S<sub>1</sub> to happen before S<sub>2</sub></p>

    <p>Create a semaphore ‚Äúsynch‚Äù initialized to 0</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002210337294.png" alt="image-20221002210337294" /></p>
  </li>
  <li>
    <p>Can implement a counting semaphore S as a binary semaphore</p>
  </li>
</ul>

<p><br /></p>

<h2 id="semaphore-implementation">Semaphore Implementation</h2>

<ul>
  <li>Must guarantee that no two processes can execute the <strong>wait()</strong> and  <strong>signal()</strong> on the same semaphore at the same time
    <ul>
      <li>Ìïú semaphoreÏóê ÎåÄÌï¥ÏÑú wait()Ïù¥ ÎÅùÎÇòÏïºÏßÄ ÎßåÏù¥ signal()Ïù¥ Ìò∏Ï∂úÎê† Ïàò ÏûàÏùå</li>
    </ul>
  </li>
  <li>Thus, the implementation becomes the critical section problem where  the wait and signal code are placed in the critical section
    <ul>
      <li>Could now have busy waiting in critical section implementation
        <ul>
          <li>But implementation code is short</li>
          <li>Little busy waiting if critical section rarely occupied</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Note that applications may spend lots of time in critical sections and  therefore this is not a good solution</li>
</ul>

<p><br /></p>

<h2 id="semaphore-implementation-with-no-busy-waiting">Semaphore Implementation with no Busy waiting</h2>

<ul>
  <li>With each semaphore there is an associated waiting queue</li>
  <li>Each entry in a waiting queue has two data items: Íµ¨Ï°∞Ï≤¥ Î≥ÄÏàòÏóê Îã§ÏùåÏùÑ Ìè¨Ìï®
    <ul>
      <li>value (of type integer)</li>
      <li>pointer to next record in the list (queue)</li>
    </ul>
  </li>
  <li>Two operations:
    <ul>
      <li><strong>block</strong> ‚Äì place the process invoking the operation on the appropriate <strong>waiting queue</strong></li>
      <li><strong>wakeup</strong> ‚Äì remove one of processes in the waiting queue and place it in the <strong>ready queue</strong></li>
    </ul>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">process</span> <span class="o">*</span><span class="n">list</span><span class="p">;</span> <span class="o">/*</span> <span class="n">list</span> <span class="n">of</span> <span class="n">process</span><span class="p">(</span><span class="n">waitlist</span><span class="p">)</span> <span class="o">/*</span>
<span class="p">}</span> <span class="n">semaphore</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>linked list
    <ul>
      <li>critical section ÏßÑÏûÖÏùÑ Í∏∞Îã§Î¶¨Îäî ÌîÑÎ°úÏÑ∏Ïä§Îì§Ïùò Î¶¨Ïä§Ìä∏ -&gt; waitlist</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="implementation-with-no-busy-waiting-cont-ÏãúÌóò">Implementation with no Busy waiting (Cont.) ÏãúÌóò!</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wait</span><span class="p">(</span><span class="n">semaphore</span> <span class="o">*</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span><span class="o">--</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">add</span> <span class="n">this</span> <span class="n">process</span> <span class="n">to</span> <span class="n">S</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">;</span> 
        <span class="n">block</span><span class="p">();</span> 
    <span class="p">}</span> 
<span class="p">}</span>
<span class="n">signal</span><span class="p">(</span><span class="n">semaphore</span> <span class="o">*</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span><span class="o">++</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">remove</span> <span class="n">a</span> <span class="n">process</span> <span class="n">P</span> <span class="n">from</span> <span class="n">S</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">;</span> 
        <span class="n">wakeup</span><span class="p">(</span><span class="n">P</span><span class="p">);</span> <span class="cm">/* place P onto ready queue */</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>SÎÇò lockÏùÄ int Î≥ÄÏàòÏòÄÏùå.</li>
  <li>Í∑ºÎç∞ Ïó¨Í∏∞ÏÑúÎäî history logÎ•º Ï†ÄÏû•ÌïòÍ∏∞ ÏúÑÌï¥ÏÑú semaphore Íµ¨Ï°∞Ï≤¥ ÌÉÄÏûÖÏù¥ ÎêúÎã§.</li>
  <li>SÍ∞íÏù¥ 0Î≥¥Îã§ ÏûëÎã§Îäî Í≤ÉÏùÄ ÎÇò ÎßêÍ≥† Îã§Î•∏ Ïï†Í∞Ä Îì§Ïñ¥Í∞Ä ÏûàÎã§Îäî Îúª
    <ul>
      <li>while -&gt; if Î°ú Î∞îÎÄú
        <ul>
          <li>busy waitingÏùÑ ÎßâÍ∏∞ ÏúÑÌï®!</li>
        </ul>
      </li>
      <li>Í∑∏ ÎåÄÏã† linked-listÏùò ÎåÄÍ∏∞ ÏàúÎ≤àÏù¥ ÏßÑÏûÖÏãúÌÇ®Îã§.</li>
      <li>Í∑∏Îü¨Í≥† block ÏãúÌÇ¥ -&gt; Ïôú?
        <ul>
          <li>ÏΩîÎìúÍ∞Ä Ïã§ÌñâÏ§ëÏù∏ Í≤ÉÏù¥ OSÏù∏Îç∞ wait()ÏùÑ Ìò∏Ï∂ú ÏãúÌÇ® ÌîÑÎ°úÏÑ∏Ïä§Î•º block(runnung-&gt; waiting)ÏãúÌÇ§Îäî Í≤É</li>
          <li>bounded waitingÎèÑ Î≥¥Ïû• - FCFS</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>SÍ∞íÏùÄ 1Ïù¥ ÏµúÎåÄÍ∞íÏûÑ, ÎåÄÍ∏∞Îäî Ïó¨Îü¨Î™ÖÏù¥ Ìï† Ïàò ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê -1, -2, -3, ‚Ä¶ Ïù¥ Í∞ÄÎä•Ìï®</li>
  <li>SÍ∞Ä 0Ïù¥ÎùºÎäî Í≤ÉÏùÄ signalÏùÑ Ìò∏Ï∂úÌïú ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ïú†ÏùºÌïòÍ≤å waitÌï®ÏàòÎ•º Ìò∏Ï∂úÌñàÎçò ÌîÑÎ°úÏÑ∏Ïä§ÏòÄÎã§Îäî Îúª</li>
  <li>ÌïòÏßÄÎßå ÏûòÎ™ª ÏÇ¨Ïö©ÌïòÎ©¥ deadlockÏù¥ Í±∏Î¶¥ Ïàò ÏûàÏùå
    <ul>
      <li>entry sectionÏóêÏÑú ÏûòÎ™ª ÏÇ¨Ïö©ÌïòÎ©¥ ÏïÑÎ¨¥ÎèÑ critical sectionÏùÑ ÏßÑÏûÖÌïòÏßÄ Î™ªÌïòÎäî Í≤ΩÏö∞Í∞Ä ÏÉùÍ∏∏ Ïàò ÏûàÏùå</li>
      <li>ÌïòÏßÄÎßå Ï†úÏùº Í∞ïÎ†•Ìïú Î∞©Î≤ï</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="semaphore-as-general-synchronization-toolÏ§ëÏöî">Semaphore as General Synchronization Tool(Ï§ëÏöî)</h2>

<ul>
  <li>Execute B in Pj only after A executed in Pi
    <ul>
      <li>BÎùºÎäî instructionÏùÑ Î∞òÎìúÏãú AÎùºÎäî instruction Ïù¥ÌõÑÏóê Ïã§ÌñâÌïòÎèÑÎ°ù Ï†úÏñ¥ÌïòÍ≥† Ïã∂ÏùÄ Í≤ΩÏö∞</li>
    </ul>
  </li>
  <li>Use semaphore flag initialized to 0</li>
  <li>Code:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002210808139.png" alt="image-20221002210808139" /></p>

<ul>
  <li>AÎäî Í≥ÑÏóêÏóêÏÜç Ìï¥ÏÑú Ï∞çÌûàÏßÄÎßå BÎäî Í∑∏Îü¨ÏßÄ Î™ªÌï®
    <ul>
      <li>wait(flag) - 1ÏóêÏÑú 0ÏúºÎ°ú</li>
      <li>signal(flag) - 0ÏóêÏÑú 1Î°ú</li>
      <li>Í∑∏ÎûòÏÑú AÎäî Î¨¥ÌïúÎåÄ Î∞òÎ≥µÎê† Ïàò ÏûàÏùå</li>
      <li>BÎäî AÍ∞Ä Ïã§ÌñâÎêú ÌõÑ Îî± Ìïú Î≤à Ïã§Ìñâ Í∞ÄÎä•</li>
      <li>BÍ∞Ä Ïó∞ÏÜçÏúºÎ°ú Îëê Î≤à ÎÇòÏò¨ ÏàòÎäî ÏóÜÏùå</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="two-types-of-semaphores">Two Types of Semaphores</h2>

<ul>
  <li>Counting semaphore - integer value can range over an  unrestricted domain.</li>
  <li>Binary semaphore ‚Äì integer value can range only between 0  and 1; can be simpler to implement.</li>
  <li>Can implement a counting semaphore S as a binary semaphore.</li>
</ul>

<p><br /></p>

<h2 id="implementing-s-as-a-binary-semaphore">Implementing S as a Binary Semaphore</h2>

<ul>
  <li>
    <p>Data structures:</p>

    <p>var S1: binary-semaphore;</p>

    <p>S2: binary-semaphore;</p>

    <p>C: integer;</p>
  </li>
  <li>
    <p>Initialization:</p>

    <p>S1 = 1</p>

    <p>S2 = 0</p>

    <p>C = initial value of semaphore S</p>
  </li>
</ul>

<p><br /></p>

<h2 id="implementing-s-cont---Ï§ëÏöî">Implementing S (Cont.) - Ï§ëÏöî</h2>

<ul>
  <li>wait operation</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211023675.png" alt="image-20221002211023675" /></p>

<ul>
  <li>signal operation</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211037875.png" alt="image-20221002211037875" /></p>

<p><br /></p>

<h2 id="problems-with-semaphores">Problems with Semaphores</h2>

<p>semaphore ÏÇ¨Ïö©Ìï† Îïå Ï£ºÏùòÏ†ê</p>

<ul>
  <li>Incorrect use of semaphore operations:
    <ul>
      <li>signal (mutex) ‚Ä¶. wait (mutex)</li>
      <li>wait (mutex) ‚Ä¶ wait (mutex)</li>
      <li>Omitting of wait (mutex) or signal (mutex) (or both)</li>
    </ul>
  </li>
  <li>Deadlock and starvation are possible.</li>
</ul>

<p><br /></p>

<h2 id="monitors">Monitors</h2>

<p>semaphoreÎ≥¥Îã§ ÏÇ¨Ïö©ÌïòÍ∏∞Îäî ÏïÑÏ£º Ìé∏ÌïòÏßÄÎßå semaphoreÎ≥¥Îã§ powerful ÌïòÏßÄÎäî ÏïäÏùå</p>

<ul>
  <li>
    <p><mark>A **Monitor** is an object designed to be accessed from multiple threads.</mark></p>
  </li>
  <li>A high-level abstraction that provides a convenient and effective mechanism for process synchronization</li>
  <li>Abstract data type(like class), internal variables only accessible by code within the procedure
    <ul>
      <li>Ensure mutex at higher level, within monitor
        <ul>
          <li><strong>Only one process at a time</strong> can be executing within monitor</li>
        </ul>
      </li>
      <li>Encapsulates data, procedures to manipulate data into one module</li>
    </ul>
  </li>
  <li>Only one process may be active within the monitor at a time</li>
  <li>But not powerful enough to model some synchronization schemes</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211222031.png" alt="image-20221002211222031" /></p>

<ul>
  <li>
    <p>Î™®ÎãàÌÑ∞ÏóêÎäî p1, p2,.. pnÏù¥ ÏûàÏùÑ Í≤ÉÏûÑ.</p>
  </li>
  <li>Ìïú ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ïã§ÌñâÎêòÎäî ÎèôÏïàÏóê Îã§Î•∏ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ìò∏Ï∂úÎêòÎ©¥
    <ul>
      <li>Í≥µÏú† Îç∞Ïù¥ÌÑ∞Ïóê Ï†ëÍ∑ºÌïòÍ≤å ÎêòÎØÄÎ°ú monitor ÏïàÏóê race conditionÏù¥ ÏÉùÍ∏∞Í∏∞ ÎïåÎ¨∏Ïóê ÌïòÎÇòÎ°ú Ï†úÌïúÏãúÌÇ§Îäî Í≤ÉÏù¥Îã§.</li>
    </ul>
  </li>
  <li>Í∑∏ÎûòÏÑú Ìïú Î≤àÏóê ÌïòÎÇòÏùò ÌîÑÎ°úÏÑ∏Ïä§Îßå Î™®ÎãàÌÑ∞ ÏïàÏóêÏÑú Ïã§ÌñâÏù¥ Í∞ÄÎä•</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Î™®ÎãàÌÑ∞ Îäî Ïó¨Îü¨ Ïä§Î†àÎìúÏóêÏÑú Ïï°ÏÑ∏Ïä§ÌïòÎèÑÎ°ù ÏÑ§Í≥ÑÎêú Í∞úÏ≤¥ÏûÖÎãàÎã§. Î™®ÎãàÌÑ∞ Í∞úÏ≤¥Ïùò Î©§Î≤Ñ Ìï®Ïàò ÎòêÎäî Î©îÏÑúÎìúÎäî ÏÉÅÌò∏ Î∞∞Ï†úÎ•º ÏãúÌñâÌïòÎØÄÎ°ú ÏßÄÏ†ïÎêú ÏãúÍ∞ÑÏóê ÌïòÎÇòÏùò Ïä§Î†àÎìúÎßå Í∞úÏ≤¥Ïóê ÎåÄÌïú ÏûëÏóÖÏùÑ ÏàòÌñâÌï† Ïàò ÏûàÏäµÎãàÎã§. Ìïú Ïä§Î†àÎìúÍ∞Ä ÌòÑÏû¨ Í∞úÏ≤¥Ïùò Î©§Î≤Ñ Ìï®ÏàòÎ•º Ïã§Ìñâ Ï§ëÏù¥Î©¥ Ìï¥Îãπ Í∞úÏ≤¥Ïùò Î©§Î≤Ñ Ìï®ÏàòÎ•º Ìò∏Ï∂úÌïòÎ†§Îäî Îã§Î•∏ Ïä§Î†àÎìúÎäî Ï≤´ Î≤àÏß∏Í∞Ä ÏôÑÎ£åÎê† ÎïåÍπåÏßÄ Í∏∞Îã§Î†§Ïïº Ìï©ÎãàÎã§.

ÏÑ∏ÎßàÌè¨Ïñ¥ Îäî ÌïòÏúÑ ÏàòÏ§Ä Í∞úÏ≤¥ÏûÖÎãàÎã§. ÏÑ∏ÎßàÌè¨Ïñ¥Î•º ÏÇ¨Ïö©ÌïòÏó¨ Î™®ÎãàÌÑ∞Î•º Íµ¨ÌòÑÌï† Ïàò ÏûàÏäµÎãàÎã§. ÏÑ∏ÎßàÌè¨Ïñ¥Îäî Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ïπ¥Ïö¥ÌÑ∞Ïùº ÎøêÏûÖÎãàÎã§. Ïπ¥Ïö¥ÌÑ∞Í∞Ä ÏñëÏàòÏùº Îïå Ïä§Î†àÎìúÍ∞Ä ÏÑ∏ÎßàÌè¨Ïñ¥Î•º ÏñªÏúºÎ†§Í≥† ÏãúÎèÑÌïòÎ©¥ ÌóàÏö©ÎêòÍ≥† Ïπ¥Ïö¥ÌÑ∞Í∞Ä Í∞êÏÜåÌï©ÎãàÎã§. Ïä§Î†àÎìúÍ∞Ä ÏôÑÎ£åÎêòÎ©¥ ÏÑ∏ÎßàÌè¨Ïñ¥Î•º Ìï¥Ï†úÌïòÍ≥† Ïπ¥Ïö¥ÌÑ∞Î•º Ï¶ùÍ∞ÄÏãúÌÇµÎãàÎã§.

Ïä§Î†àÎìúÍ∞Ä ÏÑ∏ÎßàÌè¨Ïñ¥Î•º ÏñªÏúºÎ†§Í≥† Ìï† Îïå Ïπ¥Ïö¥ÌÑ∞Í∞Ä Ïù¥ÎØ∏ 0Ïù¥Î©¥ Îã§Î•∏ Ïä§Î†àÎìúÍ∞Ä ÏÑ∏ÎßàÌè¨Ïñ¥Î•º Ìï¥Ï†úÌï† ÎïåÍπåÏßÄ Í∏∞Îã§Î†§Ïïº Ìï©ÎãàÎã§. Ïä§Î†àÎìúÍ∞Ä ÏÑ∏ÎßàÌè¨Ïñ¥Î•º Ìï¥Ï†úÌï† Îïå Ïó¨Îü¨ Ïä§Î†àÎìúÍ∞Ä ÎåÄÍ∏∞ Ï§ëÏù∏ Í≤ΩÏö∞ Í∑∏ Ï§ë ÌïòÎÇòÍ∞Ä ÏÑ∏ÎßàÌè¨Ïñ¥Î•º Í∞ÄÏ†∏ÏòµÎãàÎã§. ÏÑ∏ÎßàÌè¨Ïñ¥Î•º Ìï¥Ï†úÌïòÎäî Ïä§Î†àÎìúÎäî Ïù¥Î•º ÌöçÎìùÌïú Ïä§Î†àÎìúÏôÄ ÎèôÏùºÌï† ÌïÑÏöîÎäî ÏóÜÏäµÎãàÎã§.

Î™®ÎãàÌÑ∞Îäî Í≥µÏ§ë ÌôîÏû•Ïã§Í≥º Í∞ôÏäµÎãàÎã§. Ìïú Î≤àÏóê Ìïú ÏÇ¨ÎûåÎßå ÏûÖÏû•Ìï† Ïàò ÏûàÏäµÎãàÎã§. Í∑∏Îì§ÏùÄ Îã§Î•∏ ÏÇ¨ÎûåÏù¥ Îì§Ïñ¥Ïò§ÏßÄ Î™ªÌïòÎèÑÎ°ù Î¨∏ÏùÑ Ïû†Í∑∏Í≥†, Ìï† ÏùºÏùÑ ÌïòÍ≥†, ÎÇòÍ∞à Îïå Î¨∏ÏùÑ ÏóΩÎãàÎã§.

ÏÑ∏ÎßàÌè¨Ïñ¥Îäî ÏûêÏ†ÑÍ±∞ ÎåÄÏó¨ÏÜåÏôÄ Í∞ôÏäµÎãàÎã§. Í∑∏Îì§ÏùÄ ÌäπÏ†ïÌïú ÏàòÏùò ÏûêÏ†ÑÍ±∞Î•º Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§. ÏûêÏ†ÑÍ±∞Î•º ÎπåÎ¶¨Î†§Í≥† ÌïòÎäîÎç∞ Î¨¥Î£å ÏûêÏ†ÑÍ±∞Í∞Ä ÏûàÏúºÎ©¥ Í∞ÄÏ†∏Í∞à Ïàò ÏûàÍ≥† Í∑∏Î†áÏßÄ ÏïäÏúºÎ©¥ Í∏∞Îã§Î†§Ïïº Ìï©ÎãàÎã§. ÎàÑÍµ∞Í∞Ä ÏûêÏ†ÑÍ±∞Î•º Î∞òÎÇ©ÌïòÎ©¥ Îã§Î•∏ ÏÇ¨ÎûåÏù¥ Í∞ÄÏ†∏Í∞à Ïàò ÏûàÏäµÎãàÎã§. ÏûêÏ†ÑÍ±∞Í∞Ä ÏûàÎã§Î©¥ Îã§Î•∏ ÏÇ¨ÎûåÏóêÍ≤å ÎèåÎ†§Ï£ºÎèÑÎ°ù Ìï† Ïàò ÏûàÏäµÎãàÎã§. --- ÏûêÏ†ÑÍ±∞ ÎåÄÏó¨ÏÜåÎäî ÏûêÏ†ÑÍ±∞Î•º ÎèåÎ†§Î∞õÍ∏∞Îßå ÌïòÎ©¥ ÎàÑÍ∞Ä ÎèåÎ†§Ï£ºÎì† ÏÉÅÍ¥ÄÌïòÏßÄ ÏïäÏäµÎãàÎã§.
</code></pre></div></div>

<p><br /></p>

<h2 id="monitors-continued">Monitors (continued)</h2>

<ul>
  <li>Initialization code is executed when monitor is declared
    <ul>
      <li>ÏÉùÏÑ±Îê† Îïå Ìïú Î≤àÎßå Ïã§Ìñâ</li>
    </ul>
  </li>
  <li>Monitor procedures can only access variables declared within  monitor, procedures
    <ul>
      <li>Variables within monitor can not be accesses outside of monitor</li>
      <li>Only access to monitor is via calls to its procedures labeled entry</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="schematic-view-of-a-monitor">Schematic view of a monitor</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211359527.png" alt="image-20221002211359527" /></p>

<ul>
  <li>
    <p>ÏÉùÏÑ±Ïûê - initialization code</p>
  </li>
  <li>
    <p>Î©îÏÜåÎìú - procedure operation</p>
  </li>
  <li><mark>Î™®ÎãàÌÑ∞ ÏïàÏóêÏÑú ÏÉùÏÑ±Îê† Ïàò ÏûàÎäî ÌîÑÎ°úÏÑ∏Ïä§Îäî Ìïú Í∞úÎ°ú Ï†úÌïú</mark></li>
  <li>entry queue: Î™®ÎãàÌÑ∞ ÏïàÏóêÏÑú Ï†ïÏùòÎêú procedureÏóê ÎåÄÌï¥ÏÑú Ìò∏Ï∂úÏùÑ Ìïú ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ïó¨Îü¨Í∞ú Ïù∏ Í≤ΩÏö∞ Í∑∏Ï§ë Ìïú ÌîÑÎ°úÏÑ∏Ïä§Îßå Ïã§ÌñâÏù¥ ÌóàÏö©ÎêòÍ≥† ÎÇòÎ®∏ÏßÄÎäî Ïù¥ ÌÅêÏóêÏÑú ÏàúÏÑúÎåÄÎ°ú Í∏∞Îã§Î¶¨Îäî Í∞úÎÖê</li>
</ul>

<p><br /></p>

<h2 id="monitors-continued---ÏãúÌóò">Monitors (continued) - ÏãúÌóò</h2>

<p>procedureÎ•º Ïã§ÌñâÌïòÎã§Í∞Ä Î¨∏Ï†úÍ∞Ä ÏÉùÍ∏¥ Í≤ΩÏö∞(event) - Î™®ÎãàÌÑ∞ ÏïàÏóêÏÑú Í∏∞Îã§Î¶¨Î©¥ ÏïÑÎ¨¥ Í≤ÉÎèÑ Ïã§ÌñâÏù¥ ÎêòÏßÄ ÏïäÎäî Î¨∏Ï†ú Î∞úÏÉù(ÎèôÍ∏∞ÌôîÏóê ÎåÄÌïú Î¨∏Ï†úÎ•º ÏôÑÏ†ÑÌûà Ìï¥Í≤∞ÌïòÏßÄ Î™ªÌñàÏùå)</p>

<p>‚Äã	-&gt; condition variableÍ∞úÎÖê ÎèÑÏûÖ</p>

<ul>
  <li>
    <p>To allow a process to wait within the monitor, a condition variable must  be declared, as</p>

    <p>‚Äã		condition x, y;</p>

    <ul>
      <li>Associated with each condition is a queue</li>
    </ul>
  </li>
  <li>
    <p><strong>Two operations</strong> are allowed on a condition variable:</p>
  </li>
  <li>
    <p>Processes placed onto / removed from queue via wait and signal (Î™®ÎãàÌÑ∞ÏóêÏÑú Ï†ïÏùòÌïú)</p>

    <ul>
      <li>x means condition!</li>
      <li><strong>x.wait()</strong> ‚Äì means that the process that invokes this operation is <u>suspended</u> until another process invokes x.signal()
        <ul>
          <li>eventÎ•º Í∏∞Îã§Î¶¨ÎäîÎç∞ condition queueÏóê Í∞ÄÏÑú Í∏∞Îã§Î¶¨Í∏∞</li>
        </ul>
      </li>
      <li><strong>x.signal()</strong> ‚Äì <u>resumes</u> exactly one suspended process (if any) that invoked x.wait()
        <ul>
          <li>If no x.wait() on the variable, then it has no effect on the  variable
            <ul>
              <li><mark>semaphoreÎäî no effectÍ∞Ä ÏïÑÎãàÎùº valueÍ∞Ä 0ÏóêÏÑú 1Î°ú Î∞îÎÄêÎã§!!!</mark></li>
            </ul>
          </li>
          <li>If no process is suspended, then the signal operation has no effect.
            <ul>
              <li>x.waitÏóê ÏùòÌï¥ suspendÎêú ÌîÑÎ°úÏÑ∏Ïä§Î•º ÏÇ¥Î†§Ï§å</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>semaphoreÏùò waitÍ≥º signalÍ≥º ÌòºÎèàÌïòÏßÄ Îßê Í≤É
        <ul>
          <li>condition Î≥ÄÏàòÏùò Ìï®ÏàòÏûÑ</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="monitor-with-condition-variables">Monitor with condition variables</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211530941.png" alt="image-20221002211530941" /></p>

<ul>
  <li>
    <p>Í∏∞Î≥∏Ï†ÅÏù∏ Î™®ÎãàÌÑ∞Îäî Ïó¨Îü¨ ÎèôÍ∏∞Ìôî Í∏∞Î≤ï Î™®Îç∏ÎßÅÏùÑ ÏúÑÌï¥ÏÑú Ï∂©Î∂ÑÌûà Í∞ïÎ†•ÌïòÏßÄÍ∞Ä ÏïäÎã§.</p>

    <ul>
      <li>Í≥µÌÜµÎêú ÏûêÏõêÏóê ÎåÄÌïú Í≤ΩÏüÅÏùÑ ÎßâÍ∏∞ ÏúÑÌï¥ÏÑú mutex lock, semaphoreÎ•º ÏÇ¨Ïö©ÌïòÎäîÎç∞ Ïù¥Îü¨Ìïú semaphoreÏôÄ  mutex lockÏùÑ Í∞ÄÏßÄÎ†§Îäî ÎåÄÏÉÅÎì§Ïù¥ 2Í∞ú Ïù¥ÏÉÅÏùº Îïå condition variablesÏùÑ ÌÜµÌï¥ÏÑú Í∑∏ ÎåÄÏÉÅÎì§Ïùò ÏàúÏÑúÎ•º Í≤∞Ï†ïÌï¥ Ï§ÄÎã§.</li>
    </ul>
  </li>
  <li>
    <p>shared dataÏùò queueÎäî Î¨¥Ïä® Ïó≠Ìï†?</p>

    <ul>
      <li>condition queue - Ïñ¥Îñ§ conditionÏù¥ Î∞úÏÉùÌï† ÎïåÍπåÏßÄ ÎåÄÍ∏∞</li>
    </ul>
  </li>
  <li>
    <p>Ïã§ÌñâÏùÑ ÌïòÎã§Í∞Ä eventÍ∞Ä Î∞úÏÉùÌïòÏó¨ Îçî Ïù¥ÏÉÅ Ïã§ÌñâÏùÑ ÌïòÏßÄ Î™ªÌïòÎäî Í≤ΩÏö∞ Í∏∞Îã§Î†§Ïïº ÌïòÎØÄÎ°ú ÏÜêÌï¥</p>
  </li>
  <li>
    <p>xÎùºÎäî eventÍ∞Ä Î∞úÏÉùÌïòÍ∏∞Î•º Í∏∞Îã§Î¶¨Í≥† ÏûàÎäî ÌîÑÎ°úÏÑ∏Ïä§</p>
  </li>
</ul>

<p><br /></p>

<h2 id="monitors-continued-1">Monitors (continued)</h2>

<ul>
  <li>Suppose that, when the x.signal is invoked by a process P, there is a  suspended process Q associated with condition x
    <ul>
      <li>P -&gt; x.signal Ìò∏Ï∂ú</li>
      <li>Q -&gt; x.signalÏù¥ Ìò∏Ï∂úÎêòÏñ¥Ï†∏ ÏÇ¥ÏïÑÎÇ®</li>
      <li>Ï¶â, PÍ∞Ä x.signal()ÏùÑ Ï£ºÍ≥† QÎäî x.wait()Ïóê Í±∏Î†§ÏûàÎäî ÏÉÅÌÉúÏù¥Îã§.</li>
    </ul>
  </li>
  <li>If the suspended process Q is allowed to resume its execution, the signaling process P must wait, otherwise, both P and Q will be active  <strong>simultaneously</strong> within the monitor
    <ul>
      <li>Ïù¥Îäî Î™®ÎãàÌÑ∞ Î∞©ÏãùÏóê ÏúÑÎ∞∞</li>
    </ul>
  </li>
  <li>2 possibilities
    <ul>
      <li><strong>Signal and wait</strong> ‚Äì P either waits until Q leaves the monitor, or  waits for another condition
        <ul>
          <li>ÏÇ¥Î†§Ï§Ä ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Í∏∞Îã§Î¶¥ Í≤ÉÏù¥ÎÉê</li>
          <li>PÎäî QÍ∞Ä monitorÎ•º Îñ†ÎÇòÍ±∞ÎÇò Îã§Î•∏ Ï°∞Í±¥ÏùÑ Í∏∞Îã§Î¶¥ ÎïåÍπåÏßÄ Í∏∞Îã§Î¶∞Îã§.</li>
        </ul>
      </li>
      <li><strong>Signal and continue</strong> - Q either waits until P leaves the monitor, or  waits for another condition
        <ul>
          <li>ÏÇ¥Î†§ÏßÑ ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Í∏∞Îã§Î¶¥ Í≤ÉÏù¥ÎÉê</li>
          <li>QÎäî PÍ∞Ä monitorÎ•º Îñ†ÎÇòÍ±∞ÎÇò Îã§Î•∏ Ï°∞Í±¥ÏùÑ Í∏∞Îã§Î¶¥ ÎïåÍπåÏßÄ Í∏∞Îã§Î¶∞Îã§.</li>
        </ul>
      </li>
      <li>Both have pros and cons ‚Äì language implementer can decide</li>
      <li>Monitors implemented in Concurrent Pascal compromise
        <ul>
          <li>P executing signal immediately leaves the monitor, Q is resumed</li>
        </ul>
      </li>
      <li>Implemented in other languages including Mesa, C#, Java</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="monitor-implementation-using-semaphores">Monitor Implementation Using Semaphores</h2>

<ul>
  <li>Variables</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211654825.png" alt="image-20221002211654825" /></p>

<ul>
  <li>Each procedure <strong>F</strong> will always be replaced by</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211711850.png" alt="image-20221002211711850" /></p>

<ul>
  <li>signal and wait
    <ul>
      <li>wait(mutex) - entry section</li>
      <li>if-else  : exit section</li>
      <li>body of F : critical section</li>
    </ul>
  </li>
  <li>Mutual exclusion within a monitor is ensured by mutex semaphore</li>
  <li>Signaling process must wait until the resumed process either leaves or waits
    <ul>
      <li>Next semaphore on which signaling processes may suspend themselves</li>
      <li>Next-count counts the number of processes suspended on next</li>
    </ul>
  </li>
  <li>signal(next) - next</li>
  <li><mark>Ï†úÏùº Ïö∞ÏÑ†ÏàúÏúÑ ÎÜíÏùÄ ; next queue, entry queue, ÏÉàÎ°úÎì§Ïñ¥Ïò® Ïï†</mark>
    <ul>
      <li>condition queueÏóê ÏûàÎäî Ïï†Îì§ÏùÄ Ïö∞ÏÑ†ÏàúÏúÑ ÎåÄÏÉÅÏù¥ Îì§Ïñ¥Í∞ÄÏßÄ ÏïäÎäî Ïù¥Ïú†
        <ul>
          <li>ÎÇ®ÏùÑ ÏúÑÌï¥ÏÑú ÏùºÎ∂ÄÎü¨ Í∏∞Îã§Î†§Ï£ºÍ±∞ÎÇò(next q) Îã§Î•∏ ÏÇ¨ÎûåÏù¥ ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê Í∏∞Îã§Î¶¨Îäî Í≤É(entry q)Ïù¥ ÏïÑÎãàÎùº x ÌòπÏùÄ yÎùºÎäî eventÎ•º Í∏∞Îã§Î¶¨Îäî Í≤ÉÏù¥Í∏∞ ÎïåÎ¨∏Ïóê eventÏóê ÏùòÏ°¥ÌïòÏó¨ ÏÇ¥Î†§Ï§òÎèÑ ÏùòÎØ∏Í∞Ä ÏóÜÎäî Í≤ΩÏö∞Í∞Ä ÏûàÏùÑ Ïàò ÏûàÎã§.</li>
          <li>Îî∞ÎùºÏÑú ÏñòÎäî Ï°∞Í±¥Ï†ÅÏúºÎ°ú ÏÇ¥ÏïÑÎÇ®</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="monitor-implementation---condition-variables">Monitor Implementation - Condition Variables</h2>

<ul>
  <li>For each condition variable x, we have:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211754045.png" alt="image-20221002211754045" /></p>

<ul>
  <li>The operation <strong>x.wait</strong> can be implemented as:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211807215.png" alt="image-20221002211807215" /></p>

<p><br /></p>

<h2 id="monitor-implementation-cont">Monitor Implementation (Cont.)</h2>

<ul>
  <li>The operation <strong>x.signal</strong> can be implemented as:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002211833560.png" alt="image-20221002211833560" /></p>

<p><br /></p>

<h2 id="monitor-implementation-cont-1">Monitor Implementation (Cont.)</h2>

<ul>
  <li>Resuming Processes within a Monitor (monitor ÎÇ¥ ÌîÑÎ°úÏÑ∏Ïä§Îì§ Ïû¨Í∞úÌïòÍ∏∞!)
    <ul>
      <li>If several processes queued on condition x, and x.signal()  executed, which should be resumed?</li>
      <li>FCFS frequently not adequate</li>
    </ul>
  </li>
  <li>Condition operation with <strong>priority</strong> (process resumption order)
    <ul>
      <li>Conditional-wait construct: x.wait(c);</li>
      <li>c ‚Äì integer expression evaluated when the wait operation is  executed. (Ïö∞ÏÑ†ÏàúÏúÑ)</li>
      <li>value of c (<strong>priority number</strong>) stored with the name of the process  that is suspended.</li>
      <li>when x.signal is executed, process with smallest associated  priority number is resumed next.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="single-resource-allocation">Single Resource allocation</h2>

<ul>
  <li>Allocate a single resource among competing processes using  priority numbers that specify the maximum time a process plans to use the resource</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002212138116.png" alt="image-20221002212138116" /></p>

<ul>
  <li>Where R is an instance of type ResourceAllocator
    <ul>
      <li>ex) ResourceAllocator R;</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="a-monitor-to-allocate-single-resource---Ï§ëÏöî">A Monitor to Allocate Single Resource - Ï§ëÏöî</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002212250416.png" alt="image-20221002212250416" /></p>

<ul>
  <li>release()ÏóêÏÑú x.signal()ÏùÑ ÌïòÎ©¥ ÎàÑÍ∞ÄÎ®ºÏ†Ä ÏÇ¥ÏïÑÎÇòÏïº Ìï†Íπå? -&gt; ÏúÑÏóêÏÑú ÎßêÌñàÏùå</li>
  <li>timeÏùò ÏãúÍ∞ÑÏù¥ ÏûëÏùÑ ÏàòÎ°ù Ïö∞ÏÑ†ÏàúÏúÑÍ∞Ä ÎÜíÎã§Î©¥, timeÏù¥ ÏßßÏùÄ Ïï†Í∞Ä Î®ºÏ†Ä waitÏùÑ Îπ†Ï†∏ÎÇòÍ∞ÑÎã§.</li>
</ul>

<p><br /></p>

<h2 id="monitor-implementation-cont-2">Monitor Implementation (Cont.)</h2>

<ul>
  <li>Check to establish correctness of system:
    <ul>
      <li>User processes must always make their calls on the monitor in a  correct sequence.</li>
      <li>Must ensure that an uncooperative process does not ignore the  mutual-exclusion gateway provided by the monitor, and try to  access the shared resource directly, without using the access  protocols.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<hr />

<p>Ïù¥ ÏïÑÎûòÎäî Îí§ÏóêÏÑú Î∞∞Ïö∏ Í≤ÉÏù¥ÎØÄÎ°ú Î¨¥Ïãú</p>

<h2 id="liveness---Î¨¥Ïãú-xxxx">Liveness - Î¨¥Ïãú XXXX</h2>

<ul>
  <li>Deadlock ‚Äì two or more processes are waiting indefinitely for an event that can  be caused by only one of the waiting processes.</li>
  <li>Let S and Q be two semaphores initialized to 1</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002212403259.png" alt="image-20221002212403259" /></p>

<ul>
  <li>Starvation ‚Äì indefinite blocking.
    <ul>
      <li>A process may never be removed from the semaphore queue in which it  is suspended.</li>
    </ul>
  </li>
  <li>Priority Inversion ‚Äì Scheduling problem when lower-priority process holds a  lock needed by higher-priority process
    <ul>
      <li>Solved via priority-inheritance protocol</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="atomic-transactions--xxxx">Atomic Transactions -XXXX</h2>

<ul>
  <li>System Model</li>
  <li>Log-based Recovery</li>
  <li>Checkpointing</li>
  <li>Concurrent Atomic Transactions</li>
</ul>

<p><br /></p>

<h2 id="system-model---xxxx">System Model - XXXX</h2>

<ul>
  <li>Assures that operations happen as a single logical unit of work, in its  entirety, or not at all</li>
  <li>Related to field of database systems</li>
  <li>Challenge is assuring atomicity despite computer system failures</li>
  <li><strong>Transaction</strong> - collection of instructions or operations that performs  single logical function
    <ul>
      <li>Here we are concerned with changes to stable storage ‚Äì disk</li>
      <li>Transaction is series of <strong>read</strong> and <strong>write</strong> operations</li>
      <li>Terminated by <strong>commit</strong> (transaction successful) or abort (transaction failed) operation</li>
      <li>Aborted transaction must be <strong>rolled back</strong> to undo any changes it  performed</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="types-of-storage-media---xxxx">Types of Storage Media - XXXX</h2>

<ul>
  <li>
    <p>Volatile storage ‚Äì information stored here does not survive system  crashes</p>

    <ul>
      <li>Example: main memory, cache</li>
    </ul>
  </li>
  <li>
    <p>Nonvolatile storage ‚Äì Information usually survives crashes</p>

    <ul>
      <li>Example: disk and tape</li>
    </ul>
  </li>
  <li>
    <p>Stable storage ‚Äì Information never lost</p>

    <ul>
      <li>Not actually possible, so approximated via replication or RAID to  devices with independent failure modes</li>
    </ul>

    <p>Goal is to assure transaction atomicity where failures cause loss of  information on volatile storag</p>
  </li>
</ul>

<p><br /></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> ÌÉúÍ∑∏: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#os" class="page__taxonomy-item p-category" rel="tag">OS</a><span class="sep">, </span>
    
      <a href="/tags/#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C" class="page__taxonomy-item p-category" rel="tag">Ïö¥ÏòÅÏ≤¥Ï†ú</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Ïπ¥ÌÖåÍ≥†Î¶¨: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#os" class="page__taxonomy-item p-category" rel="tag">OS</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> ÏóÖÎç∞Ïù¥Ìä∏:</strong> <time class="dt-published" datetime="2022-09-27T00:00:00+09:00">2022-09-27</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Í≥µÏú†ÌïòÍ∏∞</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%5BOS%5D+Synchronization+Tools%20http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Synchronization-Tools%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Í≥µÏú†ÌïòÍ∏∞ Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Synchronization-Tools%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Í≥µÏú†ÌïòÍ∏∞ Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Synchronization-Tools%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Í≥µÏú†ÌïòÍ∏∞ LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/os/OS-CPU-Scheduling/" class="pagination--pager" title="[OS] CPU Scheduling
">Ïù¥Ï†Ñ</a>
    
    
      <a href="/frontend/hci/HCI-6.-Interaction-Design-Basics-1/" class="pagination--pager" title="[HCI] 6. Interaction Design Basics 1
">Îã§Ïùå</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">Ï∞∏Í≥†</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/os/OS-Virtual-Memory/" rel="permalink">[OS] Virtual Memory
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 11/20/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      ‚ñ∂OS
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          41 Î∂Ñ ÏÜåÏöî
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-10.-Universal-DesignMulti-Sensory-Systems/" rel="permalink">[HCI] 10. Universal Design-Multi-Sensory Systems
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/23/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      ‚ñ∂FrontEnd
      ‚ñ∂HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 Î∂Ñ ÏÜåÏöî
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Universal Design Principles - NCSU
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-9.-Dialogue-Notations-Design-2/" rel="permalink">[HCI] 9. Dialogue Notations and Design 2
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/19/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      ‚ñ∂FrontEnd
      ‚ñ∂HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 Î∂Ñ ÏÜåÏöî
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">O/X
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-9.-Dialogue-Notations-and-Design-1/" rel="permalink">[HCI] 9. Dialogue Notations and Design 1
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/17/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      ‚ñ∂FrontEnd
      ‚ñ∂HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 Î∂Ñ ÏÜåÏöî
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Dialogue Notations and Design
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>ÌåîÎ°úÏö∞:</strong></li>
    

    
      
        
          <li><a href="https://github.com/speardragon" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> ÌîºÎìú</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kang Chang Ryong. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/os/OS-Synchronization-Tools/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/os/[OS] Synchronization Tools"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://sppeardragon.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
