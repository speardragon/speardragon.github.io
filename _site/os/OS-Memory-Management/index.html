<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[OS] Memory Management | speardragon note</title>
<meta name="description" content="[toc]">


  <meta name="author" content="Kang Chang Ryong">
  
  <meta property="article:author" content="Kang Chang Ryong">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="speardragon note">
<meta property="og:title" content="[OS] Memory Management">
<meta property="og:url" content="http://localhost:4000/os/OS-Memory-Management/">


  <meta property="og:description" content="[toc]">







  <meta property="article:published_time" content="2022-10-03T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/os/OS-Memory-Management/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Kang Chang Ryong",
      "url": "http://localhost:4000/"
    
  }
</script>






  <meta name="naver-site-verification" content="cd7b9197fb220245e1da6b83be8b0feaf0434524">


<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="speardragon note Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon.ico/apple-icon-57x57.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon.ico/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="/assets/favicon.ico/mstile-150x150.png">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/image_initial.jpg" alt="speardragon note"></a>
        
        <a class="site-title" href="/">
          speardragon note
          <span class="site-subtitle">Believe in yourself</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tag</a>
            </li><li class="masthead__menu-item">
              <a href="/search/">Search</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">í† ê¸€ ë©”ë‰´</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#os" itemprop="item"><span itemprop="name">Os</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">[OS] Memory Management</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="http://localhost:4000/">
        <img src="/assets/images/image_face.png" alt="Kang Chang Ryong" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Kang Chang Ryong</a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">íŒ”ë¡œìš°</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Republic of Korea, Uijeongbu</span>
        </li>
      

      
        
          
            <li><a href="mailto:rkdckdfyyd@naver.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://speardragon.github.io" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/speardragon" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  

  
    <!--ì „ì²´ ê¸€ ìˆ˜ë¥¼ ì„¸ê¸° ìœ„í•œ ì—°ì‚°. sum ë³€ìˆ˜ì— ì „ì²´ ê¸€ ìˆ˜ ì €ì¥-->



<nav class="nav__list">
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">í† ê¸€ ë©”ë‰´</label>
  <ul class="nav__items" id="category_tag_menu">
      <!--ì „ì²´ ê¸€ ìˆ˜-->
      <li>
            ğŸ“‚ <span style="font-family:'Cafe24Oneprettynight';">ì „ì²´ ê¸€</style> <span style="font-family:'Coming Soon';">(146)</style> <span style="font-family:'Cafe24Oneprettynight';"></style> 
      </li>

      <li>
      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: Language-------------------------------------->
        <!--span íƒœê·¸ë¡œ ì¹´í…Œê³ ë¦¬ë“¤ì„ í¬ê²Œ ë¶„ë¥˜ ex) C/C++/C#-->
        <span class="nav__sub-title">ğŸŒ Language: í”„ë¡œê·¸ë˜ë° ì–¸ì–´</span>
            <!--ul íƒœê·¸ë¡œ ê°™ì€ ì¹´í…Œê³ ë¦¬ë“¤ ëª¨ì•„ë‘” í˜ì´ì§€ë“¤ ë‚˜ì—´-->
            <ul>
                <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
                <!--Python ì¹´í…Œê³ ë¦¬ ê¸€ë“¤ì„ ëª¨ì•„ë‘” í˜ì´ì§€ì¸ /categories/python ì£¼ì†Œì˜ ê¸€ë¡œ ë§í¬ ì—°ê²°-->
                <!--category[1].size ë¡œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë¥¼ ê°€ì§„ ê¸€ì˜ ê°œìˆ˜ í‘œì‹œ--> 
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/python" class="">Python (4)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/kotlin" class="">Kotlin (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>
            
      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: BackEnd-------------------------------------->
      <span class="nav__sub-title">ğŸ’» BackEnd</span>
      <ul>
          <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/nodejs" class="">NodeJs (6)</a></li>
          
          
          
          
          
          
          
          
          
          
      </ul> 

      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: FrontEnd-------------------------------------->
      <span class="nav__sub-title">ğŸ¨ FrontEnd</span>
      <ul>
          <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/reactnative" class="">ReactNative (3)</a></li>
          
          
          
          
          <li><a href="/categories/hci" class="">HCI (15)</a></li>
          
          
      </ul> 

      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: System-------------------------------------->
      <span class="nav__sub-title">ğŸ“Ÿ System</span>
      <ul>
          <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/systemprogramming" class="">System Programming (22)</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
      </ul>              
            
      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: Computer Science-------------------------------------->
        <span class="nav__sub-title">ğŸ–¥ï¸ Computer Science</span>
            <ul>
                <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/datalgorithmwithJava" class="">Data structures and algorithms(Java) (30)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/computerarchitecture" class="">Computer Architecture (26)</a></li>
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/datalgorithmwithPython" class="">Data structures and algorithms(Python) (14)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/os" class="">OS (10)</a></li>
                
                
                
                
            </ul>              

     <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: Project-------------------------------------->
     <span class="nav__sub-title">ğŸ“± Android</span>
            <ul>
                <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/android" class="">Android (3)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>               
            
     <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: Project-------------------------------------->
     <span class="nav__sub-title">ğŸ§ª Project: í”„ë¡œì íŠ¸</span>
            <ul>
                <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>   

      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: Algorithm-------------------------------------->
      <span class="nav__sub-title">ğŸ”  Algorithm: ë¬¸ì œ í’€ì´(ë°±ì¤€, í”„ë¡œê·¸ë˜ë¨¸ìŠ¤)</span>
      <ul>
          <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
          
          
          
          <li><a href="/categories/math" class="">Math (1)</a></li>
          
          
          <li><a href="/categories/bruteforce" class="">BruteForce (4)</a></li>
          
          
          
          
          
          
          
          
          
          
          <li><a href="/categories/implementation" class="">Implementation (4)</a></li>
          
          
          
          
          
          
          <li><a href="/categories/linkedList" class="">LinkedList (3)</a></li>
          
          
          <li><a href="/categories/stack" class="">Stack (2)</a></li>
          
          
          <li><a href="/categories/queue" class="">Queue (2)</a></li>
          
          
          <li><a href="/categories/hash" class="">Hash (2)</a></li>
          
          
          <li><a href="/categories/binarysearch" class="">BinarySearch (3)</a></li>
          
          
          <li><a href="/categories/sorting" class="">Sorting (7)</a></li>
          
          
          <li><a href="/categories/tree" class="">Tree (1)</a></li>
          
          
          <li><a href="/categories/heap" class="">Heap (1)</a></li>
          
          
          <li><a href="/categories/graph" class="">Graph (4)</a></li>
          
          
          <li><a href="/categories/dijkstra" class="">Dijkstra (1)</a></li>
          
          
          <li><a href="/categories/dynamicprogramming" class="">DynamicProgramming (1)</a></li>
          
          
          <li><a href="/categories/greedy" class="">Greedy (1)</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
      </ul>            
      <!-------------------------------------- ìƒìœ„ ì¹´í…Œê³ ë¦¬: ETC-------------------------------------->
        <span class="nav__sub-title">ğŸ’¬ ETC: ê¸°íƒ€</span>
            <ul>
                <!-- í•˜ìœ„ ì¹´í…Œê³ ë¦¬ -->
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/history" class="">History (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/categories/tip" class="">Tip (1)</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>
      </li>
  </ul>
</nav>
  
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[OS] Memory Management">
    <meta itemprop="description" content="[toc]">
    <meta itemprop="datePublished" content="2022-10-03T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/os/OS-Memory-Management/" class="u-url" itemprop="url">[OS] Memory Management
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          34 ë¶„ ì†Œìš”
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu"><li><a href="#chapter-9-memory-management">Chapter 9: Memory Management</a><ul><li><a href="#objectives">Objectives</a></li><li><a href="#structure---top-level">Structure - Top Level</a></li><li><a href="#structure--the-cpu">Structure -The CPU</a></li><li><a href="#structure---the-control-unit">Structure - The Control Unit</a></li><li><a href="#von-neumann-architecture">Von Neumann architecture</a></li><li><a href="#what-is-a-program">What is a program?</a></li><li><a href="#instruction-cycle">Instruction Cycle</a></li><li><a href="#instruction-cycle-with-interrupts---state-diagram">Instruction Cycle (with Interrupts) - State Diagram</a></li><li><a href="#background">Background</a></li><li><a href="#base-and-limit-registers">Base and Limit Registers</a></li><li><a href="#hardware-address-protection-with-base-and-limit-registers">Hardware Address Protection with Base and Limit Registers</a></li><li><a href="#address-binding">Address Binding</a></li><li><a href="#background-1">Background</a></li><li><a href="#address-binding-1">Address Binding</a></li><li><a href="#address-binding-2">Address Binding</a></li><li><a href="#address-bindingì•ˆì¤‘ìš”">Address Binding(ì•ˆì¤‘ìš”)</a></li><li><a href="#address-bindingì•ˆì¤‘ìš”-1">Address Binding(ì•ˆì¤‘ìš”)</a></li><li><a href="#address-bindingì•ˆì¤‘ìš”-2">Address Binding(ì•ˆì¤‘ìš”)</a></li><li><a href="#binding-of-instructions-and-data-to-memoryì¤‘ìš”">Binding of Instructions and Data to Memory(ì¤‘ìš”)</a></li><li><a href="#multistep-processing-of-a-user-program">Multistep Processing of a User Program</a></li><li><a href="#logical-vs-physical-address-space">Logical vs. Physical Address Space</a></li><li><a href="#physical-logical-storage">Physical &amp;Â Logical storage</a></li><li><a href="#memory-management-unit-mmu">Memory-Management Unit (MMU)</a></li><li><a href="#dynamic-relocation-using-a-relocation-register">Dynamic relocation using a relocation register</a></li><li><a href="#dynamic-loading">Dynamic Loading</a></li><li><a href="#dynamic-linking">Dynamic Linking</a></li><li><a href="#swapping">Swapping</a></li><li><a href="#swapping-1">Swapping</a></li><li><a href="#schematic-view-of-swapping">Schematic View of Swapping</a></li><li><a href="#context-switch-time-including-swapping">Context Switch Time including Swapping</a></li><li><a href="#context-switch-time-including-swapping-1">Context Switch Time including Swapping</a></li><li><a href="#swapping-on-mobile-systems">Swapping on Mobile Systems</a></li><li><a href="#memory-management">Memory management</a></li><li><a href="#placement-of-modules-in-memory">Placement of modules in memory</a></li><li><a href="#contiguous-allocation">Contiguous Allocation</a></li><li><a href="#hardware-support-for-relocation-and-limit-registers">Hardware Support for Relocation and Limit Registers</a></li><li><a href="#single-partition-allocation">Single-partition allocation</a></li><li><a href="#multiple-fixed-parition">Multiple fixed parition</a></li><li><a href="#overlaysìƒëµ">Overlays(ìƒëµ)</a></li><li><a href="#multiple---variable-sized-partition-allocation">Multiple - Variable sized partition allocation</a></li><li><a href="#dynamic-storage-allocation-problem">Dynamic Storage-Allocation Problem</a></li><li><a href="#fragmentation---ì¤‘ìš”">Fragmentation - ì¤‘ìš”</a></li><li><a href="#segmentation">Segmentation</a></li><li><a href="#users-view-of-a-program">Userâ€™s View of a Program</a></li><li><a href="#logical-view-of-segmentation">Logical View of Segmentation</a></li><li><a href="#segmentation-architecture">Segmentation Architecture</a></li><li><a href="#segmentation-architecture-cont">Segmentation Architecture (Cont.)</a></li><li><a href="#segmentation-hardware">Segmentation Hardware</a></li><li><a href="#example-of-segmentation">Example of Segmentation</a></li><li><a href="#sharing-of-segments">Sharing of segments</a></li><li><a href="#paging">Paging</a></li><li><a href="#address-translation-scheme">Address Translation Scheme</a></li><li><a href="#address-translation-scheme-1">Address Translation Scheme</a></li><li><a href="#paging-hardware">Paging Hardware</a></li><li><a href="#paging-model-of-logical-and-physical-memory">Paging Model of Logical and Physical Memory</a></li><li><a href="#paging-example">Paging Example</a></li><li><a href="#paging-cont">Paging (Cont.)</a></li><li><a href="#free-frames">Free Frames</a></li><li><a href="#implementation-of-page-table">Implementation of Page Table</a></li><li><a href="#associative-register">Associative Register</a></li><li><a href="#paging-hardware-with-tlb">Paging Hardware With TLB</a></li><li><a href="#effective-access-time">Effective Access Time</a></li><li><a href="#memory-protection">Memory Protection</a></li><li><a href="#valid-v-or-invalidi-bit-in-a-page-table">Valid (v) or Invalid(i) Bit In A Page Table</a></li><li><a href="#shared-pages">Shared Pages</a></li><li><a href="#shared-page-examples">Shared Page Examples</a></li><li><a href="#structure-of-the-page-table">Structure of the Page Table</a></li><li><a href="#hierarchical-page-tables">Hierarchical Page Tables</a></li><li><a href="#two-level-page-table-scheme">Two-Level Page-Table Scheme</a></li><li><a href="#two-level-paging-example">Two-Level Paging Example</a></li><li><a href="#address-translation-scheme-2">Address-Translation Scheme</a></li><li><a href="#multilevel-paging64-bit-logical-address-space">Multilevel Paging(64-bit Logical Address Space)</a></li><li><a href="#three-level-paging-scheme">Three-level Paging Scheme</a></li><li><a href="#four-level-paging-scheme">Four level paging scheme</a></li><li><a href="#hashed-page-tables">Hashed Page Tables</a></li><li><a href="#hashed-page-table">Hashed Page Table</a></li><li><a href="#inverted-page-table">Inverted Page Table</a></li><li><a href="#inverted-page-table-architecture">Inverted Page Table Architecture</a></li><li><a href="#osì—-ì˜í•œ----ì•ˆë‚˜ì˜´">OSì— ì˜í•œ ! - ì•ˆë‚˜ì˜´</a></li><li><a href="#segmentation-with-paging---multics">Segmentation with Paging - MULTICS</a></li><li><a href="#multics-address-translation-scheme">MULTICS Address Translation Scheme</a></li><li><a href="#segmentation-with-paging---intel-386">Segmentation with Paging - Intel 386</a></li><li><a href="#example-the-intel-32-and-64-bit-architectures">Example: The Intel 32 and 64-bit Architectures</a></li><li><a href="#example-the-intel-ia-32-architecture">Example: The Intel IA-32 Architecture</a></li><li><a href="#example-the-intel-ia-32-architecture-cont">Example: The Intel IA-32 Architecture (Cont.)</a></li><li><a href="#logical-to-physical-address-translation-in-ia-32">Logical to Physical Address Translation in IA-32</a></li><li><a href="#intel-ia-32-segmentation">Intel IA-32 Segmentation</a></li><li><a href="#intel-ia-32-paging-architecture">Intel IA-32 Paging Architecture</a></li><li><a href="#intel-ia-32-page-address-extensions">Intel IA-32 Page Address Extensions</a></li><li><a href="#intel-x86-64">Intel x86-64</a></li><li><a href="#example-arm-architecture">Example: ARM Architecture</a></li><li><a href="#armv8-4-level-hierarchical-paging">ARMv8 4-level hierarchical paging</a></li><li><a href="#linear-address-in-linux">Linear Address in Linux</a></li><li><a href="#three-level-paging-in-linux">Three-level Paging in Linux</a></li><li><a href="#comparing-memory-management-startegies">Comparing Memory-Management Startegies</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <p>[toc]</p>

<h1 id="chapter-9-memory-management">Chapter 9: Memory Management</h1>

<ul>
  <li>Background</li>
  <li>Logical versus Physical Address Space</li>
  <li>Swapping</li>
  <li>Contiguous Memory Allocation</li>
  <li><strong>Paging</strong> (ì‹œí—˜)</li>
  <li><strong>Segmentation</strong> (ì‹œí—˜)</li>
  <li>Segmentation with Paging</li>
  <li>Structure of the Page Table</li>
  <li>Example: The Intel 32 and 64-bit Architectures</li>
  <li>Example: ARM Architecture</li>
</ul>

<p><br /></p>

<h2 id="objectives">Objectives</h2>

<ul>
  <li>To provide a detailed description of various ways of organizing memory  hardware</li>
  <li>To discuss various memory-management techniques, including paging  and segmentation</li>
  <li>To provide a detailed description of the Intel Pentium, which supports both pure segmentation and segmentation with paging</li>
</ul>

<p><br /></p>

<h2 id="structure---top-level">Structure - Top Level</h2>

<ul>
  <li>components are interleaved</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221127005647009.png" alt="image-20221127005647009" /></p>

<p><br /></p>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002232502033.png" alt="image-20221002232502033" /></p>

<p><br /></p>

<h2 id="structure--the-cpu">Structure -The CPU</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002232615247.png" alt="image-20221002232615247" /></p>

<p><br /></p>

<h2 id="structure---the-control-unit">Structure - The Control Unit</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002232722331.png" alt="image-20221002232722331" /></p>

<p><br /></p>

<h2 id="von-neumann-architecture">Von Neumann architecture</h2>

<ul>
  <li>Instructions and data are stored in a single read-write memory</li>
  <li>Contents of memory are <strong>addressable by location</strong> without regard to the type of data contained there</li>
  <li>Execution occurs <strong>in sequential</strong> fashion unless explicitly modified
    <ul>
      <li>explicitly modified - loop, selection</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="what-is-a-program">What is a program?</h2>

<ul>
  <li>A sequence of steps (instructions)</li>
  <li>For each step, an arithmetic or logical operation is done</li>
  <li>
    <p>For each operation, a different set of control signals is needed</p>
  </li>
  <li>instruction cycleì˜ ë¬´í•œ ë°˜ë³µ</li>
</ul>

<p><br /></p>

<h2 id="instruction-cycle">Instruction Cycle</h2>

<ul>
  <li>Two steps:
    <ul>
      <li>Fetch</li>
      <li>Execute</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002232821824.png" alt="image-20221002232821824" /></p>

<ul>
  <li>atomic program
    <ul>
      <li>ì™¸ë¶€ì—ì„œ interruptë¥¼ ê±¸ì–´ë„ ê·¸ ì¦‰ì‹œ ë©ˆì¶”ì§€ ì•ŠìŒ</li>
      <li>ë‚˜ì¤‘ì— ì²˜ë¦¬</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="instruction-cycle-with-interrupts---state-diagram">Instruction Cycle (with Interrupts) - State Diagram</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002232849213.png" alt="image-20221002232849213" /></p>

<p><br /></p>

<h2 id="background">Background</h2>

<ul>
  <li>
    <p>Program must be brought (from disk) into memory and placed within a  process for it to be run</p>
  </li>
  <li>
    <p>Main memory and registers are only storage CPU can access directly</p>
  </li>
  <li>
    <p>Memory unit only sees a stream of addresses + read requests, or address + data and write requests</p>
  </li>
  <li>
    <p>Register access in one CPU clock (or less)</p>
  </li>
  <li>
    <p>Main memory can take many cycles, causing a <strong>stall</strong></p>
  </li>
  <li>
    <p><strong>Cache</strong> sits between main memory and CPU registers</p>
  </li>
  <li>Protection of memory required to ensure correct operation
    <ul>
      <li>Multi-programmingì—ì„œì˜ security</li>
      <li>ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ê°„ì— ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ ì¹¨ë²”ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šë„ë¡ ê´€ë¦¬</li>
    </ul>
  </li>
  <li>Memory resource ê´€ë¦¬
    <ul>
      <li>As a result of CPU scheduling -&gt; improved cpu utilization, response</li>
      <li>CPU schedulingê³¼ ê°™ì´ ë©”ëª¨ë¦¬ë¥¼ resource ì°¨ì›ì—ì„œ ê´€ë¦¬í•´ì•¼í•¨.  (ë¶„ë°° ë¬¸ì œ)</li>
    </ul>
  </li>
  <li>A program resides on a disk as a <strong>binary executable file</strong> -&gt; a.out
    <ul>
      <li>Program must be brought into memory and placed within a process  for it to be executed.</li>
      <li>Input queue â€“ collection of processes on the disk that are waiting to be brought into memory for execution.
        <ul>
          <li>Select one of the processes in input queue, load that process  into memory (by longterm scheduler)</li>
          <li>Sequence of memory addresses are generated by the running  program (Instruction execution cycles, addressing modes)</li>
          <li>If process terminate, its memory space is made available</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="base-and-limit-registers">Base and Limit Registers</h2>

<ul>
  <li>A pair of base and limit registers define the logical address  space</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002233047756.png" alt="image-20221002233047756" /></p>

<p>base register - limit registerê°€ ê°€ë¦¬í‚¤ëŠ” ë²”ì£¼ì— ë²—ì–´ë‚œ ê²ƒì€ illegal processë¡œ ê°„ì£¼</p>

<p>ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë°”ë€œ (by OS)</p>

<p><br /></p>

<h2 id="hardware-address-protection-with-base-and-limit-registers">Hardware Address Protection with Base and Limit Registers</h2>

<ul>
  <li>CPU must check every memory access generated in user mode to  be sure it is between base and limit for that user</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002233125230.png" alt="image-20221002233125230" /></p>

<ul>
  <li>the instructions to loading the base and limit registers are privileged</li>
</ul>

<p><br /></p>

<h2 id="address-binding">Address Binding</h2>

<ul>
  <li>Programs on disk, ready to be brought into memory to execute form an <strong>input queue</strong>
    <ul>
      <li>Without support, must be loaded into address 0000</li>
    </ul>
  </li>
  <li>Inconvenient to have first user process physical address always at 0000
    <ul>
      <li>How can it not be?</li>
      <li>Most systems allow a user process to reside in any part of the physical memory</li>
      <li><strong>First address</strong> of user process <strong>does not need to be 0</strong></li>
    </ul>
  </li>
  <li>Further, addresses represented in different ways at different stages of a programâ€™s life</li>
</ul>

<p><br /></p>

<h2 id="background-1">Background</h2>

<ul>
  <li>User programs go through several steps before being executed.
    <ul>
      <li>Source code addresses usually symbolic address</li>
      <li>Compiled code addresses <strong>bind</strong> to <code class="language-plaintext highlighter-rouge">relocatable addresses </code>
        <ul>
          <li>A compiler binds symbolic address to relocatable address</li>
          <li>i.e. â€œ14 bytes from beginning of this moduleâ€</li>
        </ul>
      </li>
      <li>Linker or loader will bind relocatable addresses to absolute addresses
        <ul>
          <li>i.e. 74014  - ìµœì¢… ì£¼ì†Œ</li>
        </ul>
      </li>
      <li>Each binding maps one address space to another</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002233255372.png" alt="image-20221002233255372" /></p>

<ul>
  <li>Program
    <ul>
      <li>symbolic address</li>
    </ul>
  </li>
  <li>1.c, 2.c</li>
  <li>1.o, 2.o(by link module)
    <ul>
      <li>relocatable address</li>
    </ul>
  </li>
  <li>a.out(by linker)
    <ul>
      <li>absolute address</li>
    </ul>
  </li>
  <li>mmì— íƒ‘ì¬(by loader)</li>
</ul>

<p><br /></p>

<h2 id="address-binding-1">Address Binding</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221127011733238.png" alt="image-20221127011733238" /></p>

<ul>
  <li>ë¹ˆì¹¸ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì€ ì±„ìš°ì§€ ëª»í•˜ëŠ” ê²½ìš°
    <ul>
      <li>BLE NEXTê°€ BLE ___ë¡œ ë˜ì–´ ìˆëŠ” ì´ìœ ëŠ” NEXTì— ëŒ€í•œ ë¶€ë¶„ì˜ ì£¼ì†Œë¥¼ ì•„ì§ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë¹„ì›Œë†”ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="address-binding-2">Address Binding</h2>

<ul>
  <li>Internal address(ìœ„ ì˜ˆì œì˜ ë¹ˆì¹¸)ëŠ” pass1,2ë¥¼ í†µí•˜ì—¬ reconcile(ì¡°ì •)ë¨.
    <ul>
      <li>ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‘ ë²ˆ ì½ìœ¼ë©´ ê°€ëŠ¥</li>
    </ul>
  </li>
  <li>Reconcile : give actual address</li>
  <li>But, How about addresses which cannot be reconciled at  assembly?
    <ul>
      <li>References to external modules</li>
      <li>References to absolute address</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="address-bindingì•ˆì¤‘ìš”">Address Binding(ì•ˆì¤‘ìš”)</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002233459847.png" alt="image-20221002233459847" /></p>

<ul>
  <li>What is done at each step ?
    <ul>
      <li>Assembler
        <ul>
          <li>Translate assembly language instruction into machine code
            <ul>
              <li>Format instruction words</li>
              <li>Reconciles labels/variables location</li>
              <li>Usually addresses are generated in relocatable form
                <ul>
                  <li>Â» Assumes first words of program at address zero</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>â€‹</p>

<p><br /></p>

<h2 id="address-bindingì•ˆì¤‘ìš”-1">Address Binding(ì•ˆì¤‘ìš”)</h2>

<ul>
  <li>Linker
    <ul>
      <li>Takes various relocatable, assembled modules &amp; combines  them into 1 module
        <ul>
          <li>Reconcile external reference</li>
          <li>Generates load module</li>
          <li>What is in load module
            <ul>
              <li>Machine instruction / data</li>
              <li>Information about size of various parts (code, table  data)</li>
              <li>Relocation information
                <ul>
                  <li>Â» Addresses which need to be reconciled when  module is placed in a particular location in  memory</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="address-bindingì•ˆì¤‘ìš”-2">Address Binding(ì•ˆì¤‘ìš”)</h2>

<ul>
  <li>Loader
    <ul>
      <li>Accepts load module, places it into memory</li>
      <li>Reconciling addresses where necessary</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="binding-of-instructions-and-data-to-memoryì¤‘ìš”">Binding of Instructions and Data to Memory(ì¤‘ìš”)</h2>

<p>Address binding of instructions and data to memory addresses can happen at three different stages.</p>

<p>absolute addressê°€ ì–¸ì œ ê²°ì •ë˜ëƒì— ë”°ë¼ ë‹¤ë¥´ë‹¤! (binding)</p>

<ul>
  <li><strong>Compile time</strong>:
    <ul>
      <li>If it is known at compile time where the process will reside in memory, absolute code can be generated;
        <ul>
          <li>ì»´íŒŒì¼ í•  ë•Œ ì´ í”„ë¡œê·¸ë¨ì´ MMì— íƒ‘ì¬ë  ìœ„ì¹˜ì˜ ì‹œì‘ ì£¼ì†Œë¥¼ ì•Œê³ ìˆì„ ë•Œ ê°€ëŠ¥</li>
        </ul>
      </li>
      <li>link moduleì„ ë§Œë“¤ì§€ ì•Šê³  ë°”ë¡œ load moduleì„ ë§Œë“¦</li>
      <li>must recompile code if starting location changes.</li>
    </ul>
  </li>
  <li><strong>Load time</strong>:
    <ul>
      <li>Must generate <strong>relocatable code</strong> if memory location is not known at compile time.</li>
      <li>If the starting address changes, we need to reload the user code</li>
    </ul>
  </li>
  <li><strong>Execution time</strong>:  (ì¤‘ìš”)
    <ul>
      <li><strong>Binding delayed</strong> until run time if the process can be moved during its execution from one memory segment to another.</li>
      <li>bindingì´ ì»´íŒŒì¼ì„ í•  ë•Œë„ absolute addressê°€ ê²°ì •ë˜ì§€ ì•Šê³  loading í•  ë•Œë„ ê²°ì •ì´ ì•ˆ ë˜ê³  ì˜¤ì§ í•´ë‹¹ instructionì´ ì‹¤í–‰ë  ë•Œë§Œ ê²°ì •ë˜ëŠ” ê²ƒì´ë‹¤.</li>
      <li>Need hardware support for address maps (e.g., base and limit  registers).</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="multistep-processing-of-a-user-program">Multistep Processing of a User Program</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002233809961.png" alt="image-20221002233809961" /></p>

<p>object module - link module</p>

<p>load module(a.outì„ ë§Œë“¤ì–´ëƒ„)</p>

<p><br /></p>

<h2 id="logical-vs-physical-address-space">Logical vs. Physical Address Space</h2>

<ul>
  <li>The concept of a <strong>logical address space</strong> that is bound to a separate physical address space is central to proper memory management.
    <ul>
      <li>Logical address â€“ generated by the <strong>CPU</strong>; also referred to as virtual  address.</li>
      <li>Physical address â€“ address seen by the memory unit.</li>
      <li>MMU : ë‘ ì£¼ì†Œ ê°„ì˜ ë³€í™˜ì„ í•´ì£¼ëŠ” ì—­í• </li>
    </ul>
  </li>
  <li>Logical and physical addresses are the same in compile-time and loadtime address-binding schemes; logical (virtual) and physical addresses  differ in execution-time address-binding scheme.
    <ul>
      <li><strong>Logical address space</strong> is the set of all logical addresses generated  by a program</li>
      <li><strong>Physical address space</strong> is the set of all physical addresses  generated by a program</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="physical-logical-storage">Physical &amp;Â Logical storage</h2>

<ul>
  <li>Sharing of memory
    <ul>
      <li>Where is a process information placed?</li>
      <li>How is it later accessed?</li>
      <li>How is security insured?</li>
      <li>Want the addressing to be transparent to user</li>
    </ul>
  </li>
  <li>Physical storage
    <ul>
      <li>Actual storage in hardware memory of machine, usually start at zero</li>
    </ul>
  </li>
  <li>Logical storage
    <ul>
      <li>Memory as perceived by process
        <ul>
          <li>Can be larger or smaller than physical storage (ê°™ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.)</li>
          <li>Size usually limited by architecture (&lt;&gt;virtual address)</li>
        </ul>
      </li>
      <li>Usually relocatable address</li>
    </ul>
  </li>
  <li>Processes only see logical storage
    <ul>
      <li>Logical address must be translated to physical address
        <ul>
          <li>execution time bindingì˜ ê²½ìš° ë³€í™˜ì´ í•„ìš”!!</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="memory-management-unit-mmu">Memory-Management Unit (MMU)</h2>

<ul>
  <li>Hardware device that at run time maps virtual to physical address</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002234124953.png" alt="image-20221002234124953" /></p>

<ul>
  <li>Many methods possible, covered in the rest of this chapter</li>
  <li>To start, consider simple scheme where the value in the relocation register is  added to every address generated by a user process at the time it is sent to  memory
    <ul>
      <li>Base register now called <strong>relocation register</strong></li>
      <li>MS-DOS on Intel 80x86 used 4 relocation registers</li>
    </ul>
  </li>
  <li>The user program deals with logical addresses; it never sees the real physical addresses
    <ul>
      <li>logical addressë§Œ ì•Œì•„ë„ physical addressì— ì ‘ê·¼ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— physical addressë¥¼ ëª°ë¼ë„ ë¨.</li>
      <li>Execution-time binding occurs when reference is made to location in memory</li>
      <li>Logical address bound to physical addresses</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="dynamic-relocation-using-a-relocation-register">Dynamic relocation using a relocation register</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002234148212.png" alt="image-20221002234148212" /></p>

<p>ê°€ì¥ ê°„ë‹¨í•œ í˜•íƒœì˜ ì£¼ì†Œ ë³€í™˜</p>

<p><br /></p>

<h2 id="dynamic-loading">Dynamic Loading</h2>

<ul>
  <li>Entire program and data of a process must be in physical memory for the process to execute
    <ul>
      <li>The size of process is limited to the size of physical memory</li>
    </ul>
  </li>
  <li>To obtain better memory space utilization, dynamic loading can be used
    <ul>
      <li>Routine is not loaded until it is called</li>
      <li>Better memory-space utilization; unused routine is never loaded.</li>
      <li>All routines are kept on disk in a relocatable load format</li>
      <li>When an unloaded routine is needed, relocatable loader is called to load the  desired routine into memory, then control is passed to newly loaded code</li>
      <li>Useful when large amounts of code are needed to handle infrequently  occurring cases.</li>
      <li>No special support from the operating system is required except providing  library routines to implement DL
        <ul>
          <li>implemented through program design.</li>
          <li>OS can help by providing libraries to implement dynamic loading</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ë¶ˆí•„ìš”í•œ ë£¨í‹´ì˜ ë©”ëª¨ë¦¬ íƒ‘ì¬ ë°©ì§€</li>
</ul>

<p><br /></p>

<h2 id="dynamic-linking">Dynamic Linking</h2>

<p>OSê°€ ì§€ì›</p>

<p>ì¤‘ë³µ íƒ‘ì¬ ë°©ì§€</p>

<ul>
  <li>Static linking â€“ system libraries and program code combined by the loader into the  binary program image
    <ul>
      <li>shared libraries</li>
    </ul>
  </li>
  <li>Dynamic linking
    <ul>
      <li>Rather than <strong>loading</strong> being postponed until execution time, <strong>Linking</strong> is postponed until execution time.</li>
    </ul>
  </li>
  <li>Usually used with system libraries such as language library
    <ul>
      <li>W/O this facility, all programs on a system need to have a copy of their language  library, wastes both disk and memory</li>
    </ul>
  </li>
  <li>Small piece of code, <strong>stub</strong>, is included in the image for each library routine reference
    <ul>
      <li>Stub is used to locate the appropriate memory-resident library routine.</li>
      <li>Stub replaces itself with the address of the routine, and executes the routine</li>
    </ul>
  </li>
  <li>Operating system checks if routine is in processesâ€™ memory address
    <ul>
      <li>If not in address space, add to address space</li>
    </ul>
  </li>
  <li>Consider applicability to patching system libraries
    <ul>
      <li>Versioning may be needed</li>
    </ul>
  </li>
  <li>Need OS support because of address space problem between different processes</li>
</ul>

<p><br /></p>

<h2 id="swapping">Swapping</h2>

<p>í”„ë¡œì„¸ìŠ¤ ì „ì²´ ê³µê°„ì„ ëŒ€ìƒìœ¼ë¡œ</p>

<ul>
  <li>(MMì— ê³µê°„ì´ ë¶€ì¡±í•˜ë©´) A process can be <strong>swapped</strong> temporarily <strong>out</strong> of memory to a backing store, and  then(ê³µê°„ì— ì—¬ìœ ê°€ ìƒê¸°ë©´) brought <strong>back into</strong> memory for continued execution</li>
  <li>Total physical memory space of processes can exceed physical memory</li>
  <li><span style="color:red">Need execution time binding </span></li>
  <li><strong>Backing store</strong> â€“ fast disk large enough to accommodate <strong>copies</strong> of all memory  images for all users; must provide direct access to these memory images</li>
  <li><strong>Roll out, roll in</strong> â€“ swapping variant used for priority-based scheduling  algorithms; lower-priority process is swapped out so higher-priority process can be loaded and executed</li>
  <li>Major part of swap time is transfer time; total transfer time is directly proportional  to the amount of memory swapped</li>
  <li>System maintains a <strong>ready queue</strong> of ready-to-run processes which have  memory images on disk</li>
</ul>

<p>Swappingì€ <strong>ìš°ì„ ìˆœìœ„ê°€ ë†’ê±°ë‚˜ ì¤‘ìš”í•œ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ë ¤ í•  ë•Œ ê³µê°„ì´ ë¶€ì¡±í•˜ë©´</strong> <strong>í˜„ì¬ ë©”ëª¨ë¦¬ ìœ„ì— ì˜¬ë¼ê°€ ìˆëŠ” í”„ë¡œì„¸ìŠ¤</strong> ì¤‘ ìˆ˜ë§ì€ ì•Œê³ ë¦¬ì¦˜ ì¤‘ í•˜ë‚˜ë¥¼ ì´ìš©í•˜ì—¬ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ <strong>ì ì‹œ ë””ìŠ¤í¬ì— ì €ì¥</strong>ì„ í•˜ê³  <strong>ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰</strong>í•˜ê²Œ ë˜ëŠ”ë°ìš”.</p>

<p>ì´ í”„ë¡œì„¸ìŠ¤ê°€ <strong>ì‘ì—…ì„ ë§ˆì¹˜ë©´ ë””ìŠ¤í¬ì— ìˆë˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ê²Œ</strong> ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìš°ì„ ìˆœìœ„ê°€ ë†’ê±°ë‚˜ ì¤‘ìš”í•œ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ê°„ì— ë“¤ì–´ê°€ëŠ” ê²ƒì„ Swap-inì´ë¼ í•˜ë©° ìë¦¬ë¥¼ ë‚´ì–´ì£¼ì–´ ë””ìŠ¤í¬ë¡œ ë¹ ì§€ê²Œ ë˜ëŠ” ê³¼ì •ì„ Swap-outì´ë¼ê³  í•©ë‹ˆë‹¤.</p>

<p><strong>Swap-out ëœ í”„ë¡œì„¸ìŠ¤ê°€ ë‹¤ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°ˆ ë•ŒëŠ” ì›ë˜ ìˆë˜ ìë¦¬ë¡œ ëŒì•„ê°€ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong> ì—¬ê¸°ì„œ ìˆ˜ë§ì€ ì•Œê³ ë¦¬ì¦˜ ì¤‘ ìƒí™©ì— ë§ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ê³ ë¥´ëŠ” ê²ƒê³¼ ë””ìŠ¤í¬ì™€ ë©”ëª¨ë¦¬ ê°„ì˜ ì†ë„ ì°¨ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì´ìŠˆë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="swapping-1">Swapping</h2>

<ul>
  <li>Does the swapped out process need to swap back in to same physical addresses?
    <ul>
      <li>No!!!!!!!!!!</li>
    </ul>
  </li>
  <li>Depends on address binding method
    <ul>
      <li>Plus consider pending I/O to / from process memory space</li>
    </ul>
  </li>
  <li>Modified versions of swapping are found on many systems (i.e., UNIX,  Linux, and Windows)
    <ul>
      <li>Swapping normally disabled</li>
      <li>Started if more than threshold amount of memory allocated</li>
      <li>Disabled again once memory demand reduced below threshold</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="schematic-view-of-swapping">Schematic View of Swapping</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002234528490.png" alt="image-20221002234528490" /></p>

<p><br /></p>

<h2 id="context-switch-time-including-swapping">Context Switch Time including Swapping</h2>

<ul>
  <li>If next processes to be put on CPU is not in memory, need to swap out a process and  swap in target process</li>
  <li>Context switch time can then be very high</li>
  <li>100MB process swapping to hard disk with transfer rate of 50MB/sec
    <ul>
      <li>Plus disk latency of 8 ms</li>
      <li>Swap out time of 2008 ms</li>
      <li>Plus swap in of same sized process</li>
      <li>Total context switch swapping component time of 4016ms (&gt; 4 seconds)</li>
    </ul>
  </li>
  <li>Can reduce if reduce size of memory swapped â€“ by knowing how much memory really  being used
    <ul>
      <li>System calls to inform OS of memory use via request memory and release  memory</li>
      <li>request_memory() and release_memory()</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="context-switch-time-including-swapping-1">Context Switch Time including Swapping</h2>

<ul>
  <li>Other constraints as well on swapping
    <ul>
      <li>Pending I/O â€“ canâ€™t swap out as I/O would occur to wrong process</li>
      <li>Or always transfer I/O to kernel space, then to I/O device
        <ul>
          <li>Known as double buffering, adds overhead
            <ul>
              <li>kernel spaceì˜ bufferì—ì„œ user spaceì˜ bufferë¡œ ë˜ ë‹¤ì‹œ bufferingì„ í•´ì•¼ í•¨.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Standard swapping not used in modern operating systems
    <ul>
      <li>But modified version common
        <ul>
          <li>Swap only when free memory extremely low</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="swapping-on-mobile-systems">Swapping on Mobile Systems</h2>

<ul>
  <li>Not typically supported
    <ul>
      <li>Flash memory based
        <ul>
          <li>Small amount of space</li>
          <li>Limited number of write cycles</li>
          <li>Poor throughput between flash memory and CPU on mobile platform</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Instead use other methods to free memory if low
    <ul>
      <li>iOS asks apps to voluntarily relinquish allocated memory (í• ë‹¹ ë°›ì€ ë©”ëª¨ë¦¬ ë°˜ë‚© ìš”ì²­)
        <ul>
          <li>Read-only data thrown out and reloaded from flash if needed</li>
          <li>Failure to free can result in termination</li>
        </ul>
      </li>
      <li>Android terminates apps if low free memory, but first writes application  state to flash for fast restart</li>
      <li>Both OSes support paging as discussed below</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="memory-management">Memory management</h2>

<ul>
  <li>How memory is allocated to different jobs to hold their (entire or parts of)  load module
    <ul>
      <li>Various levels of memory
        <ul>
          <li>Cache, main memory, secondary storage</li>
          <li>Access slower storage (secondary storage) as infrequently as  possible</li>
          <li>When need to access?
            <ul>
              <li>Fetch instruction</li>
              <li>Fetch data/store data</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Use of main memory
        <ul>
          <li>Utilize to fullest</li>
          <li>Must be shared</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="placement-of-modules-in-memory">Placement of modules in memory</h2>

<ul>
  <li>Main memory must support both OS and user processes
    <ul>
      <li>Kernel remains in main memory</li>
      <li>Memory have security (between kernel and user, between users)</li>
    </ul>
  </li>
  <li>Limited resource, must allocate efficiently</li>
  <li>Determine different placement strategies for user processes</li>
  <li>Compare strategies based on
    <ul>
      <li><strong>Internal fragmentation</strong>
        <ul>
          <li>blockì˜ ë‹¨ìœ„ í• ë‹¹ìœ¼ë¡œ ì¸í•´ ìš”ì²­í•˜ëŠ” ë©”ëª¨ë¦¬ í¬ê¸°ë³´ë‹¤ í° ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ ì£¼ì–´ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒ</li>
          <li>Pieces of memory which are associated with a process but which the  process cannot using
            <ul>
              <li>This space cannot be allocated</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>External fragmentation</strong>
        <ul>
          <li>ë©”ëª¨ë¦¬ ê³µê°„ì„ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹í•´ì„œ ìƒê¸°ëŠ” ë¬¸ì œ</li>
          <li>ë©”ëª¨ë¦¬ ê³µê°„ 50ì´ ë‚¨ì•„ìˆì„ ë•Œ 40ì„ ìš”ì²­í•´ë„ ì¡°ê°ì¡°ê° ë‚˜ìˆìœ¼ë©´ ì¤„ ìˆ˜ê°€ ì—†ë‹¤.</li>
          <li>Pieces of free too small to be allocated and are therefore wasted
            <ul>
              <li>free spaceì´ê¸´ í•˜ì§€ë§Œ ë„ˆë¬´ ì‘ì•„ì„œ ë‹¤ë¥¸ ê²ƒì—ê²Œ í• ë‹¹í•  ìˆ˜ ì—†ëŠ” ê³µê°„</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ë‘ê°€ì§€ fragmentationì„ ìµœì†Œí™” ì‹œì¼œì•¼ í•¨.</li>
    </ul>
  </li>
  <li>Degree of multi-programming
    <ul>
      <li>ëª‡ê°œì˜ í”„ë¡œê·¸ë¨ì´ ë™ì‹œì— ì‹¤í–‰ ì¤‘ì¸ê°€</li>
      <li>Measure of number of jobs which can be in system based on the allocation of  some portion of memory for the jobâ€™s use</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="contiguous-allocation">Contiguous Allocation</h2>

<ul>
  <li>Main memory usually into two partitions:
    <ul>
      <li>Resident operating system, usually held in low memory with interrupt vector.</li>
      <li>User processes then held in high memory.</li>
      <li>Each process contained <strong>in single contiguous section of memory</strong></li>
    </ul>
  </li>
  <li>Relocation registers used to protect user processes from each other, and  from changing operating-system code and data
    <ul>
      <li><strong>Base register</strong> contains value of smallest physical address</li>
      <li><strong>Limit register</strong> contains range of logical addresses â€“ each logical  address must be less than the limit register</li>
      <li>MMU maps logical address dynamically</li>
      <li>Can then allow actions such as kernel code being <strong>transient</strong> and  kernel changing size</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="hardware-support-for-relocation-and-limit-registers">Hardware Support for Relocation and Limit Registers</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002235106545.png" alt="image-20221002235106545" /></p>

<p><br /></p>

<h2 id="single-partition-allocation">Single-partition allocation</h2>

<ul>
  <li>Single job in memory (All or nothing)
    <ul>
      <li>Place the entire job in the user portion main memory</li>
    </ul>
  </li>
  <li>Where is job placed?
    <ul>
      <li>User job can be at address directly next to kernel space</li>
      <li>Kernel-user or user-kernel depending on interrupt h/w</li>
      <li>Relocation-register scheme used to protect user processes from each other,  and from changing operating-system code and data.</li>
      <li>Relocation register contains value of smallest physical address; limit register  contains range of logical addresses â€“ each logical address must be less than  the limit register.</li>
    </ul>
  </li>
  <li>Adv.: Compile time address binding</li>
  <li>Dis, : need recompiling when kernel size changes
    <ul>
      <li>Kernel routine ì¤‘ ìì£¼ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” programì„ ë¶ˆëŸ¬ë“¤ì¼ë•Œ
        <ul>
          <li>Place user job at opposite end of memory and allow to grow toward  kernel space</li>
          <li>Translation of logical to physical (execution time biding)
            <ul>
              <li>Security</li>
              <li>Simple addressing</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="multiple-fixed-parition">Multiple fixed parition</h2>

<ul>
  <li>MM is divided into a number of fixed size partition</li>
  <li>When a process arrives, it is placed into one of the partition which are  larger than job itself     -&gt; process is assigned entire partition</li>
  <li>Prob.
    <ul>
      <li>internal fragmentation</li>
      <li>Degree of multiprogramming bounded by # of partitions</li>
    </ul>
  </li>
  <li>Advantages
    <ul>
      <li>Address change easy, because simple addressing</li>
      <li>Easy security</li>
      <li>Easy bookeeping : no free memory management</li>
    </ul>
  </li>
  <li>What if a job does not fit the partition/memory ? (larger than)
    <ul>
      <li>overlay</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="overlaysìƒëµ">Overlays(ìƒëµ)</h2>

<ul>
  <li>Keep in memory only those instructions and data that are needed at any  given time.
    <ul>
      <li>Breaks program into pieces (Fig. 8.2)</li>
      <li>When other instructions are needed, they are loaded into space that  are occupied by instructions that are no longer needed</li>
    </ul>
  </li>
  <li>Needed when process is larger than amount of memory allocated to it.</li>
  <li>Implemented by user, no special support needed from operating system,  programming design of overlay structure is complex</li>
</ul>

<p><br /></p>

<h2 id="multiple---variable-sized-partition-allocation">Multiple - Variable sized partition allocation</h2>

<ul>
  <li>Multiple-partition allocation
    <ul>
      <li>Degree of multiprogramming limited by number of partitions</li>
      <li><strong>Variable-partition</strong> sizes for efficiency (sized to a given processâ€™ needs)</li>
      <li>Hole â€“ block of available memory; holes of various size are scattered  throughout memory.
        <ul>
          <li>ì—°ì†ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì£¼ë©´ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í• ë‹¹ëœ ë©”ëª¨ë¦¬ ê³µê°„ ì‚¬ì´ì— í• ë‹¹ ë˜ì§€ ì•Šì€ ë¹ˆê³µê°„ì´ ìƒê¸°ê²Œ ë˜ëŠ”ë° ì´ë¥¼ hole ì´ë¼ê³  í•œë‹¤.</li>
        </ul>
      </li>
      <li>When a process arrives, it is allocated memory from a hole large enough to  accommodate it.</li>
      <li>Process exiting frees its partition, adjacent free partitions combined</li>
      <li>Operating system maintains information about: a) allocated partitions b) free partitions (hole)</li>
      <li>Non internal, external Fragmentation</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002235500482.png" alt="image-20221002235500482" /></p>

<p><br /></p>

<h2 id="dynamic-storage-allocation-problem">Dynamic Storage-Allocation Problem</h2>

<p>How to satisfy a request of size n from a list of free holes.</p>

<p>ì—°ì†ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹í•´ ì£¼ëŠ” ë°©ë²•ì— í¬ê²Œ ì„¸ê°€ì§€ ë‚´ë¶€ì ì€ ë°©ë²•ì´ ì¡´ì¬í•œë‹¤.</p>

<ul>
  <li><strong>First-fit</strong>: Allocate <strong>the first hole</strong> that is big enough.
    <ul>
      <li>ë©”ëª¨ë¦¬ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ìš”ì²­í•œ í¬ê¸°ë¥¼ ë§Œì¡±í•˜ëŠ” hole ì¤‘ ê°€ì¥ ì²« ë²ˆì§¸ holeì„ í• ë‹¹</li>
      <li>Maintain free space information as a <strong>linked list</strong> sorted by  address (start, size)to allocate search list, assign first partition  whose size is larger than job</li>
      <li>On fly compaction
        <ul>
          <li>Ability to combine adjacent free space</li>
          <li>Easy to maintain list in order</li>
        </ul>
      </li>
      <li>Long search time</li>
      <li>External fragmentation
        <ul>
          <li>Decreases size of large block</li>
          <li>Potentially increase search time</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Best-fit</strong>: Allocate <strong>the smallest hole</strong> that is big enough; must search entire list, unless ordered by size. Produces the smallest leftover hole.
    <ul>
      <li>ë©”ëª¨ë¦¬ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ, ìš”ì²­í•œ í¬ê¸°ë¥¼ ë§Œì¡±í•˜ëŠ” hole ì¤‘ ê°€ì¥ ì‘ì€ í¬ê¸°ì˜ holeì„ í• ë‹¹</li>
      <li>Maintain free space as large of chunks as possible
        <ul>
          <li>Maintain list is sorted in increasing size order</li>
        </ul>
      </li>
      <li>Elements may have to be moved in the list when they change in size</li>
      <li>Remainder is going to be smaller</li>
    </ul>
  </li>
  <li><strong>Worst-fit</strong>: Allocate the largest hole; must also search entire list.  Produces the largest leftover hole.
    <ul>
      <li><em>Best-Fitê³¼ ë°˜ëŒ€ë¡œ ìš”ì²­í•œ í¬ê¸°ë¥¼ ë§Œì¡±í•˜ëŠ” Hole ì¤‘ ê°€ì¥ í° í¬ê¸°ì˜ Holeì„ í• ë‹¹</em></li>
      <li>Maintain list in decreasing size order</li>
      <li>Try to avoid generating small pieces of free space</li>
      <li>Decrease the amount of large free space</li>
    </ul>
  </li>
  <li>First-fit and best-fit better than worst-fit in terms of speed and  storage utilization</li>
  <li>First fit analysis reveals that given N blocks allocated, 0.5 N blocks lost to fragmentation
    <ul>
      <li>1/3 may be unusable -&gt; 50-percent rule</li>
      <li>internal fragmentation ë°œìƒ!!</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="fragmentation---ì¤‘ìš”">Fragmentation - ì¤‘ìš”</h2>

<ul>
  <li>External fragmentation â€“ total memory space exists to satisfy a request,  but it is not contiguous.</li>
  <li>Internal fragmentation â€“ allocated memory may be slightly larger than  requested memory; this size difference is memory internal to a partition,  but not being used.</li>
  <li>Reduce external fragmentation by compaction (ë”°ë‹¥ë”°ë‹¥ ë¶™ì—¬ì„œ!)
    <ul>
      <li>Shuffle memory contents to place all free memory together in one  large block.</li>
      <li><strong>Compaction is possible only if relocation is dynamic</strong>, and is done at  execution time.</li>
      <li>í• ë‹¹ëœ ë©”ëª¨ë¦¬ ê³µê°„ë“¤ì„ í•œìª½ìœ¼ë¡œ ëª¨ì•„ ì—°ì†ëœ ê³µê°„ì„ í™•ë³´í•˜ëŠ” ê²ƒ</li>
      <li>I/O problem
        <ul>
          <li>Latch job in memory while it is involved in I/O.</li>
          <li>Do I/O only into OS buffers.</li>
        </ul>
      </li>
      <li>í•˜ì§€ë§Œ ì´ëŸ¬í•œ ë°©ë²•ë“¤ì€ ì‹¤í–‰ ì‹œê°„ì— ì£¼ì†Œ ë°”ì¸ë”©ì´ ì¼ì–´ë‚˜ëŠ” í”„ë¡œê·¸ë¨ë“¤ë§Œ ê°€ëŠ¥í•˜ë©° ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ì••ì¶•ë˜ì—ˆì„ ë•Œ ì˜ëª»ëœ ë©”ëª¨ë¦¬ ê³µê°„ì˜ ì£¼ì†Œì— ì ‘ê·¼í•˜ê²Œ ë  ìˆ˜ ìˆë‹¤. -&gt; ìƒë‹¹íˆ ì œí•œì ì„</li>
      <li>Now consider that backing store has same fragmentation problems</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>ê·¸ë˜ì„œ ë‚˜ì˜¨ ë°©ì‹ì´ ì• ì´ˆì— ë©”ëª¨ë¦¬ ê³µê°„ì„ ì—°ì†í•˜ì§€ ì•Šê²Œ í• ë‹¹í•´ ì£¼ëŠ” ë°©ë²•ì´ë‹¤.</p>

<ul>
  <li>í•˜ë‚˜ëŠ” Paging ê¸°ë²•</li>
  <li>í•˜ë‚˜ëŠ” Segmentation ê¸°ë²•</li>
</ul>

<h2 id="segmentation">Segmentation</h2>

<ul>
  <li>
    <p>Memory-management scheme that supports user view of memory</p>
  </li>
  <li>
    <p>A program is a collection of segments</p>

    <ul>
      <li>
        <p>A segment is a logical unit such as:</p>

        <p>â€‹			main program</p>

        <p>â€‹			procedure</p>

        <p>â€‹			function</p>

        <p>â€‹			method</p>

        <p>â€‹			object</p>

        <p>â€‹			local variables, global variables</p>

        <p>â€‹			common block</p>

        <p>â€‹			stack</p>

        <p>â€‹			symbol tablearray</p>
      </li>
    </ul>
  </li>
  <li>Paging ê¸°ë²•ì€ Logical addressë¥¼ page ë‹¨ìœ„ë¡œ, physical address ë¥¼ ê°™ì€ í¬ê¸°ì˜ frame ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì˜¬ë¦¬ê³  ì ‘ê·¼</li>
  <li>Segmentationì€ ëª¨ë‘ ê³ ì •ëœ í¬ê¸°ê°€ ì•„ë‹ˆë¼ ì¼ë ¨ì˜ ë…¼ë¦¬ì  êµ¬ì¡° ë‹¨ìœ„(logical unit)ë¡œ ë‚˜ëˆ„ì–´ ì§„ë‹¤.
    <ul>
      <li>ì´ë ‡ê²Œ ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ë©´ ì‚¬ìš©ìê°€ ë©”ëª¨ë¦¬ì˜ ìƒíƒœë¥¼ ì´í•´í•˜ëŠ”ë° ë”ìš± ë„ì›€ì´ ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="users-view-of-a-program">Userâ€™s View of a Program</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002235912372.png" alt="image-20221002235912372" /></p>

<p>ì‚¬ìš©ì í”„ë¡œê·¸ë¨ì€ logical segmentationìœ¼ë¡œ êµ¬ì„±</p>

<p><br /></p>

<h2 id="logical-view-of-segmentation">Logical View of Segmentation</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221002235931229.png" alt="image-20221002235931229" /></p>

<p>ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤(4ê°œ)ê°€ ë©”ëª¨ë¦¬ì— íƒ‘ì¬ ë  ë•Œ segment ë³„ë¡œ íƒ‘ì¬ ë˜ê¸° ë•Œë¬¸ì— ë¹„ì—°ì†ì ì¸ ê³µê°„ì— í• ë‹¹ëœë‹¤.</p>

<ul>
  <li>ìˆœì„œë„ ë§ì§€ ì•ŠìŒ</li>
</ul>

<p><br /></p>

<h2 id="segmentation-architecture">Segmentation Architecture</h2>

<ul>
  <li>
    <p>Logical address consists of a two tuple:</p>

    <p>â€‹	&lt;segment-number, offset&gt;</p>
  </li>
  <li>
    <p><strong>Segment table</strong> â€“ maps two-dimensional physical addresses; each table entry  has:</p>

    <ul>
      <li>
        <p>base â€“ contains the starting physical address where the segments reside in  memory</p>
      </li>
      <li>
        <p>limit â€“ specifies the length of the segment</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Segment-table base register (STBR) points to the segment tableâ€™s location in  memory</p>
  </li>
  <li>
    <p>Segment-table length register (STLR) indicates number of segments used by a  program;</p>

    <p>segment number s is legal if s &lt; STLR</p>
  </li>
  <li>
    <p>pagingì€ ëª¨ë‘ ê°™ì€ í¬ê¸°ì´ê¸° ë•Œë¬¸ì— ë”°ë¡œ í¬ê¸°ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆì§€ ì•Šì§€ë§Œ, segmentationì€ í¬ê¸°ê°€ ì œê°ê¸° ë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— í¬ê¸°ë¥¼ ì•Œê¸° ìœ„í•´ í•´ë‹¹ segmentationì˜ ì‹œì‘ì ì„ ì•Œë¦¬ëŠ” base ì •ë³´ì™€ ëì„ ì•Œë¦¬ëŠ” limitì„ ê°–ê³  ìˆëŠ”ë‹¤.</p>
  </li>
</ul>

<p><br /></p>

<h2 id="segmentation-architecture-cont">Segmentation Architecture (Cont.)</h2>

<ul>
  <li>Protection
    <ul>
      <li>With each entry in segment table associate:
        <ul>
          <li>validation bit = 0 -&gt; illegal segment</li>
          <li>read/write/execute privileges</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Protection bits associated with segments; code sharing occurs at  segment level</p>
  </li>
  <li>
    <p>Since segments vary in length, memory allocation is a dynamic storage-allocation problem</p>
  </li>
  <li>
    <p>A segmentation example is shown in the following diagram</p>
  </li>
  <li>Relocation.
    <ul>
      <li>dynamic</li>
      <li>by segment table</li>
    </ul>
  </li>
  <li>Sharing.
    <ul>
      <li>shared segments</li>
      <li>same segment number : self reference</li>
    </ul>
  </li>
  <li>Allocation.
    <ul>
      <li>first fit/best fit</li>
      <li>external fragmentation</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="segmentation-hardware">Segmentation Hardware</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000143452.png" alt="image-20221003000143452" /></p>

<ul>
  <li>
    <p>CPUë¥¼ ì¶œë°œí•˜ëŠ” ì£¼ì†Œ - logical address</p>

    <ul>
      <li>
        <p>segment ë²ˆí˜¸</p>
      </li>
      <li>
        <p>displacement</p>
      </li>
    </ul>
  </li>
  <li>
    <p>segmentation tableì— ì ‘ê·¼í•˜ëŠ” Sê°’ì— ëŒ€í•´ì„œ ë¨¼ì € limitë¥¼ ì´ˆê³¼í•˜ëŠ”ì§€ì— ëŒ€í•œ ê²€ì‚¬ë¥¼ í†µí•´ ì˜ëª»ëœ ì£¼ì†Œ ì ‘ê·¼ì„ ë§‰ëŠ”ë‹¤.</p>
  </li>
</ul>

<p><br /></p>

<h2 id="example-of-segmentation">Example of Segmentation</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000157093.png" alt="image-20221003000157093" /></p>

<ul>
  <li>segmentationì€ ê³ ì •ëœ í¬ê¸°ë¡œ ë‚˜ëˆ„ì–´ ì§€ì§€ ì•ŠëŠ” ë‹¤ëŠ” ì ì„ ì œì™¸í•˜ê³  paging ê¸°ë²•ê³¼ ìƒë‹¹íˆ ìœ ì‚¬í•œ ì ì´ ë§ë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="sharing-of-segments">Sharing of segments</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000211184.png" alt="image-20221003000211184" /></p>

<ul>
  <li>code sectionì€ segment table ì •ë³´(base+limit)ë¥¼ ë™ì¼í•˜ê²Œ í•˜ë©´ ê³µìœ ê°€ ê°€ëŠ¥!</li>
  <li>segmentation ì—­ì‹œ pagingê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ê³µí†µëœ ë¶€ë¶„ì€ í•œ ë²ˆì”©ë§Œ ì˜¬ë¦¬ê³  ê·¸ ì£¼ì†Œë¥¼ ê°™ì´ ê³µìœ í•˜ëŠ” shared codeë¥¼ ì§€ì›í•œë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="paging">Paging</h2>

<p>segmentationê³¼ì˜ ì°¨ì´ëŠ” ë‹¨ìœ„ì„.</p>

<ul>
  <li>
    <p>ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë©”ëª¨ë¦¬ë¥¼ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹í•´ ì£¼ì§€ ì•Šê¸° ìœ„í•´ ë‚˜ì˜¨ ë°©ë²•ì´ë‹¤.</p>
  </li>
  <li>Another solution to external fragmentation
    <ul>
      <li>Physical address space of a process can be noncontiguous; process is allocated physical memory whenever the latter is available.</li>
      <li>Avoids external fragmentation</li>
      <li>Avoids problem of varying sized memory chunks</li>
    </ul>
  </li>
  <li>Divide physical memory into <strong>fixed-sized blocks</strong> called <strong>frames</strong> (size is power of 2,  between 512 bytes and 8192 bytes).</li>
  <li>Divide logical memory into blocks of same size called pages.</li>
  <li>Keep track of all free frames.</li>
  <li>To run a program of size <strong>n pages</strong>, need to find <strong>n free frames</strong> and load program.
    <ul>
      <li>n page í¬ê¸°ì˜ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ nê°œì˜ ë‚¨ëŠ” frameì„ ì°¾ê³  í”„ë¡œê·¸ë¨ì„ ë¡œë”©í•œë‹¤.</li>
    </ul>
  </li>
  <li>Set up a page table to translate logical to physical addresses.</li>
  <li>Backing store likewise split into pages</li>
  <li><mark>Still have Internal fragmentation, External?</mark>
    <ul>
      <li>internal fragmentation ì œê±° ë¶ˆê°€ëŠ¥
        <ul>
          <li>í• ë‹¹ì˜ ê¸°ë³¸ë‹¨ìœ„ê°€ frameì´ê¸° ë•Œë¬¸ì— 1ë°”ì´íŠ¸ë¥¼ ìœ„í•´ì„œë„ ë°˜ë“œì‹œ í•œ ê°œì˜ frameì„ í• ë‹¹ë°›ì•„ì•¼ í•œë‹¤.</li>
        </ul>
      </li>
      <li>external fragmentation ì œê±° ê°€ëŠ¥</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="address-translation-scheme">Address Translation Scheme</h2>

<p>ì´ëŸ¬í•œ paging ê¸°ë²•ì€ ë©”ëª¨ë¦¬ì˜ ì—°ì†ì ì¸ ê³µê°„ì— ì˜¬ë¼ê°€ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°ê°ì´ ì–´ëŠ ìœ„ì¹˜ì— ì˜¬ë¼ê°€ëŠ”ì§€ Page Tableì— ì €ì¥ëœ ê°’ìœ¼ë¡œ ì£¼ì†Œë¥¼ ë³€í™˜í•˜ì—¬ ì›í•˜ëŠ” ìœ„ì¹˜ì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.</p>

<ul>
  <li>
    <p>Address generated <strong>by CPU</strong> is divided into:</p>

    <ul>
      <li><strong>Page number</strong> (p) â€“ used as an index into a page table which  contains base address of each page in physical memory</li>
      <li><strong>Page offset</strong> (d) â€“ combined with base address to define the  physical memory address that is sent to the memory unit</li>
      <li>
        <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000318696.png" alt="image-20221003000318696" /></p>
      </li>
      <li>For given logical address space 2<sup>m</sup> and page size 2<sup>n</sup></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="address-translation-scheme-1">Address Translation Scheme</h2>

<ul>
  <li>Address generated by CPU is divided into:
    <ul>
      <li>Page number (p) â€“ used as an index into a page table which  contains base address of each page in physical memory.</li>
      <li>Page offset (d) â€“ combined with base address to define the physical  memory address that is sent to the memory unit.</li>
      <li>Given page size P under logical address A
        <ul>
          <li>p = A div P</li>
          <li>d = A mod P</li>
          <li>Ex) page size = 10 , logical address = 31
            <ul>
              <li>P = 31 div 10 = 3</li>
              <li>D = 31 mod 10 = 1</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<table>
  <tbody>
    <tr>
      <td>3</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h2 id="paging-hardware">Paging Hardware</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000440077.png" alt="image-20221003000440077" /></p>

<p><br /></p>

<h2 id="paging-model-of-logical-and-physical-memory">Paging Model of Logical and Physical Memory</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000459434.png" alt="image-20221003000459434" /></p>

<p>compile time bindingì´ë‚˜ load time bindingì€ ì´ëŸ° ê³¼ì •ì´ í•„ìš”ì—†ìŒ</p>

<ul>
  <li>logical address = physical addressì´ê¸° ë•Œë¬¸ì—</li>
</ul>

<p><br /></p>

<h2 id="paging-example">Paging Example</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000512397.png" alt="image-20221003000512397" /></p>

<p><br /></p>

<h2 id="paging-cont">Paging (Cont.)</h2>

<ul>
  <li>Calculating internal fragmentation
    <ul>
      <li>Page size = 2,048 bytes</li>
      <li>Process size = 72,766 bytes</li>
      <li>35 pages + 1,086 bytes</li>
      <li>Internal fragmentation of 2,048 - 1,086 = 962 bytes</li>
      <li>Worst case fragmentation = 1 frame â€“ 1 byte</li>
      <li>On average fragmentation = 1 / 2 frame size</li>
      <li>So small frame sizes desirable?</li>
      <li>But each page table entry takes memory to track</li>
      <li>Page sizes growing over time
        <ul>
          <li>Solaris supports two page sizes â€“ 8 KB and 4 MB</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Process view and physical memory now very different</li>
  <li>By implementation process can only access its own memory</li>
</ul>

<p><br /></p>

<h2 id="free-frames">Free Frames</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000622312.png" alt="image-20221003000622312" /></p>

<p><br /></p>

<h2 id="implementation-of-page-table">Implementation of Page Table</h2>

<ul>
  <li>Pages can be mapped into <strong>non-contiguous frames</strong></li>
  <li><strong>Page table</strong> is kept in main memory.</li>
  <li>page tableì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” page table ì—­ì‹œ main memoryì— ì˜¬ë¼ê°€ ìˆì–´ì•¼ í•˜ëŠ”ë°, ì´ ë•Œ PTBRì€ page tableì˜ ë©”ëª¨ë¦¬ ìœ„ì—ì„œì˜ ì‹œì‘ì§€ì ì„ ì˜ë¯¸í•˜ê³  PTLRì€ page tableì˜ í¬ê¸°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
    <ul>
      <li>ì´ ë‘ ê°’ìœ¼ë¡œ ì˜ëª»ëœ ì£¼ì†Œ ì ‘ê·¼ì„ ë°©ì§€í•œë‹¤.</li>
    </ul>
  </li>
  <li><strong>Page-table base register (PTBR)</strong> points to the page table
    <ul>
      <li>ë¹¨ë¦¬ ì°¾ì•„ê°€ê¸° ìœ„í•¨</li>
    </ul>
  </li>
  <li><strong>Page-table length register (PTLR)</strong> indicates size of the page table
    <ul>
      <li>Rarely does a process use all its address range</li>
      <li>entry ê°¯ìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•¨</li>
    </ul>
  </li>
  <li>In this scheme every data/instruction access requires two memory  accesses( -&gt; ì„±ëŠ¥ ì €í•˜). 
<mark>One for the page table and one for the data/instruction. </mark>
    <ul>
      <li>page tableì„ ë³´ê¸° ìœ„í•´ì„œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•´ì„œ ìƒê¸°ëŠ” ë¬¸ì œ!</li>
    </ul>
  </li>
  <li>The two memory access problem can be solved by the use of a special fastlookup hardware cache called <strong>associative memory</strong> or translation lookaside buffers (<strong>TLBs</strong>)
    <ul>
      <li>page tableì´ memoryì— ì˜¬ë¼ê°€ ìˆê¸° ë•Œë¬¸ì— dataë‚˜ instructionì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ë‘ ë²ˆì˜ ë©”ëª¨ë¦¬ accessê°€ ì¼ì–´ë‚˜ëŠ”ë°</li>
      <li>í•˜ë‚˜ì˜ ë°ì´í„°ë‚˜ ëª…ë ¹ë¬¸ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ì— ì—¬ëŸ¬ë²ˆ access í•˜ëŠ” ê±´ ë¹„íš¨ìœ¨ ì ì´ê¸° ë•Œë¬¸ì— ê·¸ë˜ì„œ ë‚˜ì˜¨ ê²ƒì´ Translation Look-aside Buffer(TLB)ì´ë‹¤.</li>
    </ul>
  </li>
  <li>Some <strong>TLBs</strong>(Translation Lookaside Buffer) store <strong>address-space identifiers (ASIDs)</strong> in each TLB entry
    <ul>
      <li>uniquely identifies each process to provide address-space protection for that process
        <ul>
          <li>(context switching ì‹œì—)Otherwise need to flush at every context switch</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>TLBs typically small (64 to 1,024 entries)</li>
  <li>On a TLB miss, value is loaded into the TLB for faster access next time
    <ul>
      <li>Replacement policies must be considered</li>
      <li>Some entries can be <strong>wired down</strong> for permanent fast access</li>
    </ul>
  </li>
  <li>TLB hitë©´ MMì— ì ‘ê·¼í•˜ì§€ ì•Šì•„ë„ ë¨.</li>
</ul>

<p><br /></p>

<h2 id="associative-register">Associative Register</h2>

<p>TLBëŠ” ì¼ì¢…ì˜ ìºì‹œ ì—­í• ì„ í•˜ëŠ” ë ˆì§€ìŠ¤í„°ë¡œ ì—­í• ì´ ë¹„ìŠ·í•Ÿ.ã…</p>

<p>ë©”ëª¨ë¦¬ì— ì—¬ëŸ¬ë²ˆ access í•˜ëŠ” ê±¸ ë§‰ê³ ì page tableì˜ ë‚´ìš©ì„ TLBì— ì €ì¥í•˜ì—¬ ë°”ë¡œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>

<ul>
  <li>
    <p>ì‹œì‘ì€ ë¹„ì–´ìˆëŠ” TLBë¡œ page tableì„ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ë‘ ë²ˆ accessë¥¼ ë°˜ë“œì‹œ í•´ì•¼í•˜ì§€ë§Œ í•œ ë²ˆ access ë˜ê¸°ë§Œ í•œë‹¤ë©´ ê·¸ ë‹¤ìŒë¶€í„°ëŠ” í•´ë‹¹ page table ì •ë³´ê°€ TLBì— ì €ì¥ì´ ë˜ì–´ ì´ê²ƒì„ í†µí•´ ë°”ë¡œ memoryì— access í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ ì§„ë‹¤.</p>
  </li>
  <li>
    <p>Associative registers â€“ parallel search</p>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000741601.png" alt="image-20221003000741601" /></p>

<ul>
  <li>Address translation (p, d)
    <ul>
      <li>If p is in associative register, get frame # out.</li>
      <li>Otherwise get frame # <strong>from page table in memory</strong></li>
    </ul>
  </li>
  <li>ASIDê°€ ê°™ì´ ì €ì¥ë  ìˆ˜ ìˆìŒ</li>
</ul>

<p><br /></p>

<h2 id="paging-hardware-with-tlb">Paging Hardware With TLB</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003000804647.png" alt="image-20221003000804647" /></p>

<p>TLB hitì˜ overhead - TLB cacheì—ì„œ searching time (Â«Â«Â MM access time)</p>

<p>TLB Missì˜ overhead - TLB searching time + page table searching time + MM access time</p>

<p><br /></p>

<h2 id="effective-access-time">Effective Access Time</h2>

<ul>
  <li>
    <p>Associative Lookup = Îµ time unit</p>

    <ul>
      <li>Can be &lt; 10% of memory access time</li>
    </ul>
  </li>
  <li>
    <p>(TLB) Hit ratio = Î±</p>

    <ul>
      <li>Hit ratio â€“ percentage of times that a page number is found in the associative registers; ratio related to number of associative registers</li>
    </ul>
  </li>
  <li>
    <p>Consider Î± = 80%, Îµ = 20ns for TLB search, 100ns for memory access Assume memory cycle time is 1 microsecond</p>
  </li>
  <li>
    <p><strong>Effective Access Time (EAT)</strong></p>

    <p>EAT = (1 + Îµ) Î± + (2 + Îµ)(1 â€“ Î±)</p>

    <p>= 2 + Îµ â€“ Î±</p>

    <ul>
      <li>(1 + Îµ) Î± -&gt;
        <ul>
          <li>TLB Hit : TLB seach  = 1 + Îµ (í•œë²ˆì˜ memory access)</li>
        </ul>
      </li>
      <li>(2 + Îµ)(1 â€“ Î±) -&gt;
        <ul>
          <li>TLB Miss: TLB search + page table search + physical m.m search = 2 + Îµ (2ë²ˆì˜ memory access)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Consider Î± = 80%, Îµ = 20ns for TLB search, 100ns for memory access</p>

    <ul>
      <li>EAT = 0.80 x 120 + 0.20 x 220 = 140ns</li>
    </ul>
  </li>
  <li>
    <p>Consider slower memory but better hit ratio -&gt; Î± = 98%, Îµ = 20ns for TLB search,  140ns for memory access</p>

    <ul>
      <li>EAT = 0.98 x 160 + 0.02 x 300 = 162.8ns</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="memory-protection">Memory Protection</h2>

<p>page ë‹¨ìœ„ protection (by validation bit)</p>

<ul>
  <li>Memory protection implemented by associating protection bit with each  frame to indicate if read-only or read-write access is allowed
    <ul>
      <li>Read only, read-write, execution only bits</li>
    </ul>
  </li>
  <li><strong>Valid-invalid</strong> bit attached to each entry in the page table:
    <ul>
      <li>â€œvalidâ€ indicates that the associated page is in the processâ€™ logical  address space, and is thus a legal page</li>
      <li>â€œinvalidâ€ indicates that the page is not in the processâ€™ logical address  space</li>
      <li>Or use PTLR</li>
    </ul>
  </li>
  <li>Page-table length register (PRLR) indicates size of the page table.
    <ul>
      <li>Rarely does a process use all its address range</li>
    </ul>
  </li>
  <li>Any violations(trap) result in a trap to the kernel</li>
</ul>

<p><br /></p>

<h2 id="valid-v-or-invalidi-bit-in-a-page-table">Valid (v) or Invalid(i) Bit In A Page Table</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001217135.png" alt="image-20221003001217135" /></p>

<ul>
  <li>Logical memoryê°€ page ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆëŠ” ëª¨ìŠµì„ ê°€ì¥ ì™¼ìª½ ê·¸ë¦¼ì„ ë³´ë©´ ì•Œ ìˆ˜ ìˆëŠ”ë° ì´ ê²½ìš° internal fragmentationì´ ë°œìƒí•  ìˆ˜ë°–ì— ì—†ë‹¤.</li>
  <li>í•˜ì§€ë§Œ internal fragmentationë˜ì–´ ë¹„ì–´ ìˆëŠ” ê³µê°„ì˜ ì£¼ì†Œë¥¼ ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë°˜ë“œì‹œ ë§‰ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— valid-invalid Bitë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.</li>
  <li>v - í—ˆìš©ëœ ë²”ìœ„ì˜ page table</li>
  <li>i - ì‹¤ì œë¡œ í”„ë¡œì„¸ìŠ¤ê°€ ê°€ë¦¬í‚¬ ìˆ˜ ìˆëŠ” ì£¼ì†Œ ê³µê°„ ì•ˆì— í¬í•¨ ëœ ë“¯ í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” page</li>
</ul>

<p><br /></p>

<h2 id="shared-pages">Shared Pages</h2>

<ul>
  <li>ê³µí†µëœ codeë¥¼ ê°–ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ì´ page tableì„ ê°€ì§ˆ ë•Œ ì¤‘ë³µì´ ë°œìƒí•˜ê²Œ ë˜ëŠ”ë° ì•„ë¬´ë˜ë„ ê³µí†µëœ codeë¥¼ ê³µìœ í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— page table ì—­ì‹œ ê°™ì€ ë¶€ë¶„ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.</li>
  <li>
    <p>ì´ëŸ° ê²½ìš° ê³µí†µëœ page tableì„ í•œ ë²ˆë§Œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ê³  ê·¸ê²ƒì— ëŒ€í•œ ì£¼ì†Œë¥¼ ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ê³µìœ í•˜ë©´ì„œ ì¤‘ë³µëœ page tableì„ ê³µìœ í•˜ë©° ë©”ëª¨ë¦¬ ê³µê°„ì˜ ë‚­ë¹„ë¥¼ ë§‰ëŠ”ë‹¤.</p>
  </li>
  <li><strong>Shared code</strong>
    <ul>
      <li>One copy of read-only (<strong>reentrant</strong>; ê°’ì´ ë°”ë€Œì§€ ì•ŠëŠ”, ì¬ì§„ì… ê°€ëŠ¥í•œ) code shared among processes 
(i.e., text editors, compilers, window systems)</li>
      <li>Similar to multiple threads sharing the same process space</li>
      <li>Also useful for interprocess communication(IPC) if sharing of read-write  pages is allowed</li>
    </ul>
  </li>
  <li><strong>Private code and data</strong>
    <ul>
      <li>Each process keeps a separate copy of the code and data</li>
      <li>The pages for the private code and data can appear anywhere in  the logical address space</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="shared-page-examples">Shared Page Examples</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001303441.png" alt="image-20221003001303441" /></p>

<ul>
  <li>ed1~3: read only
    <ul>
      <li>ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ê°™ì€ ê³³ì„ ê°€ë¦¬ì¼œì„œ ì ‘ê·¼</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="structure-of-the-page-table">Structure of the Page Table</h2>

<ul>
  <li>ë‘ ê°€ì§€ ë¬¸ì œì 
    <ul>
      <li>ì„±ëŠ¥</li>
      <li>ë©”ëª¨ë¦¬ - ë©”ì¸ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì–´ì°Œëê±´ ë©”ì¸ ë©”ëª¨ë¦¬ì˜ ê³µê°„ì„ ì°¨ì§€í•¨.</li>
    </ul>
  </li>
  <li>Memory structures for paging can get huge using straight-forward  methods
    <ul>
      <li>Consider a 32-bit logical address space as on modern computers</li>
      <li>Page size of 4 KB (2<sup>12</sup>)</li>
      <li>Page table would have 1 million entries (2<sup>32</sup> / 2<sup>12</sup>)</li>
      <li>If each entry is 4 bytes -&gt; 4 MB of physical address space /  memory for page table alone
        <ul>
          <li>í”„ë¡œì„¸ìŠ¤ í•˜ë‚˜ë‹¹ 4MB</li>
          <li>That amount of memory used to cost a lot</li>
          <li><strong>Donâ€™t want to allocate that contiguously in main memory</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Hierarchical Paging</li>
  <li>Hashed Page Tables</li>
  <li>Inverted Page Tables</li>
</ul>

<p><br /></p>

<h2 id="hierarchical-page-tables">Hierarchical Page Tables</h2>

<ul>
  <li>Break up the logical address space into multiple page tables
    <ul>
      <li>í•˜ë‚˜ì˜ í˜ì´ì§€ í…Œì´ë¸” ì•ˆì— ì—¬ëŸ¬ê°œì˜ í˜ì´ì§€ í…Œì´ë¸”ì„ ë„£ì€ í˜ì´ì§€ í…Œì´ë¸”ì„ ì˜ë¯¸í•œë‹¤.</li>
      <li>A simple technique is a two-level page table</li>
    </ul>
  </li>
  <li>
    <p>We then <strong>page</strong> the page table</p>

    <ul>
      <li>ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì˜ logical address ê³µê°„ì„ paging í•˜ëŠ” ê²ƒì´ pagingì˜ ëª©ì ì¸ë° ì—¬ê¸°ì„œëŠ”(Hierarchical Page Tables) ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” page table ìì²´ë¥¼ ë˜ ë‹¤ì‹œ paging</li>
      <li>ìš©ëŸ‰ì„ ì¤„ì´ëŠ” ê²ƒì´ ëª©ì ì´ ì•„ë‹˜!</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="two-level-page-table-scheme">Two-Level Page-Table Scheme</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221127165929205.png" alt="image-20221127165929205" /></p>

<ul>
  <li>
    <p>outer page tableì— ì˜í•´ mappingì´ ë˜ê¸° ë•Œë¬¸ì— page tableì—ì„œ pageë“¤ì€ ë¹„ì—°ì†ì ìœ¼ë¡œ ê¹”ë ¤ë„ ë¨.</p>
  </li>
  <li>í•œ pageê°€ 1024ê°œì˜ entryë¥¼ ê°–ê³  ìˆìŒ</li>
  <li>original page table
    <ul>
      <li>4KB ì§œë¦¬ page 1024ê°œ</li>
      <li>original page tableì—ì„œëŠ” ìœ„ ê·¸ë¦¼ì˜ page tableì•ˆì— ìˆëŠ” ê²ƒë“¤ì´ í•˜ë‚˜ë¡œ ë¬¶ì—¬ ìˆì—ˆìŒ.(continusouly)</li>
    </ul>
  </li>
  <li>Two-level page table
    <ul>
      <li>original page tableì—ì„œ ì–´ë–¤ pageì¸ì§€ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ outer page table í•˜ë‚˜ë¥¼ ë” ë‘ì–´ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— 4KBê°€ ë” ì¶”ê°€ë˜ì—ˆìŒ.</li>
      <li>outer page tableì— ì˜í•´ì„œ mappingì´ ë˜ê¸° ë•Œë¬¸ì— pageê°€ ë¹„ì—°ì†ì ìœ¼ë¡œ ê¹”ë ¤ë„ ëœë‹¤!!!</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="two-level-paging-example">Two-Level Paging Example</h2>

<ul>
  <li>A logical address (on 32-bit machine with 4K page size) is divided into:
    <ul>
      <li>a page number consisting of 20 bits</li>
      <li>a page offset consisting of 12 bits.</li>
    </ul>
  </li>
  <li>Since the page table is paged, the page number is further divided into:
    <ul>
      <li>a 10-bit page number.</li>
      <li>a 10-bit page offset.</li>
    </ul>
  </li>
  <li>Thus, a logical address is as follows:</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001715427.png" alt="image-20221003001715427" /></p>

<ul>
  <li>
    <p>single level page Pê°€ p1, p2ë¡œ ë‚˜ëˆ ì§</p>
  </li>
  <li>
    <p>p1ì„ í†µí•´ì„œ outer-page tableì˜ indexë¥¼ ì°¾ê³  í•´ë‹¹ indexê°€ ê°€ë¦¬í‚¤ëŠ” page table entry ì¤‘ í•˜ë‚˜ì—ì„œ p2ë¥¼ í†µí•´ physical memoryì˜ frame ë²ˆí˜¸ë¥¼ ì°¾ëŠ”ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ dë¥¼ í†µí•´ physical ë©”ëª¨ë¦¬ì—ì„œì˜ ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤.</p>
  </li>
  <li>where p1 is an index into the outer page table, and p2 is the displacement within the  page of the outer page table.
    <ul>
      <li>page entry í•˜ë‚˜ë¥¼ í‘œí˜„í•˜ëŠ”ë° 4byte, í•˜ë‚˜ì˜ pageëŠ” 4KB
        <ul>
          <li>-&gt; í•œ í˜ì´ì§€ê°€ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ” page entryì˜ ê°¯ìˆ˜ëŠ” 1K = 1000ê°œ</li>
          <li>-&gt; ê·¸ë˜ì„œ p2ì— 10bitê°€ í• ë‹¹ ë˜ì–´ì•¼ì§€ 1024ê¹Œì§€ í‘œí˜„í•  ìˆ˜ ìˆìŒ(2<sup>10</sup>)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Known as <strong>forward-mapped page table</strong></p>
  </li>
  <li>page table size / page table entry í•œ ê°œì˜ size = í•œ í˜ì´ì§€ê°€ í¬í•¨í•  ìˆ˜ ìˆëŠ” page table entry ìµœëŒ€ ê°¯ìˆ˜</li>
  <li>í•œ pageê°€ 1024ê°œì˜ entryë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— p2 = 10 bit</li>
</ul>

<p><br /></p>

<h2 id="address-translation-scheme-2">Address-Translation Scheme</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001727500.png" alt="image-20221003001727500" /></p>

<ul>
  <li>outer page tableì—ì„œ í•˜ë‚˜ì˜ inner page tableì„ ê°€ë¦¬í‚¤ê²Œ ë˜ëŠ”ë° inner page tableì€ page table ì•ˆì— 1024ê°œê°€ ìˆê³  ê° inner page tableë§ˆë‹¤ page entryê°€ 1024ê°œê°€ ìˆë‹¤.
    <ul>
      <li>ê·¸ë¦¬ê³  ê° page entry ë§ˆë‹¤ëŠ” 4KBì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="multilevel-paging64-bit-logical-address-space">Multilevel Paging(64-bit Logical Address Space)</h2>

<ul>
  <li>
    <p><strong>64bit</strong></p>
  </li>
  <li>
    <p>If page size is 4 KB (2<sup>12</sup>)</p>

    <ul>
      <li>
        <p>Then page table has 2<sup>52 </sup>entries</p>
      </li>
      <li>
        <p>If we use 2-level paging scheme, inner page tables could be 1 page long  (2<sup>10</sup> 4 byte entries)</p>
      </li>
      <li>
        <p>Address would look like</p>

        <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001824871.png" alt="image-20221003001824871" /></p>
      </li>
      <li>
        <p>Outer page table has 2<sup>42</sup> entries or 2<sup>44</sup> bytes</p>

        <ul>
          <li>outer page tableì´ ë„ˆë¬´ ì»¤ì§€ëŠ”ë°â€¦?(ì‹¬ì§€ì–´ ì—°ì†ì ì¸ ê³µê°„ì— ê¹”ë ¤ì•¼ í•¨.)
            <ul>
              <li>One solution is to add a 2nd outer page table (<strong>Three level paging scheme</strong>)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>But in the following example the 2nd outer page table is still 2<sup>34</sup> bytes in size</p>

        <ul>
          <li>And possibly 4 memory access (three level page + page offset) to get to one physical memory location</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="three-level-paging-scheme">Three-level Paging Scheme</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003001837935.png" alt="image-20221003001837935" /></p>

<p><br /></p>

<h2 id="four-level-paging-scheme">Four level paging scheme</h2>

<ul>
  <li>
    <p>Since each level is stored as a separate table in memory, covering a  logical address to a physical one may take four memory accesses.  (p1,p2,p3,p4,d)</p>

    <ul>
      <li>-&gt; 32bitê°€ ì—¬ì „íˆ ë¶€ë‹´ ìŠ¤ëŸ¬ì›Œì„œ</li>
    </ul>
  </li>
  <li>
    <p>Even though time needed for one memory access is quintupled, caching  permits performance to remain reasonable.</p>
  </li>
  <li>
    <p>Cache hit rate of 98 percent yields:</p>

    <p>effective access time = (0.98 x 120) + (0.02 x 520)</p>

    <p>â€‹									  = 128 nanoseconds.</p>

    <ul>
      <li>520: 5ë²ˆì˜ access(500?) + TLB cache ê²€ìƒ‰ ì‹œê°„(20)
        <ul>
          <li>5ë²ˆì˜ memory access -&gt; 4 level page + page offset(actual page access)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>which is only a 28 percent slowdown in memory access time.</p>

<p><br /></p>

<h2 id="hashed-page-tables">Hashed Page Tables</h2>

<ul>
  <li>A Common approach in case of address spaces &gt; 32 bits.
    <ul>
      <li>ì£¼ë¡œ ì£¼ì†Œ ê³µê°„ì´ 32bitë³´ë‹¤ í° ê²½ìš° ì‚¬ìš©í•œë‹¤.</li>
    </ul>
  </li>
  <li>The virtual page number is hashed into a page table.
    <ul>
      <li>VPNì´ hash functionì˜ keyë¡œ ì‚¬ìš©</li>
      <li>í•´ì‹œí˜• í…Œì´ë¸”ì˜ ê° í•­ëª©ì€ linked listë¥¼ ê°–ê³  ìˆë‹¤.</li>
      <li>This page table contains a chain of elements hashing to the same location.</li>
    </ul>
  </li>
  <li>Each element contains (1) the virtual page number(q) (2) the value of the mapped  page frame(s) 
(3) a pointer to the next element</li>
  <li>Virtual page numbers are compared in this chain searching for a match.
    <ul>
      <li>If a match is found, the corresponding physical frame is extracted.</li>
    </ul>
  </li>
  <li>Variation for 64-bit addresses is <strong>clustered page tables</strong>
    <ul>
      <li>Similar to hashed but each entry refers to several pages (such as 16) rather  than 1</li>
      <li>í•œ ê°œì˜ í˜ì´ì§€ í…Œì´ë¸” í•­ëª©ì´ ì—¬ëŸ¬ í˜ì´ì§€ í”„ë ˆì„ì— ëŒ€í•œ ë§¤í•‘ ì •ë³´ë¥¼ ì§€ë‹ ìˆ˜ ìˆë‹¤.</li>
      <li>Especially useful for <strong>sparse</strong> address spaces (where memory references are  non-contiguous and scattered)</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="hashed-page-table">Hashed Page Table</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002014031.png" alt="image-20221003002014031" /></p>

<ul>
  <li>ì„œë¡œ ë‹¤ë¥¸ pê°’ì— ëŒ€í•´ ë™ì¼í•œ hash ê°’ì´ ì–»ì–´ì§€ê²Œ ë˜ë©´ ì˜¤ë˜ì¼€? -&gt; collision ë°œìƒ
    <ul>
      <li>ë™ì˜ì–´(<strong>Synonym</strong>) : ì¶©ëŒì´ ì¼ì–´ë‚œ ë ˆì½”ë“œì˜ ì§‘í•©. í‚¤ê°’ì´ ê°™ì€ ë ˆì½”ë“œì˜ ì§‘í•©ìœ¼ë¡œ, ë™ì˜ì–´ê°€ ìŠ¬ë¡¯ì˜ ê°¯ìˆ˜ë³´ë‹¤ ë§ìœ¼ë©´ ì˜¤ë²„í”Œë¡œìš°ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
  <li>hash functionì— ì˜í•´ ì–»ì–´ì§€ëŠ” ê°’ì´ unique í•˜ë©´ hash tableì— ì €ì¥, ì‚½ì…
    <ul>
      <li>O(1)</li>
    </ul>
  </li>
  <li>collisionì„ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” linked listë¥¼ í™œìš©í•´ì„œ ì¤‘ë³µ ê°’ì´ ë‚˜ì˜¤ë©´ linked listë¡œ ì­‰ì­‰ ì—°ê²°í•´ ë‚˜ê°€ì„œ pê°’, ì¦‰ page numberê°€ ë‚´ê°€ ì°¾ëŠ” page numberì¸ì§€ë¥¼ í™•ì¸í•˜ì—¬ ì°¾ëŠ” ë°©ë²•ì´ ìˆë‹¤.
    <ul>
      <li>O(n)</li>
    </ul>
  </li>
  <li>hash tableì„ í†µí•´ linked listë¡œ ì´ì–´ì§€ê¸° ë•Œë¬¸ì— ì´ ì—­ì‹œ ë¹„ì—°ì†ì ì¸ íƒ‘ì¬ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="inverted-page-table">Inverted Page Table</h2>

<ul>
  <li>ë©”ëª¨ë¦¬ í”„ë ˆì„ë§ˆë‹¤ í•œ í•­ëª©ì”©ì„ í• ë‹¹í•œë‹¤.
    <ul>
      <li>ê° í•­ëª©ì€ í”„ë ˆì„ì— ì˜¬ë¼ì™€ ìˆëŠ” í˜ì´ì§€ ì£¼ì†Œ, ê·¸ í˜ì´ì§€ë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ” pidë¥¼ í‘œì‹œí•œë‹¤.</li>
      <li>ë”°ë¼ì„œ ê·¸ ì‹œìŠ¤í…œì—ëŠ” ë‹¨ í•˜ë‚˜ì˜ í˜ì´ì§€ í…Œì´ë¸”ë§Œ ì¡´ì¬í•˜ê²Œ ë˜ì–´ ê³µê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</li>
    </ul>
  </li>
  <li>Each process has a page table associated with it
    <ul>
      <li>Each page table may consists of millions of entries</li>
    </ul>
  </li>
  <li>Rather than each process having a page table and keeping track of all possible  logical pages, track all physical pages
    <ul>
      <li>One entry for each real page (frame) of memory.</li>
      <li>Entry consists of the virtual address of the page stored in that real memory  location, with information about the process that owns that page.</li>
    </ul>
  </li>
  <li>Decreases memory needed to store each page table, but increases time needed to  search the table when a page reference occurs.
    <ul>
      <li>whole table might be searched</li>
    </ul>
  </li>
  <li>Use hash table to limit the search to one â€” or at most a few â€” page-table entries.
    <ul>
      <li>TLB can accelerate access (Associated memory register)</li>
    </ul>
  </li>
  <li>But how to implement shared memory?
    <ul>
      <li>One mapping of a virtual address to the shared physical address</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="inverted-page-table-architecture">Inverted Page Table Architecture</h2>

<ul>
  <li>each virtual address consists of &lt;process-id, page-number, offset&gt;</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002127392.png" alt="image-20221003002127392" /></p>

<ul>
  <li>ì‹œìŠ¤í…œì— page tableì´ ë”± í•˜ë‚˜ë§Œ ì¡´ì¬
    <ul>
      <li>page table íƒ‘ì¬ì— í•„ìš”í•œ main memory ìš©ëŸ‰ì„ ì¤„ì´ëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŒ</li>
    </ul>
  </li>
  <li>pid + p ê°€ ì¼ì¹˜í•˜ëŠ” indexë¥¼ ì°¾ëŠ”ë‹¤.</li>
  <li>physical memoryì— enryê°€ 100ê°œ ìˆìœ¼ë©´ page tableë„ 100ê°œê°€ ìˆìŒ</li>
</ul>

<ol>
  <li>
    <p>ê°€ìƒ ì£¼ì†ŒëŠ” &lt;pid, page number, offset&gt; ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.</p>
  </li>
  <li>
    <p>ë©”ëª¨ë¦¬ ì°¸ì¡°ê°€ ë°œìƒí•˜ë©´ page tableì— ê°€ì„œ &lt;pid, page number&gt;ê°€ ì¼ì¹˜í•˜ëŠ” í•­ëª©ì„ ì°¾ëŠ”ë‹¤.</p>
  </li>
  <li>
    <p>ì¼ì¹˜í•˜ëŠ” ê²ƒì´ ië²ˆì§¸ í•­ëª©ì—ì„œ ë°œê²¬ë˜ë©´ í•´ë‹¹ physical addressëŠ” &lt;i, offset&gt;ì´ ë˜ê³  ì¼ì¹˜í•˜ëŠ” ê²ƒì´ ì—†ìœ¼ë©´ ì˜ëª»ëœ ë©”ëª¨ë¦¬ë¡œ ê°„ì£¼í•œë‹¤.</p>
  </li>
</ol>

<p><br /></p>

<h2 id="osì—-ì˜í•œ----ì•ˆë‚˜ì˜´">OSì— ì˜í•œ ! - ì•ˆë‚˜ì˜´</h2>

<h2 id="segmentation-with-paging---multics">Segmentation with Paging - MULTICS</h2>

<ul>
  <li>The MULTICS system solved problems of external fragmentation  and lengthy search times by paging the segments.</li>
  <li>Solution differs from pure segmentation in that the segment-table  entry contains <strong>not the base address of the segment, but rather the base address of a page table for this segment.</strong></li>
</ul>

<p><br /></p>

<h2 id="multics-address-translation-scheme">MULTICS Address Translation Scheme</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002203270.png" alt="image-20221003002203270" /></p>

<p>í•œ segmentê°€ ì—¬ëŸ¬ ê°œì˜ pageë¡œ ë‚˜ëˆ ì§€ë‹ˆê¹Œ d -&gt; p+ d`ê°€ ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<h2 id="segmentation-with-paging---intel-386">Segmentation with Paging - Intel 386</h2>

<ul>
  <li>Intel 386 uses segmentation with paging for memory management with a  two-level paging scheme.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002226872.png" alt="image-20221003002226872" /></p>

<p><br /></p>

<h2 id="example-the-intel-32-and-64-bit-architectures">Example: The Intel 32 and 64-bit Architectures</h2>

<ul>
  <li>Dominant industry chips</li>
  <li>Pentium CPUs are 32-bit and called IA-32 architecture (x-86)</li>
  <li>Current Intel CPUs are 64-bit and called IA-64 architecture</li>
  <li>Many variations in the chips, cover the main ideas here</li>
</ul>

<p><br /></p>

<h2 id="example-the-intel-ia-32-architecture">Example: The Intel IA-32 Architecture</h2>

<ul>
  <li>Supports both <code class="language-plaintext highlighter-rouge">segmentation</code> and <code class="language-plaintext highlighter-rouge">segmentation with paging</code>
    <ul>
      <li>Each segment can be 4 GB (4*10<sup>9</sup> Bytes)</li>
      <li>Up to 16 K segments per process</li>
      <li>Logical address space of a process is divided into two partitions
        <ul>
          <li>First partition of up to 8 K segments are private to process (kept in <strong>local  descriptor table (LDT)</strong>)</li>
          <li>Second partition of up to 8K segments shared among all processes (kept  in <strong>global descriptor table (GDT)</strong>)</li>
          <li>Each entry in LDT &amp; GDT consists of an 8-byte segment descriptor with  detailed information about a particular segment including <span style="color:red">base location  and limit of a segment</span></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="example-the-intel-ia-32-architecture-cont">Example: The Intel IA-32 Architecture (Cont.)</h2>

<ul>
  <li>
    <p>CPU generates logical address</p>

    <ul>
      <li>
        <p>Logical address is a pair of (selector, offset)</p>
      </li>
      <li>
        <p>Selector(16 bits) given to segmentation unit</p>

        <ul>
          <li>
            <p>Which produces linear addresses</p>
          </li>
          <li>
            <p>s designates the segment number,</p>
          </li>
          <li>
            <p>g indicates whether the segment is in GDT or LDT</p>
          </li>
          <li>
            <p>p deals with protection</p>
          </li>
          <li>
            <p>offset (32 bits) specifying the location of the byte within the segment</p>

            <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002437823.png" alt="image-20221003002437823" /></p>
          </li>
        </ul>
      </li>
      <li>
        <p>Linear address given to paging unit</p>

        <ul>
          <li>Which generates physical address in main memory</li>
          <li>Paging units form equivalent of MMU</li>
          <li>Pages sizes can be 4 KB or 4 MB
            <ul>
              <li>For 4KB pages, two-level paging</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="logical-to-physical-address-translation-in-ia-32">Logical to Physical Address Translation in IA-32</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002502914.png" alt="image-20221003002502914" /></p>

<p><br /></p>

<h2 id="intel-ia-32-segmentation">Intel IA-32 Segmentation</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002513358.png" alt="image-20221003002513358" /></p>

<p><br /></p>

<h2 id="intel-ia-32-paging-architecture">Intel IA-32 Paging Architecture</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002529262.png" alt="image-20221003002529262" /></p>

<p><br /></p>

<h2 id="intel-ia-32-page-address-extensions">Intel IA-32 Page Address Extensions</h2>

<ul>
  <li>32-bit address limits led Intel to create <strong>page address extension (PAE)</strong>, allowing  32-bit apps access to more than 4GB of memory space
    <ul>
      <li>Paging went to a <strong>3-level scheme</strong></li>
      <li>Top two bits refer to a <strong>page directory pointer table</strong></li>
      <li>Page-directory and page-table entries moved from <strong>32 bits to 64-bits</strong> in size
        <ul>
          <li>Base address of page tables and page frames to extend from <strong>20 to 24 bits</strong></li>
        </ul>
      </li>
      <li>Net effect of PAE is increasing address space (from 32 bits) to <strong>36 bits â€“ 64GB of physical memory</strong> (24 + 12 bit offset)
        <ul>
          <li>24: pageì—ì„œ íŠ¹ì • frameì„ ì°¾ì•„ê°€ê¸° ìœ„í•œ ìš©ë„</li>
          <li></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002607170.png" alt="image-20221003002607170" /></p>

<p><br /></p>

<h2 id="intel-x86-64">Intel x86-64</h2>

<ul>
  <li>Current generation Intel x86 architecture</li>
  <li>64 bits is ginormous (&gt; 16 exabytes 16*10<sup>18</sup> : 2<sup>64</sup> bytes)</li>
  <li>In practice only implement 48 bit addressing for virtual addressing
    <ul>
      <li>Page sizes of 4 KB, 2 MB, 1 GB</li>
      <li>Four levels of paging hierarchy</li>
    </ul>
  </li>
  <li>Can also use PAE, so virtual addresses are 48 bits and physical addresses are 52 bits</li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002651857.png" alt="image-20221003002651857" /></p>

<p><br /></p>

<h2 id="example-arm-architecture">Example: ARM Architecture</h2>

<ul>
  <li>Dominant mobile platform chip  (Apple iOS and Google Android  devices for example)</li>
  <li>Modern, energy efficient, 32-bit  CPU</li>
  <li>4 KB and 16 KB pages</li>
  <li>1 MB and 16 MB pages (termed  <strong>sections</strong>)</li>
  <li>One-level paging for sections, twolevel for smaller pages</li>
  <li>Two levels of TLBs
    <ul>
      <li>Outer level has two micro  TLBs (one data, one  instruction)</li>
      <li>Inner is single main TLB</li>
      <li>First inner is checked, on  miss outers are checked,  and on miss page table  walk performed by CPU</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002726169.png" alt="image-20221003002726169" /></p>

<p><br /></p>

<h2 id="armv8-4-level-hierarchical-paging">ARMv8 4-level hierarchical paging</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002742974.png" alt="image-20221003002742974" /></p>

<p>offsetì— ë”°ë¼ paging levelì´ ë‹¬ë¼ì§„ë‹¤.</p>

<ul>
  <li>1GB region</li>
  <li>2MB region</li>
</ul>

<p><br /></p>

<h2 id="linear-address-in-linux">Linear Address in Linux</h2>

<ul>
  <li>
    <p>Linux uses only 6 segments (kernel code, kernel data, user code, user  data, task-state segment (TSS), default LDT segment)</p>
  </li>
  <li>
    <p>Linux only uses two of four possible modes â€“ kernel and user</p>
  </li>
  <li>
    <p>Uses a three-level paging strategy that works well for 32-bit and 64-bit  systems</p>
  </li>
  <li>
    <p>Linear address broken into four parts:</p>

    <p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002815700.png" alt="image-20221003002815700" /></p>
  </li>
  <li>
    <p>But the Pentium only supports 2-level paging?!</p>

    <ul>
      <li>linuxì˜ 3 levelì€ ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ ì‚¬ìš©í•´? -&gt; í•œ level ê·¸ëƒ¥ ì‚¬ìš© ì•ˆ í•´ë²„ë¦¬ê¸”~</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="three-level-paging-in-linux">Three-level Paging in Linux</h2>

<p><img src="https://raw.githubusercontent.com/speardragon/save-image-repo/main/img/image-20221003002833465.png" alt="image-20221003002833465" /></p>

<p><br /></p>

<h2 id="comparing-memory-management-startegies">Comparing Memory-Management Startegies</h2>

<ul>
  <li>Hardware support</li>
  <li>Performance</li>
  <li>Fragmentation</li>
  <li>Relocation</li>
  <li>Swapping</li>
  <li>Sharing</li>
  <li>Protection</li>
  <li>-&gt; Refer to summary section in text boo</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> íƒœê·¸: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#os" class="page__taxonomy-item p-category" rel="tag">OS</a><span class="sep">, </span>
    
      <a href="/tags/#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C" class="page__taxonomy-item p-category" rel="tag">ìš´ì˜ì²´ì œ</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> ì¹´í…Œê³ ë¦¬: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#os" class="page__taxonomy-item p-category" rel="tag">OS</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> ì—…ë°ì´íŠ¸:</strong> <time class="dt-published" datetime="2022-10-03T00:00:00+09:00">2022-10-03</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">ê³µìœ í•˜ê¸°</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%5BOS%5D+Memory+Management%20http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Memory-Management%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="ê³µìœ í•˜ê¸° Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Memory-Management%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="ê³µìœ í•˜ê¸° Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fos%2FOS-Memory-Management%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="ê³µìœ í•˜ê¸° LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/os/OS-Deadlocks/" class="pagination--pager" title="[OS] Deadlocks
">ì´ì „</a>
    
    
      <a href="/frontend/hci/HCI-6.-Interaction-Design-Basic-2/" class="pagination--pager" title="[HCI] 6. Interaction Design Basics 2
">ë‹¤ìŒ</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">ì°¸ê³ </h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/os/OS-Virtual-Memory/" rel="permalink">[OS] Virtual Memory
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 11/20/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      â–¶OS
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          41 ë¶„ ì†Œìš”
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-10.-Universal-DesignMulti-Sensory-Systems/" rel="permalink">[HCI] 10. Universal Design-Multi-Sensory Systems
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/23/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      â–¶FrontEnd
      â–¶HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 ë¶„ ì†Œìš”
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Universal Design Principles - NCSU
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-9.-Dialogue-Notations-Design-2/" rel="permalink">[HCI] 9. Dialogue Notations and Design 2
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/19/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      â–¶FrontEnd
      â–¶HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 ë¶„ ì†Œìš”
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">O/X
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/frontend/hci/HCI-9.-Dialogue-Notations-and-Design-1/" rel="permalink">[HCI] 9. Dialogue Notations and Design 1
</a>
      
    </h2>

    
    <p class="archive__item-excerpt"><i class="far fa-calendar-alt"></i> 10/17/2022 &nbsp; 
      <i class="far fa-folder-open"></i> 
      â–¶FrontEnd
      â–¶HCI
      
    </p>
  
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 ë¶„ ì†Œìš”
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Dialogue Notations and Design
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>íŒ”ë¡œìš°:</strong></li>
    

    
      
        
          <li><a href="https://github.com/speardragon" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> í”¼ë“œ</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kang Chang Ryong. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/os/OS-Memory-Management/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/os/[OS] Memory Management"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://sppeardragon.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
